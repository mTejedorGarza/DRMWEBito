@using System.Collections.Generic
@using System.Web.UI.WebControls
@using Spartane.Core.Domain.Pacientes;
@using Spartane.Core.Domain.Spartan_User;
@using Spartane.Core.Domain.Tipo_de_Registro;
@using Spartane.Core.Domain.Tipo_Paciente;
@using Spartane.Core.Domain.Spartan_User;
@using Spartane.Core.Domain.Empresas;
@using Spartane.Core.Domain.Pais;
@using Spartane.Core.Domain.Estado;
@using Spartane.Core.Domain.Sexo;
@using Spartane.Core.Domain.Estado_Civil;
@using Spartane.Core.Domain.Pais;
@using Spartane.Core.Domain.Estado;
@using Spartane.Core.Domain.Objetivos;
@using Spartane.Core.Domain.Estatus_por_Suscripcion;
@using Spartane.Core.Domain.Respuesta_Logica;
@using Spartane.Core.Domain.Respuesta_Logica;
@using Spartane.Core.Domain.Respuesta_Logica;
@using Spartane.Core.Domain.Respuesta_Logica;
@using Spartane.Core.Domain.Respuesta_Logica;
@using Spartane.Core.Domain.Respuesta_Logica;
@using Spartane.Core.Domain.Tipo_de_Dieta;
@using Spartane.Core.Domain.Suplementos;
@using Spartane.Core.Domain.Preferencias_Sal;
@using Spartane.Core.Domain.Preferencias_Grasas;
@using Spartane.Core.Domain.Cantidad_Comidas;
@using Spartane.Core.Domain.Preferencias_Preparacion;
@using Spartane.Core.Domain.Preferencias_Entrecomidas;
@using Spartane.Core.Domain.Nivel_de_Satisfaccion;
@using Spartane.Core.Domain.Tipo_Modificacion_Alimentos;
@using Spartane.Core.Domain.Periodo_del_dia;
@using Spartane.Core.Domain.Estado_de_Animo;
@using Spartane.Core.Domain.Respuesta_Logica;
@using Spartane.Core.Domain.Frecuencia_Ejercicio;
@using Spartane.Core.Domain.Duracion_Ejercicio;
@using Spartane.Core.Domain.Tipo_Ejercicio;
@using Spartane.Core.Domain.Antiguedad_Ejercicios;
@using Spartane.Core.Domain.Interpretacion_IMC;
@using Spartane.Core.Domain.Interpretacion_IMC;
@using Spartane.Core.Domain.Interpretacion_corporal;
@using Spartane.Core.Domain.Interpretacion_distribucion_grasa_corporal;
@using Spartane.Core.Domain.Interpretacion_indice_cintura__cadera;
@using Spartane.Core.Domain.Interpretacion_consumo_de_agua;
@using Spartane.Core.Domain.Interpretacion_Frecuencia_cardiaca_en_Esfuerzo;
@using Spartane.Core.Domain.Nivel_de_dificultad;
@using Spartane.Core.Domain.Interpretacion_Dificultad_de_Rutina_de_Ejercicios;
@using Spartane.Core.Domain.Interpretacion_Calorias;

@using Spartane.Core.Domain.Permission
@using Spartane.Web.Areas.WebApiConsumer
@using Spartane.Web.Helpers
@{
    ViewBag.Title = Resources.Resources.Index;
    Permission permission = ViewBag.Permission;
    var advanceSearch = (bool)ViewBag.AdvanceSearch;


}
<style>
    .MarginBottom {
        margin-bottom: 1%;
    }

    #divAdvanceSearch input {
        margin-right: 2%;
    }

    #divAdvanceSearch button {
        margin-right: 2%;
    }

    #divAdvanceSearch select {
        margin-right: 2%;
    }

    #divAdvanceSearch h3 {
        margin-top: 2%;
    }
</style>
<div class="loading style-2"><div class="loading-wheel"></div></div>
<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>@Resources.PacientesResources.Pacientes</h2>
        
        <ol class="breadcrumb">
            <li>
                <a href="@Url.Action("Index", "Home")">@Resources.Resources.Home</a>
                
            </li>
            <li class="active">
                @if (Session["PhaseName"] != null)
                {
                    <strong>@Session["PhaseName"].ToString()</strong>
                }
                else
                {
                    <strong>@Resources.PacientesResources.Pacientes</strong>
                }
                
            </li>
        </ol>
    </div>
    <div class="col-lg-2">
		@{
            if (Convert.ToInt32(Spartane.Web.SessionHelper.Role) == (int)Spartane.Core.Enums.SpartanRoleEnum.Admin)
            {
                <h2>&nbsp;</h2>
                <button onclick="PacientesGetBusinessRule()" type="button" class="btn btn-info btn-lg displayBusinessProperyButton" data-toggle="modal" data-target="#PacientesBusinessRule-form">
                    <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToBegin">
                        <i class="fa fa-cogs fa-spin"></i>
                    </a>
                </button>
                <div aria-hidden="true" class="modal fade in PacientesPropertyBusinessModal" id="PacientesPropertyBusinessModal-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title">
                                    Property & Business Rules
                                    <button data-dismiss="modal" class="close" type="button"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                                </h4>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <a class="btn btn-primary full-width" data-dismiss="modal" data-toggle="modal" data-target="#PropertyModal-form" onclick="GetPropertyBag()">Properties</a>
                                    </div>
                                    <div class="clearfix col-sm-12">&nbsp;</div>
                                    <div class="col-sm-12">
                                        <a class="btn btn-primary full-width" data-dismiss="modal" data-toggle="modal" data-target="#PacientesBusinessRule-form" onclick="PacientesGetBusinessRule()">Business Rule</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div aria-hidden="true" data-backdrop="static" class="modal fade in PropertyModal" id="PropertyModal-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                </div>
                <div aria-hidden="true" data-backdrop="static" class="modal fade in PacientesBusinessRuleModal" id="PacientesBusinessRule-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                </div>
                <div aria-hidden="true" data-backdrop="static" class="modal fade in PacientesAddBusinessRuleModal" id="PacientesAddBusinessRule-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                </div>
            }
		}
    </div>
</div>

<input type="hidden" value="List" name="Operation" id="Operation" />

<link href='http://fonts.googleapis.com/css?family=Open+Sans:300,600,400' rel='stylesheet' type='text/css'>

<span id="popupNotification"></span>

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-content">

                    <div id="jsGrid">
                    </div>

                    @* Model Start Here *@

                    @using (Ajax.BeginForm("", "", new AjaxOptions { OnSuccess="" }))
                    {
                        
                    }
                    
                     @* Model Print Start*@
                    <div id="exportModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="gridSystemModalLabel">@Resources.Resources.Export</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-3">@Resources.Resources.ExportOptions:</div>
                                        <div class="col-md-8 col-md-offset-0">
                                            <label class="">
                                                <input type="radio" name="optradio" value="1" checked="true">@Resources.Resources.ExporOnlyCurrent
                                            </label>
                                            <label class="">
                                                <input type="radio" name="optradio" value="0">@Resources.Resources.ExporAllRecords
                                            </label>
                                        </div>
                                    </div>
                                    <div class="row">
                                            </div>
                                        </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">@Resources.Resources.Close</button>
                                    <button type="button" id="btnPrint" class="btn btn-primary" onclick="return PrintDocument(3);">@Resources.Resources.Print</button>
                                    <button type="button" id="btnPdf" class="btn btn-primary" onclick="return Export(1);">@Resources.Resources.Export</button>
                                    <button type="button" id="btnExcel" class="btn btn-primary" onclick="return Export(2);">@Resources.Resources.Export</button>
                                    <button type="button" id="btnCSV" class="btn btn-primary" onclick="return Export(4);">@Resources.Resources.Export</button>
                                </div>
                            </div>
                            <!-- /.modal-content -->
                        </div><!-- /.modal-dialog -->
                    </div>
					@* Model Print Format Start*@
                    <div id="printFormatModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="gridSystemModalLabel">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="gridSystemModalLabel">@Resources.Resources.Print @Resources.Spartan_FormatResources.Format </h4>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div id="spartan_formats" class="col-md-6 col-md-offset-0">
                                                                                                                   
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">@Resources.Resources.Close</button>
                                        <button type="button" id="btnPrint" class="btn btn-primary" onclick="return ExportToPdfFormats();">@Resources.Resources.Print @Resources.Resources.PDF</button>         
                                    </div>
                                    <div class="row">
                                    </div>
                                </div>                              
                            </div>
                            <!-- /.modal-content -->
                        </div><!-- /.modal-dialog -->
                    </div>
                    <div id="botonera">
						@if (permission.New)
                        { 
                            @Html.ActionLink(Resources.Resources.Create, "Create", "Pacientes", new { @class = "btn btn-primary" })
                        }
                        @Html.ActionLink(@Resources.Resources.AdvanceSearch, "ShowAdvanceFilter", "Pacientes", new { previousFilters = advanceSearch }, new { @class = ("btn btn-primary") })
                        <button onclick="ClearFilter()" class=" btn btn-primary">@Resources.Resources.ClearFilter</button>
                                </div>
                    <div class="table-responsive">

                        <table id="tblPacientes" class="table table-striped table-bordered table-hover dataTables-example scroll_content" style="overflow-x:scroll;" cellspacing="0">
                            <thead>
                                <tr>
                                    <th>@Resources.Resources.Actions</th>
                                    <th>@Resources.PacientesResources.Folio</th>
                                    <th>@Resources.PacientesResources.Fecha_de_Registro</th>
                                    <th>@Resources.PacientesResources.Hora_de_Registro</th>
                                    <th>@Resources.PacientesResources.Usuario_que_Registra</th>
                                    <th>@Resources.PacientesResources.Es_nuevo_registro</th>
                                    <th>@Resources.PacientesResources.Tipo_de_Registro</th>
                                    <th>@Resources.PacientesResources.Tipo_de_Paciente</th>
                                    <th>@Resources.PacientesResources.Usuario_Registrado</th>
                                    <th>@Resources.PacientesResources.Empresa</th>
                                    <th>@Resources.PacientesResources.Numero_de_Empleado</th>
                                    <th>@Resources.PacientesResources.Nombres</th>
                                    <th>@Resources.PacientesResources.Apellido_Paterno</th>
                                    <th>@Resources.PacientesResources.Apellido_Materno</th>
                                    <th>@Resources.PacientesResources.Nombre_Completo</th>
                                    <th>@Resources.PacientesResources.Celular</th>
                                    <th>@Resources.PacientesResources.Email</th>
                                    <th>@Resources.PacientesResources.Fecha_de_nacimiento</th>
                                    <th>@Resources.PacientesResources.Nombre_del_Padre_o_Tutor</th>
                                    <th>@Resources.PacientesResources.Pais_de_nacimiento</th>
                                    <th>@Resources.PacientesResources.Lugar_de_nacimiento</th>
                                    <th>@Resources.PacientesResources.Sexo</th>
                                    <th>@Resources.PacientesResources.Estado_Civil</th>
                                    <th>@Resources.PacientesResources.Calle</th>
                                    <th>@Resources.PacientesResources.Numero_exterior</th>
                                    <th>@Resources.PacientesResources.Numero_interior</th>
                                    <th>@Resources.PacientesResources.Colonia</th>
                                    <th>@Resources.PacientesResources.CP</th>
                                    <th>@Resources.PacientesResources.Ciudad</th>
                                    <th>@Resources.PacientesResources.Pais</th>
                                    <th>@Resources.PacientesResources.Estado</th>
                                    <th>@Resources.PacientesResources.Ocupacion</th>
                                    <th>@Resources.PacientesResources.Cantidad_hijos</th>
                                    <th>@Resources.PacientesResources.Objetivo</th>
                                    <th>@Resources.PacientesResources.Estatus_Paciente</th>
                                    <th>@Resources.PacientesResources.Plan_Alimenticio_Completo</th>
                                    <th>@Resources.PacientesResources.Plan_Rutina_Completa</th>
                                    <th>@Resources.PacientesResources.Cuenta_con_padecimientos</th>
                                    <th>@Resources.PacientesResources.Frecuencia_Cardiaca</th>
                                    <th>@Resources.PacientesResources.Frecuencia_Respiratoria</th>
                                    <th>@Resources.PacientesResources.Presion_sistolica</th>
                                    <th>@Resources.PacientesResources.Presion_diastolica</th>
                                    <th>@Resources.PacientesResources.Peso_actual</th>
                                    <th>@Resources.PacientesResources.Estatura</th>
                                    <th>@Resources.PacientesResources.Peso_habitual</th>
                                    <th>@Resources.PacientesResources.Circunferencia_de_cintura_cm</th>
                                    <th>@Resources.PacientesResources.Circunferencia_de_cadera_cm</th>
                                    <th>@Resources.PacientesResources.Anchura_de_muneca_mm</th>
                                    <th>@Resources.PacientesResources.Circunferencia_de_brazo_cm</th>
                                    <th>@Resources.PacientesResources.Pliegue_cutaneo_tricipital_mm</th>
                                    <th>@Resources.PacientesResources.Pliegue_cutaneo_bicipital_mm</th>
                                    <th>@Resources.PacientesResources.Pliegue_cutaneo_subescapular_mm</th>
                                    <th>@Resources.PacientesResources.Pliegue_cutaneo_supraespinal_mm</th>
                                    <th>@Resources.PacientesResources.Edad_Metabolica</th>
                                    <th>@Resources.PacientesResources.Agua_corporal</th>
                                    <th>@Resources.PacientesResources.Grasa_Visceral</th>
                                    <th>@Resources.PacientesResources.Grasa_Corporal</th>
                                    <th>@Resources.PacientesResources.Grasa_Corporal_kg</th>
                                    <th>@Resources.PacientesResources.Masa_Muscular_kg</th>
                                    <th>@Resources.PacientesResources.Masa_Muscular_</th>
                                    <th>@Resources.PacientesResources.Esta_embarazada</th>
                                    <th>@Resources.PacientesResources.Tu_embarazo_es_multiple</th>
                                    <th>@Resources.PacientesResources.Semana_de_gestacion</th>
                                    <th>@Resources.PacientesResources.Peso_pregestacional</th>
                                    <th>@Resources.PacientesResources.Toma_anticonceptivos</th>
                                    <th>@Resources.PacientesResources.Nombre_del_Anticonceptivo</th>
                                    <th>@Resources.PacientesResources.Dosis</th>
                                    <th>@Resources.PacientesResources.Climaterio</th>
                                    <th>@Resources.PacientesResources.Fecha_Climaterio</th>
                                    <th>@Resources.PacientesResources.Terapia_reemplazo_hormonal</th>
                                    <th>@Resources.PacientesResources.Tipo_Dieta</th>
                                    <th>@Resources.PacientesResources.Suplementos</th>
                                    <th>@Resources.PacientesResources.Consumo_de_sal</th>
                                    <th>@Resources.PacientesResources.Grasas_Preferencias</th>
                                    <th>@Resources.PacientesResources.Comidas_cantidad</th>
                                    <th>@Resources.PacientesResources.Preparacion_Preferencias</th>
                                    <th>@Resources.PacientesResources.Entre_comidas</th>
                                    <th>@Resources.PacientesResources.Apetito</th>
                                    <th>@Resources.PacientesResources.Habitos_Modificacion</th>
                                    <th>@Resources.PacientesResources.Horario_hambre</th>
                                    <th>@Resources.PacientesResources.Cuando_cambia_mi_estado_de_animo</th>
                                    <th>@Resources.PacientesResources.Medicamentos_bajar_peso</th>
                                    <th>@Resources.PacientesResources.Cual_medicamento</th>
                                    <th>@Resources.PacientesResources.Frecuencia_Ejercicio</th>
                                    <th>@Resources.PacientesResources.Duracion_Ejercicio</th>
                                    <th>@Resources.PacientesResources.Tipo_Ejercicio</th>
                                    <th>@Resources.PacientesResources.Antiguedad_Ejercicio</th>
                                    <th>@Resources.PacientesResources.IMC</th>
                                    <th>@Resources.PacientesResources.Interpretacion_IMC</th>
                                    <th>@Resources.PacientesResources.IMC_Pediatria</th>
                                    <th>@Resources.PacientesResources.Complexion_corporal</th>
                                    <th>@Resources.PacientesResources.Interpretacion_complexion_corporal</th>
                                    <th>@Resources.PacientesResources.Distribucion_de_grasa_corporal</th>
                                    <th>@Resources.PacientesResources.Interpretacion_grasa_corporal</th>
                                    <th>@Resources.PacientesResources.Indice_cintura_cadera</th>
                                    <th>@Resources.PacientesResources.Interpretacion_indice</th>
                                    <th>@Resources.PacientesResources.Consumo_de_agua_resultado</th>
                                    <th>@Resources.PacientesResources.Interpretacion_agua</th>
                                    <th>@Resources.PacientesResources.Frecuencia_cardiaca_en_Esfuerzo</th>
                                    <th>@Resources.PacientesResources.Interpretacion_frecuencia</th>
                                    <th>@Resources.PacientesResources.Dificultad_de_Rutina_de_Ejercicios</th>
                                    <th>@Resources.PacientesResources.Interpretacion_dificultad</th>
                                    <th>@Resources.PacientesResources.Calorias</th>
                                    <th>@Resources.PacientesResources.Interpretacion_calorias</th>
                                    <th>@Resources.PacientesResources.Observaciones</th>

                                </tr>
                            </thead>
                            <tfoot style="display:table-header-group;">
                                <tr>
                                    <td></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="date"></td>
                                    <td class="filterColumn" s-spartan="time"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="checkbox"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="date"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="checkbox"></td>
                                    <td class="filterColumn" s-spartan="checkbox"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="date"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="number"></td>
                                    <td class="filterColumn" s-spartan="text"></td>
                                    <td class="filterColumn" s-spartan="text"></td>

                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@Styles.Render("~/Content/plugins/dataTables/dataTablesStyles")
@Styles.Render("~/plugins/dataPickerStyles")
@Styles.Render("~/plugins/clockpickerStyles")
@Styles.Render("~/plugins/awesomeCheckboxStyles")

@Scripts.Render("~/plugins/dataTables")
@Scripts.Render("~/plugins/dataPicker")
@Scripts.Render("~/plugins/clockpicker")
@*@Scripts.Render("~/plugins/slimScroll")*@

<script type="text/javascript" src="~/Scripts/Custom/tablePlugin.js"></script>
<script type="text/javascript" src="~/Uploads/Scripts/Rules/PacientesIndexRules.js?v=@DateTime.Now.ToString("ddMMyyyyhhmmss")"></script>
<style>
    .dataTables_filter {
        display: none;
    }

    div.dataTables_info {
        display: inline-block;
        float: left;
    }
</style>

<script type="text/javascript">
	var MRWhere = '';
    var MROrder = '';
    var table;
    var currentFilter;
     var permission = {
        Consult: '@permission.Consult.ToString()' == 'True',
        New: '@permission.New.ToString()' == 'True',
        Edit: '@permission.Edit.ToString()' == 'True',
        Delete: '@permission.Delete.ToString()' == 'True',
        Export: '@permission.Export.ToString()' == 'True',
        Print: '@permission.Print.ToString()' == 'True',
        Configure: '@permission.Configure.ToString()' == 'True',
    };

    $(document).ready(function () {	
	$('.loading').show();
        $("#frmAdvanceSearch").submit(function (e) {
            e.preventDefault();
            InitiateAdvanceSearch();
        });
        $('a').tooltip();
    });

    var advanceSearchQuery = "@(advanceSearch)", isPacientesTextSearch = true;

    function ClearFilter() {

        $('.filterData').each(function( index, element ){
            if ($(this).attr('type') != 'checkbox') {
                $(this).val('');
            }
            else {
                $(this).attr('checked', false);
            }
        });
        advanceSearchQuery = "False";
        ClearFilterConfig();
        table.search('').columns().search('').draw();
    }

    function ClearFilterConfig() {
        $.ajax({
            url: '@Url.Content("~/Frontal/Pacientes/ClearAdvanceFilter")',
            type: 'POST',
            dataType: "json",
            success: function (result) {
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
                return null;
            }
        });
    }

    //Used to initiate advance function
    function InitiateAdvanceSearch() {
        var advanceSearch = {}, hasParameter = false;

        advanceSearchQuery = hasParameter ? JSON.stringify(advanceSearch) : "";
        $('#tblPacientes').DataTable().draw();
        return false;
    }

    function GetAdvanceSearchQuery() {
        return advanceSearchQuery;
    }

    function VisibilityAdvanceSearch() {
        $('#btnAdvanceSearch').click();
        return false;
    }

    function Export(format) {
	 var counter = 1;
        currentFilter = table.page.info();
		 var where= MRWhere;
		var order = MROrder;

        var queryString = GetQueryString();

        var Folio =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Fecha_de_Registro = $($('table td .filterData.form-control:input')[counter++]).val();
        var Hora_de_Registro = $($('table td .filterData.form-control:input')[counter++]).val();
        var Usuario_que_Registra =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Es_nuevo_registro = $($('table td .filterData.form-control:input')[counter++]).val();
        var Tipo_de_Registro =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Tipo_de_Paciente =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Usuario_Registrado =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Empresa =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Numero_de_Empleado =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Nombres =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Apellido_Paterno =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Apellido_Materno =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Nombre_Completo =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Celular =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Email =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Fecha_de_nacimiento = $($('table td .filterData.form-control:input')[counter++]).val();
        var Nombre_del_Padre_o_Tutor =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Pais_de_nacimiento =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Lugar_de_nacimiento =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Sexo =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Estado_Civil =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Calle =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Numero_exterior =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Numero_interior =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Colonia =  $($('table td .filterData.form-control:input')[counter++]).val();
        var CP =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Ciudad =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Pais =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Estado =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Ocupacion =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Cantidad_hijos =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Objetivo =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Estatus_Paciente =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Plan_Alimenticio_Completo = $($('table td .filterData.form-control:input')[counter++]).val();
        var Plan_Rutina_Completa = $($('table td .filterData.form-control:input')[counter++]).val();
        var Cuenta_con_padecimientos =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Frecuencia_Cardiaca =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Frecuencia_Respiratoria =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Presion_sistolica =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Presion_diastolica =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Peso_actual =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Estatura =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Peso_habitual =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Circunferencia_de_cintura_cm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Circunferencia_de_cadera_cm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Anchura_de_muneca_mm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Circunferencia_de_brazo_cm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Pliegue_cutaneo_tricipital_mm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Pliegue_cutaneo_bicipital_mm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Pliegue_cutaneo_subescapular_mm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Pliegue_cutaneo_supraespinal_mm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Edad_Metabolica =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Agua_corporal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Grasa_Visceral =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Grasa_Corporal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Grasa_Corporal_kg =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Masa_Muscular_kg =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Masa_Muscular_ =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Esta_embarazada =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Tu_embarazo_es_multiple =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Semana_de_gestacion =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Peso_pregestacional =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Toma_anticonceptivos =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Nombre_del_Anticonceptivo =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Dosis =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Climaterio =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Fecha_Climaterio = $($('table td .filterData.form-control:input')[counter++]).val();
        var Terapia_reemplazo_hormonal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Tipo_Dieta =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Suplementos =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Consumo_de_sal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Grasas_Preferencias =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Comidas_cantidad =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Preparacion_Preferencias =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Entre_comidas =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Apetito =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Habitos_Modificacion =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Horario_hambre =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Cuando_cambia_mi_estado_de_animo =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Medicamentos_bajar_peso =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Cual_medicamento =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Frecuencia_Ejercicio =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Duracion_Ejercicio =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Tipo_Ejercicio =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Antiguedad_Ejercicio =  $($('table td .filterData.form-control:input')[counter++]).val();
        var IMC =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_IMC =  $($('table td .filterData.form-control:input')[counter++]).val();
        var IMC_Pediatria =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Complexion_corporal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_complexion_corporal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Distribucion_de_grasa_corporal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_grasa_corporal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Indice_cintura_cadera =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_indice =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Consumo_de_agua_resultado =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_agua =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Frecuencia_cardiaca_en_Esfuerzo =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_frecuencia =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Dificultad_de_Rutina_de_Ejercicios =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_dificultad =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Calorias =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_calorias =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Observaciones =  $($('table td .filterData.form-control:input')[counter++]).val();


        var queryString = "&Folio=" + Folio 
        + "&Fecha_de_Registro=" + Fecha_de_Registro
        + "&Hora_de_Registro=" + Hora_de_Registro
        + "&Usuario_que_Registra=" + Usuario_que_Registra
        + "&Es_nuevo_registro=" + Es_nuevo_registro
        + "&Tipo_de_Registro=" + Tipo_de_Registro
        + "&Tipo_de_Paciente=" + Tipo_de_Paciente
        + "&Usuario_Registrado=" + Usuario_Registrado
        + "&Empresa=" + Empresa
        + "&Numero_de_Empleado=" + Numero_de_Empleado
        + "&Nombres=" + Nombres
        + "&Apellido_Paterno=" + Apellido_Paterno
        + "&Apellido_Materno=" + Apellido_Materno
        + "&Nombre_Completo=" + Nombre_Completo
        + "&Celular=" + Celular
        + "&Email=" + Email
        + "&Fecha_de_nacimiento=" + Fecha_de_nacimiento
        + "&Nombre_del_Padre_o_Tutor=" + Nombre_del_Padre_o_Tutor
        + "&Pais_de_nacimiento=" + Pais_de_nacimiento
        + "&Lugar_de_nacimiento=" + Lugar_de_nacimiento
        + "&Sexo=" + Sexo
        + "&Estado_Civil=" + Estado_Civil
        + "&Calle=" + Calle
        + "&Numero_exterior=" + Numero_exterior
        + "&Numero_interior=" + Numero_interior
        + "&Colonia=" + Colonia
        + "&CP=" + CP
        + "&Ciudad=" + Ciudad
        + "&Pais=" + Pais
        + "&Estado=" + Estado
        + "&Ocupacion=" + Ocupacion
        + "&Cantidad_hijos=" + Cantidad_hijos
        + "&Objetivo=" + Objetivo
        + "&Estatus_Paciente=" + Estatus_Paciente
        + "&Plan_Alimenticio_Completo=" + Plan_Alimenticio_Completo
        + "&Plan_Rutina_Completa=" + Plan_Rutina_Completa
        + "&Cuenta_con_padecimientos=" + Cuenta_con_padecimientos
        + "&Frecuencia_Cardiaca=" + Frecuencia_Cardiaca
        + "&Frecuencia_Respiratoria=" + Frecuencia_Respiratoria
        + "&Presion_sistolica=" + Presion_sistolica
        + "&Presion_diastolica=" + Presion_diastolica
        + "&Peso_actual=" + Peso_actual
        + "&Estatura=" + Estatura
        + "&Peso_habitual=" + Peso_habitual
        + "&Circunferencia_de_cintura_cm=" + Circunferencia_de_cintura_cm
        + "&Circunferencia_de_cadera_cm=" + Circunferencia_de_cadera_cm
        + "&Anchura_de_muneca_mm=" + Anchura_de_muneca_mm
        + "&Circunferencia_de_brazo_cm=" + Circunferencia_de_brazo_cm
        + "&Pliegue_cutaneo_tricipital_mm=" + Pliegue_cutaneo_tricipital_mm
        + "&Pliegue_cutaneo_bicipital_mm=" + Pliegue_cutaneo_bicipital_mm
        + "&Pliegue_cutaneo_subescapular_mm=" + Pliegue_cutaneo_subescapular_mm
        + "&Pliegue_cutaneo_supraespinal_mm=" + Pliegue_cutaneo_supraespinal_mm
        + "&Edad_Metabolica=" + Edad_Metabolica
        + "&Agua_corporal=" + Agua_corporal
        + "&Grasa_Visceral=" + Grasa_Visceral
        + "&Grasa_Corporal=" + Grasa_Corporal
        + "&Grasa_Corporal_kg=" + Grasa_Corporal_kg
        + "&Masa_Muscular_kg=" + Masa_Muscular_kg
        + "&Masa_Muscular_=" + Masa_Muscular_
        + "&Esta_embarazada=" + Esta_embarazada
        + "&Tu_embarazo_es_multiple=" + Tu_embarazo_es_multiple
        + "&Semana_de_gestacion=" + Semana_de_gestacion
        + "&Peso_pregestacional=" + Peso_pregestacional
        + "&Toma_anticonceptivos=" + Toma_anticonceptivos
        + "&Nombre_del_Anticonceptivo=" + Nombre_del_Anticonceptivo
        + "&Dosis=" + Dosis
        + "&Climaterio=" + Climaterio
        + "&Fecha_Climaterio=" + Fecha_Climaterio
        + "&Terapia_reemplazo_hormonal=" + Terapia_reemplazo_hormonal
        + "&Tipo_Dieta=" + Tipo_Dieta
        + "&Suplementos=" + Suplementos
        + "&Consumo_de_sal=" + Consumo_de_sal
        + "&Grasas_Preferencias=" + Grasas_Preferencias
        + "&Comidas_cantidad=" + Comidas_cantidad
        + "&Preparacion_Preferencias=" + Preparacion_Preferencias
        + "&Entre_comidas=" + Entre_comidas
        + "&Apetito=" + Apetito
        + "&Habitos_Modificacion=" + Habitos_Modificacion
        + "&Horario_hambre=" + Horario_hambre
        + "&Cuando_cambia_mi_estado_de_animo=" + Cuando_cambia_mi_estado_de_animo
        + "&Medicamentos_bajar_peso=" + Medicamentos_bajar_peso
        + "&Cual_medicamento=" + Cual_medicamento
        + "&Frecuencia_Ejercicio=" + Frecuencia_Ejercicio
        + "&Duracion_Ejercicio=" + Duracion_Ejercicio
        + "&Tipo_Ejercicio=" + Tipo_Ejercicio
        + "&Antiguedad_Ejercicio=" + Antiguedad_Ejercicio
        + "&IMC=" + IMC
        + "&Interpretacion_IMC=" + Interpretacion_IMC
        + "&IMC_Pediatria=" + IMC_Pediatria
        + "&Complexion_corporal=" + Complexion_corporal
        + "&Interpretacion_complexion_corporal=" + Interpretacion_complexion_corporal
        + "&Distribucion_de_grasa_corporal=" + Distribucion_de_grasa_corporal
        + "&Interpretacion_grasa_corporal=" + Interpretacion_grasa_corporal
        + "&Indice_cintura_cadera=" + Indice_cintura_cadera
        + "&Interpretacion_indice=" + Interpretacion_indice
        + "&Consumo_de_agua_resultado=" + Consumo_de_agua_resultado
        + "&Interpretacion_agua=" + Interpretacion_agua
        + "&Frecuencia_cardiaca_en_Esfuerzo=" + Frecuencia_cardiaca_en_Esfuerzo
        + "&Interpretacion_frecuencia=" + Interpretacion_frecuencia
        + "&Dificultad_de_Rutina_de_Ejercicios=" + Dificultad_de_Rutina_de_Ejercicios
        + "&Interpretacion_dificultad=" + Interpretacion_dificultad
        + "&Calorias=" + Calorias
        + "&Interpretacion_calorias=" + Interpretacion_calorias
        + "&Observaciones=" + Observaciones
 + "&iSortCol=" + table.settings()[0].aoColumns[table.settings()[0].aLastSort[0].col].data + "&sSortDir=" + table.settings()[0].aLastSort[0].dir;

        var url = "@Url.Content("~/Frontal/Pacientes/Export?format=")" + format
            + "&pageIndex=" + ($('#exportModal :radio:checked').val() == "0" ? 1 : currentFilter.page + 1)
            + "&pageSize=" + ($('#exportModal :radio:checked').val() == "0" ? 0 : currentFilter.length)
		    + "&where=" + where + "&order=" + order + 
			+ "&columnsVisible=" + table.columns().visible().join(",") + queryString;
        window.open(url, '_blank');
    };

    function GetQueryString() {
	
	 var counter = 0;
        var Folio =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Fecha_de_Registro = $($('table td .filterData.form-control:input')[counter++]).val();
        var Hora_de_Registro = $($('table td .filterData.form-control:input')[counter++]).val();
        var Usuario_que_Registra =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Es_nuevo_registro = $($('table td .filterData.form-control:input')[counter++]).val();
        var Tipo_de_Registro =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Tipo_de_Paciente =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Usuario_Registrado =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Empresa =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Numero_de_Empleado =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Nombres =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Apellido_Paterno =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Apellido_Materno =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Nombre_Completo =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Celular =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Email =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Fecha_de_nacimiento = $($('table td .filterData.form-control:input')[counter++]).val();
        var Nombre_del_Padre_o_Tutor =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Pais_de_nacimiento =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Lugar_de_nacimiento =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Sexo =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Estado_Civil =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Calle =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Numero_exterior =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Numero_interior =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Colonia =  $($('table td .filterData.form-control:input')[counter++]).val();
        var CP =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Ciudad =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Pais =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Estado =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Ocupacion =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Cantidad_hijos =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Objetivo =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Estatus_Paciente =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Plan_Alimenticio_Completo = $($('table td .filterData.form-control:input')[counter++]).val();
        var Plan_Rutina_Completa = $($('table td .filterData.form-control:input')[counter++]).val();
        var Cuenta_con_padecimientos =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Frecuencia_Cardiaca =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Frecuencia_Respiratoria =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Presion_sistolica =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Presion_diastolica =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Peso_actual =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Estatura =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Peso_habitual =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Circunferencia_de_cintura_cm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Circunferencia_de_cadera_cm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Anchura_de_muneca_mm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Circunferencia_de_brazo_cm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Pliegue_cutaneo_tricipital_mm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Pliegue_cutaneo_bicipital_mm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Pliegue_cutaneo_subescapular_mm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Pliegue_cutaneo_supraespinal_mm =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Edad_Metabolica =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Agua_corporal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Grasa_Visceral =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Grasa_Corporal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Grasa_Corporal_kg =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Masa_Muscular_kg =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Masa_Muscular_ =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Esta_embarazada =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Tu_embarazo_es_multiple =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Semana_de_gestacion =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Peso_pregestacional =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Toma_anticonceptivos =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Nombre_del_Anticonceptivo =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Dosis =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Climaterio =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Fecha_Climaterio = $($('table td .filterData.form-control:input')[counter++]).val();
        var Terapia_reemplazo_hormonal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Tipo_Dieta =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Suplementos =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Consumo_de_sal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Grasas_Preferencias =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Comidas_cantidad =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Preparacion_Preferencias =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Entre_comidas =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Apetito =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Habitos_Modificacion =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Horario_hambre =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Cuando_cambia_mi_estado_de_animo =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Medicamentos_bajar_peso =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Cual_medicamento =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Frecuencia_Ejercicio =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Duracion_Ejercicio =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Tipo_Ejercicio =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Antiguedad_Ejercicio =  $($('table td .filterData.form-control:input')[counter++]).val();
        var IMC =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_IMC =  $($('table td .filterData.form-control:input')[counter++]).val();
        var IMC_Pediatria =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Complexion_corporal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_complexion_corporal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Distribucion_de_grasa_corporal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_grasa_corporal =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Indice_cintura_cadera =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_indice =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Consumo_de_agua_resultado =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_agua =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Frecuencia_cardiaca_en_Esfuerzo =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_frecuencia =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Dificultad_de_Rutina_de_Ejercicios =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_dificultad =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Calorias =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Interpretacion_calorias =  $($('table td .filterData.form-control:input')[counter++]).val();
        var Observaciones =  $($('table td .filterData.form-control:input')[counter++]).val();


        return "&Folio=" + Folio 
        + "&Fecha_de_Registro=" + Fecha_de_Registro
        + "&Hora_de_Registro=" + Hora_de_Registro
        + "&Usuario_que_Registra=" + Usuario_que_Registra
        + "&Es_nuevo_registro=" + Es_nuevo_registro
        + "&Tipo_de_Registro=" + Tipo_de_Registro
        + "&Tipo_de_Paciente=" + Tipo_de_Paciente
        + "&Usuario_Registrado=" + Usuario_Registrado
        + "&Empresa=" + Empresa
        + "&Numero_de_Empleado=" + Numero_de_Empleado
        + "&Nombres=" + Nombres
        + "&Apellido_Paterno=" + Apellido_Paterno
        + "&Apellido_Materno=" + Apellido_Materno
        + "&Nombre_Completo=" + Nombre_Completo
        + "&Celular=" + Celular
        + "&Email=" + Email
        + "&Fecha_de_nacimiento=" + Fecha_de_nacimiento
        + "&Nombre_del_Padre_o_Tutor=" + Nombre_del_Padre_o_Tutor
        + "&Pais_de_nacimiento=" + Pais_de_nacimiento
        + "&Lugar_de_nacimiento=" + Lugar_de_nacimiento
        + "&Sexo=" + Sexo
        + "&Estado_Civil=" + Estado_Civil
        + "&Calle=" + Calle
        + "&Numero_exterior=" + Numero_exterior
        + "&Numero_interior=" + Numero_interior
        + "&Colonia=" + Colonia
        + "&CP=" + CP
        + "&Ciudad=" + Ciudad
        + "&Pais=" + Pais
        + "&Estado=" + Estado
        + "&Ocupacion=" + Ocupacion
        + "&Cantidad_hijos=" + Cantidad_hijos
        + "&Objetivo=" + Objetivo
        + "&Estatus_Paciente=" + Estatus_Paciente
        + "&Plan_Alimenticio_Completo=" + Plan_Alimenticio_Completo
        + "&Plan_Rutina_Completa=" + Plan_Rutina_Completa
        + "&Cuenta_con_padecimientos=" + Cuenta_con_padecimientos
        + "&Frecuencia_Cardiaca=" + Frecuencia_Cardiaca
        + "&Frecuencia_Respiratoria=" + Frecuencia_Respiratoria
        + "&Presion_sistolica=" + Presion_sistolica
        + "&Presion_diastolica=" + Presion_diastolica
        + "&Peso_actual=" + Peso_actual
        + "&Estatura=" + Estatura
        + "&Peso_habitual=" + Peso_habitual
        + "&Circunferencia_de_cintura_cm=" + Circunferencia_de_cintura_cm
        + "&Circunferencia_de_cadera_cm=" + Circunferencia_de_cadera_cm
        + "&Anchura_de_muneca_mm=" + Anchura_de_muneca_mm
        + "&Circunferencia_de_brazo_cm=" + Circunferencia_de_brazo_cm
        + "&Pliegue_cutaneo_tricipital_mm=" + Pliegue_cutaneo_tricipital_mm
        + "&Pliegue_cutaneo_bicipital_mm=" + Pliegue_cutaneo_bicipital_mm
        + "&Pliegue_cutaneo_subescapular_mm=" + Pliegue_cutaneo_subescapular_mm
        + "&Pliegue_cutaneo_supraespinal_mm=" + Pliegue_cutaneo_supraespinal_mm
        + "&Edad_Metabolica=" + Edad_Metabolica
        + "&Agua_corporal=" + Agua_corporal
        + "&Grasa_Visceral=" + Grasa_Visceral
        + "&Grasa_Corporal=" + Grasa_Corporal
        + "&Grasa_Corporal_kg=" + Grasa_Corporal_kg
        + "&Masa_Muscular_kg=" + Masa_Muscular_kg
        + "&Masa_Muscular_=" + Masa_Muscular_
        + "&Esta_embarazada=" + Esta_embarazada
        + "&Tu_embarazo_es_multiple=" + Tu_embarazo_es_multiple
        + "&Semana_de_gestacion=" + Semana_de_gestacion
        + "&Peso_pregestacional=" + Peso_pregestacional
        + "&Toma_anticonceptivos=" + Toma_anticonceptivos
        + "&Nombre_del_Anticonceptivo=" + Nombre_del_Anticonceptivo
        + "&Dosis=" + Dosis
        + "&Climaterio=" + Climaterio
        + "&Fecha_Climaterio=" + Fecha_Climaterio
        + "&Terapia_reemplazo_hormonal=" + Terapia_reemplazo_hormonal
        + "&Tipo_Dieta=" + Tipo_Dieta
        + "&Suplementos=" + Suplementos
        + "&Consumo_de_sal=" + Consumo_de_sal
        + "&Grasas_Preferencias=" + Grasas_Preferencias
        + "&Comidas_cantidad=" + Comidas_cantidad
        + "&Preparacion_Preferencias=" + Preparacion_Preferencias
        + "&Entre_comidas=" + Entre_comidas
        + "&Apetito=" + Apetito
        + "&Habitos_Modificacion=" + Habitos_Modificacion
        + "&Horario_hambre=" + Horario_hambre
        + "&Cuando_cambia_mi_estado_de_animo=" + Cuando_cambia_mi_estado_de_animo
        + "&Medicamentos_bajar_peso=" + Medicamentos_bajar_peso
        + "&Cual_medicamento=" + Cual_medicamento
        + "&Frecuencia_Ejercicio=" + Frecuencia_Ejercicio
        + "&Duracion_Ejercicio=" + Duracion_Ejercicio
        + "&Tipo_Ejercicio=" + Tipo_Ejercicio
        + "&Antiguedad_Ejercicio=" + Antiguedad_Ejercicio
        + "&IMC=" + IMC
        + "&Interpretacion_IMC=" + Interpretacion_IMC
        + "&IMC_Pediatria=" + IMC_Pediatria
        + "&Complexion_corporal=" + Complexion_corporal
        + "&Interpretacion_complexion_corporal=" + Interpretacion_complexion_corporal
        + "&Distribucion_de_grasa_corporal=" + Distribucion_de_grasa_corporal
        + "&Interpretacion_grasa_corporal=" + Interpretacion_grasa_corporal
        + "&Indice_cintura_cadera=" + Indice_cintura_cadera
        + "&Interpretacion_indice=" + Interpretacion_indice
        + "&Consumo_de_agua_resultado=" + Consumo_de_agua_resultado
        + "&Interpretacion_agua=" + Interpretacion_agua
        + "&Frecuencia_cardiaca_en_Esfuerzo=" + Frecuencia_cardiaca_en_Esfuerzo
        + "&Interpretacion_frecuencia=" + Interpretacion_frecuencia
        + "&Dificultad_de_Rutina_de_Ejercicios=" + Dificultad_de_Rutina_de_Ejercicios
        + "&Interpretacion_dificultad=" + Interpretacion_dificultad
        + "&Calorias=" + Calorias
        + "&Interpretacion_calorias=" + Interpretacion_calorias
        + "&Observaciones=" + Observaciones
;

    }
	
	
	$(document).on("click", ".editor_print", function () {
		var idRecord = $(this).data('idrecord');
        GetFormats(idRecord);
        $("#printFormatModal").data('idrecord', idRecord);
    });
	
	function GetFormats(idRecord) {

        $('#spartan_formats').empty();
        $.ajax({
            url: '@Url.Content("~/Frontal/Pacientes/GetFormats?RecordId=")' + idRecord,
            type: 'Get',
            async: true,
            contentType: "multipart/form-data",
            success: function (result) {
                if (result < 0) {

                } else {
                    $.each(result, function (index, element) {
                        var div = "<div id=''>" +
                             "<label>" +
                                "<input type='checkbox' name='optradioFormat' value='" + element.Value + "' />" + element.Text +
                                    "</label>" +
                                "</div>";

                        $('#spartan_formats').append(div);
                    });
                    $("#printFormatModal").modal('show');
                }
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            },
            cache: false,
            contentType: false,
            processData: false
        });
    }
	 function ExportToPdfFormats()
    {
        var RecordId = $("#printFormatModal").data('idrecord');
        var FormatId = $("input:radio[name='optradioFormat']:checked").val();
        var i = 1;
        $("input:checkbox[name='optradioFormat']:checked").each(function (index, item) {
            if ($(item).is(':checked')) {
                debugger
                var FormatId = $(item).val();
                var url = "@Url.Content("~/Frontal/Pacientes/PrintFormats?idFormat=")" + FormatId + "&RecordId=" + RecordId;
                var printWindow = window.open(url,'Imprimir Formato ' + i.toString() + '_blank');
                i++;

            }
        });
    }
	
    function PrintDocument(format) {

        var counter = 1;
        currentFilter = table.page.info();
		
		   var where = MRWhere;
        var order = MROrder;

		var queryString = GetQueryString();
		
		var url = "@Url.Content("~/Frontal/Pacientes/Print")?format=3"
				+ "&pageIndex=" + ($('#exportModal :radio:checked').val() == "0" ? 1 : currentFilter.page + 1)
				+ "&pageSize=" + ($('#exportModal :radio:checked').val() == "0" ? 0 : currentFilter.length)
				+ "&where=" + where + "&order=" + order + queryString;

        $.ajax({

            url: url,
            async:false,
            success: function (data) {
                var printWindow = window.open();
                var title = '@Resources.Resources.PrintText';
                printWindow.document.write('<title>' + title + '</title>');
                printWindow.document.write(data);
				printWindow.document.getElementById("columnsVisible").text = table.columns().visible().join(",");
                printWindow.print();
                //printWindow.close();

            },
            error: function () {
                alert("Error");
            }
        });

    }

    function SetTitle(printWindow) {
        if (printWindow.document) {
            printWindow.document.title = "Pacientes Print";
        } else {
            setTimeout(SetTitle, 10);
        }
    }

    Serialize = function (obj) {
        var str = [];
        for (var p in obj)
            if (obj.hasOwnProperty(p)) {
                str.push(encodeURIComponent(p) + "=" + encodeURIComponent(obj[p]));
            }
        return str.join("&");
    }
    function GetContentType() {
        switch ($('#myModal #sel1').val()) {
            case "1":
                return "application/pdf; charset=utf-8";
            case "2":
                return "application/vnd.ms-excel; charset=utf-8";
        }
        return null;
    }

    var isInitialized = false;
    var filterState = JSON.parse(localStorage.getItem("GRID_STATE_MANAGEMENT"));

    $(function () {
        //Popup
        $("#btnExportPopUpOpen").click(function () {
            $('#myModal').modal('show');
        });

        $(document).on("click", ".buttons-pdf", function (e, data) {

            $("#btnPrint").hide();
            $("#btnExcel").hide();
            $("#btnPdf").show();
            $("#btnCSV").hide();
            $('#exportModal').modal('show');

        });

        $(document).on("click", ".buttons-print", function (e, data) {

            $("#btnPdf").hide();
            $("#btnExcel").hide();
            $("#btnPrint").show();
            $("#btnCSV").hide();
            $('#exportModal').modal('show');
        });

        $(document).on("click", ".buttons-excel", function (e, data) {

            $("#btnPdf").hide();
            $("#btnExcel").show();
            $("#btnPrint").hide();
            $("#btnCSV").hide();
            $(this).bind();
            $('#exportModal').modal('show');
        });

        $(document).on("click", ".buttons-csv", function (e, data) {


            $("#btnPdf").hide();
            $("#btnExcel").hide();
            $("#btnPrint").hide();
            $("#btnCSV").show();
            $('#exportModal').modal('show');

        });

		setFilterNew('tblPacientes');
		
		var oDatatableStateData;
        // initialize datatable variable
        table = $('#tblPacientes').DataTable({
            dom: '<"html5buttons"B>lTfgt<"bottom"ip>',
            //"dom": '<"top"f>rt<"bottom"ilp><"clear">'
            buttons: [
                { extend: 'copy', text: '@Resources.Resources.Copy', exportOptions: { columns: [1 ,':visible'] }, className: !permission.Export ? 'hide' : '', },
                { extend: 'csv', text: '@Resources.Resources.CSV', exportOptions: { columns: [1 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ] }, className: !permission.Export ? 'hide' : '', },
                { extend: 'excel', title: '@Resources.Resources.Excel', text: '@Resources.Resources.Excel', exportOptions: { columns: [1 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ] }, className: !permission.Export ? 'hide' : '', },
                { extend: 'pdf', title: '@Resources.Resources.PDF', text: '@Resources.Resources.PDF', exportOptions: { columns: [1 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ] }, className: !permission.Export ? 'hide' : '', },
                {
                    extend: 'print', title: '@Resources.Resources.PrintText', text: '@Resources.Resources.Print', exportOptions: { columns: [1 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ,2 ] }, className: !permission.Print ? 'hide' : '',
                    customize: function (win) {
                        $(win.document.body).addClass('white-bg');

                        if (!permission.Print) {
                            $(win.document.body).addClass('disabled');
                            $(win.document.body).attr('disabled', 'true');
                        }
                        $(win.document.body).css('font-size', '10px');

                        $(win.document.body).find('table')
                            .addClass('compact')
                            .css('font-size', 'inherit');
                    }
                }
            ],
            "processing": true,
            "serverSide": true,
            "info": true,
            "lengthMenu": [[10, 20, 50, -1], [10, 20, 50, "@Resources.Resources.All"]],            
			 "ajax": function (data, callback, settings, aoData) {
                $.ajax({
                    url: "@Url.Content("~/Frontal/Pacientes/GetPacientesList")", 
                    method: 'Post',
                    data: { "sEcho": data.draw, "iDisplayStart": data.start, "iDisplayLength": data.length, "sortDirection": data.order[0].dir, "sortColumn": data.order[0].column, "columns": data.columns, "where": MRWhere, "order": MROrder, "filters": GetQueryString(), "AdvanceSearch": GetAdvanceSearchQuery() }
                }).done(callback);
            },
            "fnServerParams": function ( aoData ) {
                //aoData.push({ "name": "AdvanceSearch", "value": GetAdvanceSearchQuery() });
            },
            "bStateSave": true,
            "fnStateSave": function (oSettings, oData) {
                localStorage.setItem(JSON.stringify(oData), 'PacientesDatatable_');
            },
            "fnStateLoad": function (oSettings) {
                var data = localStorage.getItem('PacientesDatatable_');
                return JSON.parse(data);
            },
            "fnStateLoaded": function (oSettings, oData) {
                oDatatableStateData = oData;              
                setFilterState('tblPacientes', oDatatableStateData); 
            },
            "aoColumns": [
                {
                    "data": null,
                    "className": "center actionColumn text-nowrap",
					"orderable": false, 					
					"render": function (data, type, full, meta) {
                        var edit = '<a title="@Resources.Resources.Edit" href="@Url.Action("Create", "Pacientes")?Id=' + data.Folio + '" class="editor_edit edit-MR"><i class="fa fa-edit"></i></a>';
                        if (!permission.Edit)
                            edit = '';
                        var consult = '<a title="@Resources.Resources.Consult" href="@Url.Action("Create", "Pacientes")?Id=' + data.Folio + '&consult=1"  class="editor_remove"><i class="fa fa-male"></i></a>';
                        if (!permission.Consult)
                            consult = '';
                        var print = '<a title="@Resources.Resources.Print" data-toggle="modal" data-target="#printFormatModal" data-idrecord="' + data.Folio + '"  class="editor_print print-MR"><i class="fa fa-print"></i></a>';
                        if (!permission.Print)
                            print = '';
                        var del = '<a title="@Resources.Resources.Delete" onclick="DeletePacientes(\'' + data.Folio + '\')" class="editor_remove eliminar-MR"><i class="fa fa-times"></i></a>';
                        if (!permission.Delete)
                            del = '';
                        return edit + del + consult + print;
                    }
                }, 
                { "data": "Folio", "orderable": true, "name": "Folio" }
                ,{ "data": "Fecha_de_Registro", "orderable": true, "searchable": true, "type": "date", "name": "Fecha_de_Registro" }
                ,{ "data": "Hora_de_Registro", "orderable": true, "name": "Hora_de_Registro" }
                ,{ "data": "Usuario_que_RegistraName", "orderable": true, "name": "Usuario_que_RegistraName" }
                ,{ "data": "Es_nuevo_registro", "orderable": true, "name": "Es_nuevo_registro","render": function (data) { return data == true ? "@Resources.Resources.Yes" : "@Resources.Resources.No"; }}
                ,{ "data": "Tipo_de_RegistroDescripcion", "orderable": true, "name": "Tipo_de_RegistroDescripcion" }
                ,{ "data": "Tipo_de_PacienteDescripcion", "orderable": true, "name": "Tipo_de_PacienteDescripcion" }
                ,{ "data": "Usuario_RegistradoName", "orderable": true, "name": "Usuario_RegistradoName" }
                ,{ "data": "EmpresaNombre_de_la_Empresa", "orderable": true, "name": "EmpresaNombre_de_la_Empresa" }
                ,{ "data": "Numero_de_Empleado", "orderable": true, "name": "Numero_de_Empleado", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Nombres", "orderable": true, "name": "Nombres", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Apellido_Paterno", "orderable": true, "name": "Apellido_Paterno", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Apellido_Materno", "orderable": true, "name": "Apellido_Materno", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Nombre_Completo", "orderable": true, "name": "Nombre_Completo", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Celular", "orderable": true, "name": "Celular", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Email", "orderable": true, "name": "Email", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Fecha_de_nacimiento", "orderable": true, "searchable": true, "type": "date", "name": "Fecha_de_nacimiento" }
                ,{ "data": "Nombre_del_Padre_o_Tutor", "orderable": true, "name": "Nombre_del_Padre_o_Tutor", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Pais_de_nacimientoNombre_del_Pais", "orderable": true, "name": "Pais_de_nacimientoNombre_del_Pais" }
                ,{ "data": "Lugar_de_nacimientoNombre_del_Estado", "orderable": true, "name": "Lugar_de_nacimientoNombre_del_Estado" }
                ,{ "data": "SexoDescripcion", "orderable": true, "name": "SexoDescripcion" }
                ,{ "data": "Estado_CivilDescripcion", "orderable": true, "name": "Estado_CivilDescripcion" }
                ,{ "data": "Calle", "orderable": true, "name": "Calle", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Numero_exterior", "orderable": true, "name": "Numero_exterior", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Numero_interior", "orderable": true, "name": "Numero_interior", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Colonia", "orderable": true, "name": "Colonia", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "CP","className": "dt-right", "orderable": true, "name": "CP" }
                ,{ "data": "Ciudad", "orderable": true, "name": "Ciudad", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "PaisNombre_del_Pais", "orderable": true, "name": "PaisNombre_del_Pais" }
                ,{ "data": "EstadoNombre_del_Estado", "orderable": true, "name": "EstadoNombre_del_Estado" }
                ,{ "data": "Ocupacion", "orderable": true, "name": "Ocupacion", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Cantidad_hijos","className": "dt-right", "orderable": true, "name": "Cantidad_hijos" }
                ,{ "data": "ObjetivoDescripcion", "orderable": true, "name": "ObjetivoDescripcion" }
                ,{ "data": "Estatus_PacienteDescripcion", "orderable": true, "name": "Estatus_PacienteDescripcion" }
                ,{ "data": "Plan_Alimenticio_Completo", "orderable": true, "name": "Plan_Alimenticio_Completo","render": function (data) { return data == true ? "@Resources.Resources.Yes" : "@Resources.Resources.No"; }}
                ,{ "data": "Plan_Rutina_Completa", "orderable": true, "name": "Plan_Rutina_Completa","render": function (data) { return data == true ? "@Resources.Resources.Yes" : "@Resources.Resources.No"; }}
                ,{ "data": "Cuenta_con_padecimientosDescripcion", "orderable": true, "name": "Cuenta_con_padecimientosDescripcion" }
                ,{ "data": "Frecuencia_Cardiaca","className": "dt-right", "orderable": true, "name": "Frecuencia_Cardiaca" }
                ,{ "data": "Frecuencia_Respiratoria","className": "dt-right", "orderable": true, "name": "Frecuencia_Respiratoria" }
                ,{ "data": "Presion_sistolica","className": "dt-right", "orderable": true, "name": "Presion_sistolica" }
                ,{ "data": "Presion_diastolica","className": "dt-right", "orderable": true, "name": "Presion_diastolica" }
                ,{ "data": "Peso_actual", "className": "dt-right", "orderable": true, "name": "Peso_actual" }
                ,{ "data": "Estatura", "className": "dt-right", "orderable": true, "name": "Estatura" }
                ,{ "data": "Peso_habitual", "className": "dt-right", "orderable": true, "name": "Peso_habitual" }
                ,{ "data": "Circunferencia_de_cintura_cm","className": "dt-right", "orderable": true, "name": "Circunferencia_de_cintura_cm" }
                ,{ "data": "Circunferencia_de_cadera_cm","className": "dt-right", "orderable": true, "name": "Circunferencia_de_cadera_cm" }
                ,{ "data": "Anchura_de_muneca_mm","className": "dt-right", "orderable": true, "name": "Anchura_de_muneca_mm" }
                ,{ "data": "Circunferencia_de_brazo_cm","className": "dt-right", "orderable": true, "name": "Circunferencia_de_brazo_cm" }
                ,{ "data": "Pliegue_cutaneo_tricipital_mm","className": "dt-right", "orderable": true, "name": "Pliegue_cutaneo_tricipital_mm" }
                ,{ "data": "Pliegue_cutaneo_bicipital_mm","className": "dt-right", "orderable": true, "name": "Pliegue_cutaneo_bicipital_mm" }
                ,{ "data": "Pliegue_cutaneo_subescapular_mm","className": "dt-right", "orderable": true, "name": "Pliegue_cutaneo_subescapular_mm" }
                ,{ "data": "Pliegue_cutaneo_supraespinal_mm","className": "dt-right", "orderable": true, "name": "Pliegue_cutaneo_supraespinal_mm" }
                ,{ "data": "Edad_Metabolica","className": "dt-right", "orderable": true, "name": "Edad_Metabolica" }
                ,{ "data": "Agua_corporal","className": "dt-right", "orderable": true, "name": "Agua_corporal" }
                ,{ "data": "Grasa_Visceral","className": "dt-right", "orderable": true, "name": "Grasa_Visceral" }
                ,{ "data": "Grasa_Corporal","className": "dt-right", "orderable": true, "name": "Grasa_Corporal" }
                ,{ "data": "Grasa_Corporal_kg","className": "dt-right", "orderable": true, "name": "Grasa_Corporal_kg" }
                ,{ "data": "Masa_Muscular_kg","className": "dt-right", "orderable": true, "name": "Masa_Muscular_kg" }
                ,{ "data": "Masa_Muscular_","className": "dt-right", "orderable": true, "name": "Masa_Muscular_" }
                ,{ "data": "Esta_embarazadaDescripcion", "orderable": true, "name": "Esta_embarazadaDescripcion" }
                ,{ "data": "Tu_embarazo_es_multipleDescripcion", "orderable": true, "name": "Tu_embarazo_es_multipleDescripcion" }
                ,{ "data": "Semana_de_gestacion","className": "dt-right", "orderable": true, "name": "Semana_de_gestacion" }
                ,{ "data": "Peso_pregestacional","className": "dt-right", "orderable": true, "name": "Peso_pregestacional" }
                ,{ "data": "Toma_anticonceptivosDescripcion", "orderable": true, "name": "Toma_anticonceptivosDescripcion" }
                ,{ "data": "Nombre_del_Anticonceptivo", "orderable": true, "name": "Nombre_del_Anticonceptivo", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Dosis", "orderable": true, "name": "Dosis", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "ClimaterioDescripcion", "orderable": true, "name": "ClimaterioDescripcion" }
                ,{ "data": "Fecha_Climaterio", "orderable": true, "searchable": true, "type": "date", "name": "Fecha_Climaterio" }
                ,{ "data": "Terapia_reemplazo_hormonalDescripcion", "orderable": true, "name": "Terapia_reemplazo_hormonalDescripcion" }
                ,{ "data": "Tipo_DietaDescripcion", "orderable": true, "name": "Tipo_DietaDescripcion" }
                ,{ "data": "SuplementosDescripcion", "orderable": true, "name": "SuplementosDescripcion" }
                ,{ "data": "Consumo_de_salDescripcion", "orderable": true, "name": "Consumo_de_salDescripcion" }
                ,{ "data": "Grasas_PreferenciasDescripcion", "orderable": true, "name": "Grasas_PreferenciasDescripcion" }
                ,{ "data": "Comidas_cantidadDescripcion", "orderable": true, "name": "Comidas_cantidadDescripcion" }
                ,{ "data": "Preparacion_PreferenciasDescripcion", "orderable": true, "name": "Preparacion_PreferenciasDescripcion" }
                ,{ "data": "Entre_comidasDescripcion", "orderable": true, "name": "Entre_comidasDescripcion" }
                ,{ "data": "ApetitoDescripcion", "orderable": true, "name": "ApetitoDescripcion" }
                ,{ "data": "Habitos_ModificacionDescripcion", "orderable": true, "name": "Habitos_ModificacionDescripcion" }
                ,{ "data": "Horario_hambreDescripcion", "orderable": true, "name": "Horario_hambreDescripcion" }
                ,{ "data": "Cuando_cambia_mi_estado_de_animoDescripcion", "orderable": true, "name": "Cuando_cambia_mi_estado_de_animoDescripcion" }
                ,{ "data": "Medicamentos_bajar_pesoDescripcion", "orderable": true, "name": "Medicamentos_bajar_pesoDescripcion" }
                ,{ "data": "Cual_medicamento", "orderable": true, "name": "Cual_medicamento", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Frecuencia_EjercicioDescripcion", "orderable": true, "name": "Frecuencia_EjercicioDescripcion" }
                ,{ "data": "Duracion_EjercicioDescripcion", "orderable": true, "name": "Duracion_EjercicioDescripcion" }
                ,{ "data": "Tipo_EjercicioDescripcion", "orderable": true, "name": "Tipo_EjercicioDescripcion" }
                ,{ "data": "Antiguedad_EjercicioDescripcion", "orderable": true, "name": "Antiguedad_EjercicioDescripcion" }
                ,{ "data": "IMC","className": "dt-right", "orderable": true, "name": "IMC" }
                ,{ "data": "Interpretacion_IMCDescripcion", "orderable": true, "name": "Interpretacion_IMCDescripcion" }
                ,{ "data": "IMC_PediatriaDescripcion", "orderable": true, "name": "IMC_PediatriaDescripcion" }
                ,{ "data": "Complexion_corporal", "orderable": true, "name": "Complexion_corporal", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Interpretacion_complexion_corporalDescripcion", "orderable": true, "name": "Interpretacion_complexion_corporalDescripcion" }
                ,{ "data": "Distribucion_de_grasa_corporal", "orderable": true, "name": "Distribucion_de_grasa_corporal", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Interpretacion_grasa_corporalDescripcion", "orderable": true, "name": "Interpretacion_grasa_corporalDescripcion" }
                ,{ "data": "Indice_cintura_cadera", "orderable": true, "name": "Indice_cintura_cadera", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Interpretacion_indiceDescripcion", "orderable": true, "name": "Interpretacion_indiceDescripcion" }
                ,{ "data": "Consumo_de_agua_resultado", "orderable": true, "name": "Consumo_de_agua_resultado", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }
                ,{ "data": "Interpretacion_aguaDescripcion", "orderable": true, "name": "Interpretacion_aguaDescripcion" }
                ,{ "data": "Frecuencia_cardiaca_en_Esfuerzo","className": "dt-right", "orderable": true, "name": "Frecuencia_cardiaca_en_Esfuerzo" }
                ,{ "data": "Interpretacion_frecuenciaDescripcion", "orderable": true, "name": "Interpretacion_frecuenciaDescripcion" }
                ,{ "data": "Dificultad_de_Rutina_de_EjerciciosDificultad", "orderable": true, "name": "Dificultad_de_Rutina_de_EjerciciosDificultad" }
                ,{ "data": "Interpretacion_dificultadDescripcion", "orderable": true, "name": "Interpretacion_dificultadDescripcion" }
                ,{ "data": "Calorias","className": "dt-right", "orderable": true, "name": "Calorias" }
                ,{ "data": "Interpretacion_caloriasDescripcion", "orderable": true, "name": "Interpretacion_caloriasDescripcion" }
                ,{ "data": "Observaciones", "orderable": true, "name": "Observaciones", "render": function (data) { return htmlDecode(data != null && data.length > 100 ? (data.substring(0,100) + '...') : data ); } }

            ],
			"colReorder": true,
            "order": [[1, "asc"]],
			"scrollX": true,
			"scrollY": '55vh',
			"scrollCollapse": true,
			"drawCallback": function( settings ) {
			    $('.dataTables_scrollBody').animate({
			        scrollTop: 0,
			        scrollLeft: 0,
			    }, '200');
			},
             "language": {
                "lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                "zeroRecords": " ",
                "info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                "infoEmpty": "@Resources.Resources.NoRecords",
                "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                "paginate": {
                    "previous": "@Resources.Resources.Previous",
                    "next": "@Resources.Resources.Next"
					},
                    "buttons": {
                        "copyTitle": "@Resources.Resources.CopyToClipboard",
                        "copySuccess": {
                            "_": "%d " + "@Resources.Resources.Copiedlines",
                            "1": "1 " +  "@Resources.Resources.Copiedline"
                        }
                    }
				}
    }).on('init.dt', function (e, data) {
        var classNamePDF = $(this).dataTableExt.buttons.pdfHtml5.className.split(" ");
        var classNameExcel = $(this).dataTableExt.buttons.excelHtml5.className.split(" ");
        var classNamePrint = $(this).dataTableExt.buttons.print.className.split(" ");
        var classNameCSV = $(this).dataTableExt.buttons.csvHtml5.className.split(" ");
        $('.' + classNamePDF[0]).unbind();
        $('.' + classNameExcel[0]).unbind();
        $('.' + classNamePrint[0]).unbind();
        $('.' + classNameCSV[0]).unbind();
        $('a').tooltip();
        EjecutarValidacionesDespuesDeCrearLista();
		
		$('#tblPacientes').show().css({
            "width": "auto",
            "min-width": "100%"
        });

        $('.loading').hide();
	table.columns.adjust();
    });

		ApplySearch(table);
		$('tfoot tr').insertAfter($('thead tr'));
		

        $('.clockpicker').clockpicker();

        $('.datepicker').datepicker({
            todayBtn: "linked",
            keyboardNavigation: false,
            forceParse: false,
            calendarWeeks: true,
            autoclose: true,
            format: "dd-mm-yyyy"
        });
    });

    function DeletePacientes(Folio) {
       if (confirm(htmlDecode('@Resources.Resources.DeleteRecord'))) {
            $.ajax({
                url: '@Url.Content("~/Frontal/Pacientes/Delete?id=")' + Folio,
                type: 'DELETE',
                success: function (result) {
                    if (result) {
                        table.draw();
                        showNotification('@Resources.Resources.DeleteSuccess', "success");
                    } else {
                        showNotification('@Resources.Resources.DeleteError', "error");
                    }

                }
            });
        }
    }
</script>

<script type="text/javascript">
	function OpenRules() {
        $.get('@Url.Action("Index", "Business_Rule_Creation")', {}, function (data) {
            $(".PacientesBusinessRuleModal").html(data);
            $(".PacientesBusinessRuleModal").modal('show');           
        });
    }
    function PacientesGetBusinessRule() {
        $('#FieldId').val();
        $('#FieldName').val('');
        $('#ObjectId').val('44337');
        $('#Attribute').val('3');
        $('#Screen').val('Pacientes');
        OpenRules();
    }

    function GetPropertyBag() {
        $.get('@Url.Action("PacientesPropertyBag", "Pacientes")', function (data) {
            $(".PropertyModal").html(data);
        });
    }
</script>
<input type="hidden" id="FieldId" name="FieldId" value="" />
<input type="hidden" id="FieldName" name="FieldName" value="" />
<input type="hidden" id="ObjectId" name="ObjectId" value="" />
<input type="hidden" id="Attribute" name="Attribute" value="" />
<input type="hidden" id="Screen" name="Screen" value="" />
@section Styles {
    
    @Styles.Render("~/plugins/dateRangeStyles")
    @Styles.Render("~/plugins/dataPickerStyles")

}

@section Scripts {
    @Scripts.Render("~/plugins/dataPicker")
}

