@using System
@using System.Collections.Generic
@using System.Globalization
@using Spartane.Core.Domain.Permission
@using Spartane.Core.Domain.Spartane_File
@using Spartane.Web.Helpers
@model Spartane.Web.Areas.Frontal.Models.EmpresasModel
@{
    Spartane_File attachedFileCedula_Fiscal = (Spartane_File)ViewBag.Cedula_FiscalSpartane_File;

/*
    string Fecha_de_Registro = "";
    if (Model.Fecha_de_Registro == "")
    { Model.Fecha_de_Registro = DateTime.Now.ToString(ConfigurationProperty.DateFormat); }

*/
    List<SelectListItem> varSpartan_User_Usuario_que_Registra = null;
    if (ViewBag.Spartan_Users_Usuario_que_Registra != null)
    { varSpartan_User_Usuario_que_Registra = (List<SelectListItem>)ViewBag.Spartan_Users_Usuario_que_Registra; }
    List<SelectListItem> varTipos_de_Empresa_Tipo_de_Empresa = null;
    if (ViewBag.Tipos_de_Empresas_Tipo_de_Empresa != null)
    { varTipos_de_Empresa_Tipo_de_Empresa = (List<SelectListItem>)ViewBag.Tipos_de_Empresas_Tipo_de_Empresa; }
    List<SelectListItem> varEstado_Estado = null;
    if (ViewBag.Estados_Estado != null)
    { varEstado_Estado = (List<SelectListItem>)ViewBag.Estados_Estado; }
    List<SelectListItem> varPais_Pais = null;
    if (ViewBag.Paiss_Pais != null)
    { varPais_Pais = (List<SelectListItem>)ViewBag.Paiss_Pais; }
    List<SelectListItem> varEstatus_Estatus = null;
    if (ViewBag.Estatuss_Estatus != null)
    { varEstatus_Estatus = (List<SelectListItem>)ViewBag.Estatuss_Estatus; }
    List<SelectListItem> varRegimenes_Fiscales_Regimen_Fiscal = null;
    if (ViewBag.Regimenes_Fiscaless_Regimen_Fiscal != null)
    { varRegimenes_Fiscales_Regimen_Fiscal = (List<SelectListItem>)ViewBag.Regimenes_Fiscaless_Regimen_Fiscal; }
    List<SelectListItem> varEstado_Estado_Fiscal = null;
    if (ViewBag.Estados_Estado_Fiscal != null)
    { varEstado_Estado_Fiscal = (List<SelectListItem>)ViewBag.Estados_Estado_Fiscal; }
    List<SelectListItem> varPais_Pais_Fiscal = null;
    if (ViewBag.Paiss_Pais_Fiscal != null)
    { varPais_Pais_Fiscal = (List<SelectListItem>)ViewBag.Paiss_Pais_Fiscal; }

    Permission permissionDetalle_Contactos_Empresa = ViewBag.PermissionDetalle_Contactos_Empresa;
    Permission permissionDetalle_Suscripciones_Empresa = ViewBag.PermissionDetalle_Suscripciones_Empresa;
    Permission permissionDetalle_Pagos_Empresa = ViewBag.PermissionDetalle_Pagos_Empresa;
    Permission permissionDetalle_Contratos_Empresa = ViewBag.PermissionDetalle_Contratos_Empresa;
    Permission permissionDetalle_Registro_Beneficiarios_Titulares_Empresa = ViewBag.PermissionDetalle_Registro_Beneficiarios_Titulares_Empresa;
    Permission permissionDetalle_Registro_Beneficiarios_Empresa = ViewBag.PermissionDetalle_Registro_Beneficiarios_Empresa;

    Permission permission = ViewBag.Permission;
	
	if (ViewBag.IsPartial || ViewBag.viewInEframe)
   { 
       Layout = "~/Areas/Frontal/Views/Shared/_LayoutPopup.cshtml";
   }
}
<div class="loading style-2"><div class="loading-wheel"></div></div>
<div class="modal fade in" id="dvAttributeValue" style="background-color:rgba(0, 0, 0, 0.7);">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <div class="form-group">
                    <label class="col-sm-3 control-label" id="lblAttributeType">@Resources.Resources.Value</label>
                    <div class="col-sm-7">
                        <input type="text" title="Value" class="form-control" id="txtAttributeValue" />
                    </div>
                    <div class="col-sm-2">
                        <a class="btn btn-primary" onclick="SaveValue()">@Resources.Resources.Submit</a>
                    </div>
                    <input type="hidden" id="hdnAttributType" />
                    <input type="hidden" id="hdnAttributElement" />
                    <input type="hidden" id="hdnAttributNumber" />
                    <input type="hidden" id="hdnElementType" />
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row wrapper border-bottom white-bg page-heading">

    <div class="row">
        <div class="col-lg-10">
            <h2>
                @Resources.EmpresasResources.Empresas
                <button onclick="EmpresasGetBusinessRule('', 'Al Abrir Pantalla', '0')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#EmpresasBusinessRule-form">
                    <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToBegin">
                        <i class="fa fa-cogs fa-spin"></i>
                    </a>
                </button>
            </h2>
            <ol class="breadcrumb">
                <li>
                    <a href="@Url.Action("Index", "Home")">@Resources.Resources.Home</a>
                </li>
                <li class="active">
                    @if (Session["PhaseName"] != null)
                    {
                        <strong>@Session["PhaseName"].ToString()</strong>
                    }
                    else
                    {
                        <strong>@Resources.EmpresasResources.Empresas</strong>
                    }

                </li>
                <li class="active">
                    <strong>@Resources.Resources.Create</strong>
                </li>
            </ol>
        </div>
        <div class="col-lg-2">

            @{
                if (Convert.ToInt32(Spartane.Web.SessionHelper.Role) == (int)Spartane.Core.Enums.SpartanRoleEnum.Admin)
                {
                    <h2>&nbsp;</h2>
                    <button onclick="EmpresasDisplayBusinessRule()" type="button" class="btn btn-info btn-lg displayBusinessProperyButton">
                        <i class="fa fa-cogs fa-spin"></i>
                    </button>

                    <div aria-hidden="true" class="modal fade in EmpresasPropertyBusinessModal" id="EmpresasPropertyBusinessModal-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title">
                                        @Resources.Resources.titleBussinesRules
                                        <button data-dismiss="modal" class="close" type="button"><span aria-hidden="true">×</span><span class="sr-only">@Resources.Resources.Close</span></button>
                                    </h4>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <a class="btn btn-primary full-width" data-dismiss="modal" data-toggle="modal" data-target="#PropertyModal-form" onclick="GetPropertyBag()">@Resources.Resources.Property</a>
                                        </div>
                                        <div class="clearfix col-sm-12">&nbsp;</div>
                                        <div class="col-sm-12">
                                            <a class="btn btn-primary full-width" data-dismiss="modal" data-toggle="modal" data-target="#EmpresasBusinessRule-form" onclick="EmpresasGetBusinessRule()">Business Rule</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div aria-hidden="true" data-backdrop="static" class="modal fade in PropertyModal" id="PropertyModal-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                    </div>
                    <div aria-hidden="true" data-backdrop="static" class="modal fade in EmpresasBusinessRuleModal" id="EmpresasBusinessRule-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                    </div>


                }
            }
            <div aria-hidden="true" class="modal fade in AddDetalle_Contactos_EmpresaModal" id="AddDetalle_Contactos_Empresa-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
            </div>

            <div aria-hidden="true" class="modal fade in AddDetalle_Suscripciones_EmpresaModal" id="AddDetalle_Suscripciones_Empresa-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
            </div>

            <div aria-hidden="true" class="modal fade in AddDetalle_Pagos_EmpresaModal" id="AddDetalle_Pagos_Empresa-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
            </div>

            <div aria-hidden="true" class="modal fade in AddDetalle_Contratos_EmpresaModal" id="AddDetalle_Contratos_Empresa-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
            </div>

            <div aria-hidden="true" class="modal fade in AddDetalle_Registro_Beneficiarios_Titulares_EmpresaModal" id="AddDetalle_Registro_Beneficiarios_Titulares_Empresa-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
            </div>

            <div aria-hidden="true" class="modal fade in AddDetalle_Registro_Beneficiarios_EmpresaModal" id="AddDetalle_Registro_Beneficiarios_Empresa-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
            </div>


        </div>
    </div>

    @* CODMANINI-ADD *@
    @* Model Importar Beneficiarios Inicio *@
    <div id="importModal" class="modal fade" tabindex="-1" role="dialog" style="display:none;" aria-labelledby="gridSystemModalLabel2">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" onclick="OcultarModalImportar()" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="gridSystemModalLabel2">Importar Beneficiarios desde archivo de Excel</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-5">Selección de archivo:</div>
                        <div class="col-md-8 col-md-offset-0">
                            <input class="btn btn-default" type="file" id="fileInput" accept=".xlsx, .xls, .csv" />
                            <input class="btn btn-default" type="button" id="btnUpload" value="Procesar" />
                        </div>
                    </div>
                    <div class="row">
                    </div>
                </div>
                <div id="progressbar_container" style="width: 100%; height: 30px; position: relative; background-color: grey; display: none">
                    <div id="progressbar" style="width: 0%; height: 100%; position: absolute; background-color: green"></div>
                    <span id="progressbar_label" style="position: absolute; left: 35%; top: 20%">Cargando...</span>
                </div>
                <div class="modal-footer">
                    <button type="button" onclick="OcultarModalImportar()" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    @* Model Importar Beneficiarios Fin *@
    @* CODMANFIN-ADD *@



    <div class="wrapper wrapper-content animated fadeInRight">
        <div class="ibox float-e-margins">
            <div class="ibox-content">
                @using (Html.BeginForm("Post", "Empresas", FormMethod.Post, new { id = "CreateEmpresas", @readonly = "true", @class = "form-horizontal", enctype = "multipart/form-data" }))
                {
                    <input type="hidden" id="hdnIsNew" name="hdnIsNew" value="@ViewBag.IsNew.ToString()" />
                    <span id="popupNotification"></span>
                    <div class="container-fluid EmpresasCreateForm" id="viewmodeledit">
                        <div class="alert alert-warning" id="controlsRequerid" style="display:none">
                            <a href="#" class="close" onclick="$('#controlsRequerid').hide();">&times;</a>
                            <span id="textRequired"></span>
                        </div>
                        <div class="tabs-container">
                            <ul class="nav nav-tabs">
                                <li class="active"><a data-toggle="tab" href="#tabDatos_Generales"> @Resources.EmpresasResources.TabDatos_Generales</a></li>
                                <li class=""><a data-toggle="tab" href="#tabDatos_de_Contacto"> @Resources.EmpresasResources.TabDatos_de_Contacto</a></li>
                                <li class=""><a data-toggle="tab" href="#tabDatos_Fiscales"> @Resources.EmpresasResources.TabDatos_Fiscales</a></li>
                                <li class=""><a data-toggle="tab" href="#tabSuscripcion"> @Resources.EmpresasResources.TabSuscripcion</a></li>
                                <li class=""><a data-toggle="tab" href="#tabDocumentacion"> @Resources.EmpresasResources.TabDocumentacion</a></li>
                                <li class=""><a data-toggle="tab" href="#tabBeneficiarios"> @Resources.EmpresasResources.TabBeneficiarios</a></li>

                            </ul>
                            <div class="tab-content">
                                <div id="tabDatos_Generales" class="tab-pane active">
                                    <div class="panel-body">
                                        <div class="form-group" id="divFolio">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Folio</label>
                                            <div class="col-sm-8" data-field-id="Folio" data-attribute="257499" data-field-name="@Resources.EmpresasResources.Folio">
                                                <label class="form-control" for="Folio" id="lblFolio">
                                                    @if (Model.Folio == 0)
                                                    {
                                    <text>@Resources.Resources.ClaveDefault</text> }
                                                    else
                                                    {
                                    <text>@Model.Folio</text>}
                                                </label>
                                            </div>
                                        </div>
                                        <div class="form-group" id="divFecha_de_Registro">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Fecha_de_Registro</label>
                                            <div class="col-sm-8" data-field-id="Fecha_de_Registro" data-attribute="257500" data-field-name="@Resources.EmpresasResources.Fecha_de_Registro">
                                                <div class='input-group date' id='datetimepicker1'>
                                                    <input class="form-control col-md-12 Datos_Generales" id="Fecha_de_Registro" name="Fecha_de_Registro" type="text" value="@Model.Fecha_de_Registro">
                                                    <span class="input-group-addon">
                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group" id="divHora_de_Registro">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Hora_de_Registro</label>
                                            <div class="col-sm-8" data-field-id="Hora_de_Registro" data-attribute="258300" data-field-name="@Resources.EmpresasResources.Hora_de_Registro">
                                                <div class='input-group date' id='timePicker'>
                                                    <input class="form-control col-md-12 Datos_Generales" id="Hora_de_Registro" name="Hora_de_Registro" type="text" data-autoclose="true" value="@Model.Hora_de_Registro">
                                                    <span class="input-group-addon">
                                                        <span class="glyphicon glyphicon-time"></span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group" id="divUsuario_que_Registra">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Usuario_que_Registra</label>
                                            <div class="col-sm-8" data-field-id="Usuario_que_Registra" data-attribute="258301" data-field-name="@Resources.EmpresasResources.Usuario_que_Registra">
                                                <select class="form-control Datos_Generales" data-val="true" data-val-number="The field Usuario que Registra must be a number." data-val-required="The Usuario que Registra field is required." id="Usuario_que_Registra" name="Usuario_que_Registra">
                                                    <option value=""></option>
                                                    @if (varSpartan_User_Usuario_que_Registra != null)
                                                    {
                                                        foreach (var itemUsuario_que_Registra in varSpartan_User_Usuario_que_Registra)
                                                        {
                                                            if (itemUsuario_que_Registra.Value == Convert.ToString(Model.Usuario_que_Registra))
                                                            {
                                    <option value="@itemUsuario_que_Registra.Value" selected>@itemUsuario_que_Registra.Text</option> }
                                                            else
                                                            {
                                    <option value="@itemUsuario_que_Registra.Value">@itemUsuario_que_Registra.Text</option>}
                                                        }
                                                    }
                                                </select>
                                                @*<span class="field-validation-valid" data-valmsg-for="Usuario_que_Registra" data-valmsg-replace="true"></span>*@
                                            </div>
                                            @if (PermissionHelper.GetRoleObjectPermission(Convert.ToInt32(Spartane.Web.SessionHelper.Role), 0, 0, 258301).New)
                                            {
                            <div class="col-sm-1 abm-icons">
                                <a id="Estado_New" onclick="GetCatalogPopup('Spartan_User', 'Usuario_que_Registra');" href="#"><i class="glyphicon glyphicon-plus"></i></a>
                            </div>}
                                        </div>
                                        <div class="form-group" id="divNombre_de_la_Empresa">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Nombre_de_la_Empresa</label>
                                            <div class="col-sm-8" data-field-id="Nombre_de_la_Empresa" data-attribute="258303" data-field-name="@Resources.EmpresasResources.Nombre_de_la_Empresa">
                                                <input class="form-control Datos_Generales" id="Nombre_de_la_Empresa" name="Nombre_de_la_Empresa" type="text" value="@Model.Nombre_de_la_Empresa">
                                                @*<span class="field-validation-valid" data-valmsg-for="Nombre_de_la_Empresa" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divTipo_de_Empresa">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Tipo_de_Empresa</label>
                                            <div class="col-sm-8" data-field-id="Tipo_de_Empresa" data-attribute="258954" data-field-name="@Resources.EmpresasResources.Tipo_de_Empresa">
                                                <select class="form-control Datos_Generales" data-val="true" data-val-number="The field Tipo de Empresa must be a number." data-val-required="The Tipo de Empresa field is required." id="Tipo_de_Empresa" name="Tipo_de_Empresa">
                                                    <option value=""></option>
                                                    @if (varTipos_de_Empresa_Tipo_de_Empresa != null)
                                                    {
                                                        foreach (var itemTipo_de_Empresa in varTipos_de_Empresa_Tipo_de_Empresa)
                                                        {
                                                            if (itemTipo_de_Empresa.Value == Convert.ToString(Model.Tipo_de_Empresa))
                                                            {
                                    <option value="@itemTipo_de_Empresa.Value" selected>@itemTipo_de_Empresa.Text</option> }
                                                            else
                                                            {
                                    <option value="@itemTipo_de_Empresa.Value">@itemTipo_de_Empresa.Text</option>}
                                                        }
                                                    }
                                                </select>
                                                @*<span class="field-validation-valid" data-valmsg-for="Tipo_de_Empresa" data-valmsg-replace="true"></span>*@
                                            </div>
                                            @if (PermissionHelper.GetRoleObjectPermission(Convert.ToInt32(Spartane.Web.SessionHelper.Role), 0, 0, 258954).New)
                                            {
                            <div class="col-sm-1 abm-icons">
                                <a id="Estado_New" onclick="GetCatalogPopup('Tipos_de_Empresa', 'Tipo_de_Empresa');" href="#"><i class="glyphicon glyphicon-plus"></i></a>
                            </div>}
                                        </div>
                                        <div class="form-group" id="divEmail">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Email</label>
                                            <div class="col-sm-8" data-field-id="Email" data-attribute="258305" data-field-name="@Resources.EmpresasResources.Email">
                                                <input class="form-control Datos_Generales" id="Email" name="Email" type="text" value="@Model.Email">
                                                @*<span class="field-validation-valid" data-valmsg-for="Email" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divTelefono">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Telefono</label>
                                            <div class="col-sm-8" data-field-id="Telefono" data-attribute="258306" data-field-name="@Resources.EmpresasResources.Telefono">
                                                <input class="form-control Datos_Generales" id="Telefono" name="Telefono" type="text" value="@Model.Telefono">
                                                @*<span class="field-validation-valid" data-valmsg-for="Telefono" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divCalle">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Calle</label>
                                            <div class="col-sm-8" data-field-id="Calle" data-attribute="258307" data-field-name="@Resources.EmpresasResources.Calle">
                                                <input class="form-control Datos_Generales" id="Calle" name="Calle" type="text" value="@Model.Calle">
                                                @*<span class="field-validation-valid" data-valmsg-for="Calle" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divNumero_exterior">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Numero_exterior</label>
                                            <div class="col-sm-8" data-field-id="Numero_exterior" data-attribute="258308" data-field-name="@Resources.EmpresasResources.Numero_exterior">
                                                <input class="form-control Datos_Generales" id="Numero_exterior" name="Numero_exterior" type="text" value="@Model.Numero_exterior">
                                                @*<span class="field-validation-valid" data-valmsg-for="Numero_exterior" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divNumero_interior">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Numero_interior</label>
                                            <div class="col-sm-8" data-field-id="Numero_interior" data-attribute="258309" data-field-name="@Resources.EmpresasResources.Numero_interior">
                                                <input class="form-control Datos_Generales" id="Numero_interior" name="Numero_interior" type="text" value="@Model.Numero_interior">
                                                @*<span class="field-validation-valid" data-valmsg-for="Numero_interior" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divColonia">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Colonia</label>
                                            <div class="col-sm-8" data-field-id="Colonia" data-attribute="258310" data-field-name="@Resources.EmpresasResources.Colonia">
                                                <input class="form-control Datos_Generales" id="Colonia" name="Colonia" type="text" value="@Model.Colonia">
                                                @*<span class="field-validation-valid" data-valmsg-for="Colonia" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divCP">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.CP</label>
                                            <div class="col-sm-8" data-field-id="CP" data-attribute="258311" data-field-name="@Resources.EmpresasResources.CP">
                                                <input class="form-control inputNumber Datos_Generales" id="CP" name="CP" type="text" value="@Model.CP">
                                                @*<span class="field-validation-valid" data-valmsg-for="CP" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divCiudad">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Ciudad</label>
                                            <div class="col-sm-8" data-field-id="Ciudad" data-attribute="258312" data-field-name="@Resources.EmpresasResources.Ciudad">
                                                <input class="form-control Datos_Generales" id="Ciudad" name="Ciudad" type="text" value="@Model.Ciudad">
                                                @*<span class="field-validation-valid" data-valmsg-for="Ciudad" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divEstado">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Estado</label>
                                            <div class="col-sm-8" data-field-id="Estado" data-attribute="258313" data-field-name="@Resources.EmpresasResources.Estado">
                                                <select class="form-control Datos_Generales" data-val="true" data-val-number="The field Estado must be a number." data-val-required="The Estado field is required." id="Estado" name="Estado">
                                                    <option value=""></option>
                                                    @if (varEstado_Estado != null)
                                                    {
                                                        foreach (var itemEstado in varEstado_Estado)
                                                        {
                                                            if (itemEstado.Value == Convert.ToString(Model.Estado))
                                                            {
                                    <option value="@itemEstado.Value" selected>@itemEstado.Text</option> }
                                                            else
                                                            {
                                    <option value="@itemEstado.Value">@itemEstado.Text</option>}
                                                        }
                                                    }
                                                </select>
                                                @*<span class="field-validation-valid" data-valmsg-for="Estado" data-valmsg-replace="true"></span>*@
                                            </div>
                                            @if (PermissionHelper.GetRoleObjectPermission(Convert.ToInt32(Spartane.Web.SessionHelper.Role), 0, 0, 258313).New)
                                            {
                            <div class="col-sm-1 abm-icons">
                                <a id="Estado_New" onclick="GetCatalogPopup('Estado', 'Estado');" href="#"><i class="glyphicon glyphicon-plus"></i></a>
                            </div>}
                                        </div>
                                        <div class="form-group" id="divPais">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Pais</label>
                                            <div class="col-sm-8" data-field-id="Pais" data-attribute="258314" data-field-name="@Resources.EmpresasResources.Pais">
                                                <select class="form-control Datos_Generales" data-val="true" data-val-number="The field País must be a number." data-val-required="The País field is required." id="Pais" name="Pais">
                                                    <option value=""></option>
                                                    @if (varPais_Pais != null)
                                                    {
                                                        foreach (var itemPais in varPais_Pais)
                                                        {
                                                            if (itemPais.Value == Convert.ToString(Model.Pais))
                                                            {
                                    <option value="@itemPais.Value" selected>@itemPais.Text</option> }
                                                            else
                                                            {
                                    <option value="@itemPais.Value">@itemPais.Text</option>}
                                                        }
                                                    }
                                                </select>
                                                @*<span class="field-validation-valid" data-valmsg-for="Pais" data-valmsg-replace="true"></span>*@
                                            </div>
                                            @if (PermissionHelper.GetRoleObjectPermission(Convert.ToInt32(Spartane.Web.SessionHelper.Role), 0, 0, 258314).New)
                                            {
                            <div class="col-sm-1 abm-icons">
                                <a id="Estado_New" onclick="GetCatalogPopup('Pais', 'Pais');" href="#"><i class="glyphicon glyphicon-plus"></i></a>
                            </div>}
                                        </div>
                                        <div class="form-group" id="divEstatus">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Estatus</label>
                                            <div class="col-sm-8" data-field-id="Estatus" data-attribute="258315" data-field-name="@Resources.EmpresasResources.Estatus">
                                                <select class="form-control Datos_Generales" data-val="true" data-val-number="The field Estatus must be a number." data-val-required="The Estatus field is required." id="Estatus" name="Estatus">
                                                    <option value=""></option>
                                                    @if (varEstatus_Estatus != null)
                                                    {
                                                        foreach (var itemEstatus in varEstatus_Estatus)
                                                        {
                                                            if (itemEstatus.Value == Convert.ToString(Model.Estatus))
                                                            {
                                    <option value="@itemEstatus.Value" selected>@itemEstatus.Text</option> }
                                                            else
                                                            {
                                    <option value="@itemEstatus.Value">@itemEstatus.Text</option>}
                                                        }
                                                    }
                                                </select>
                                                @*<span class="field-validation-valid" data-valmsg-for="Estatus" data-valmsg-replace="true"></span>*@
                                            </div>
                                            @if (PermissionHelper.GetRoleObjectPermission(Convert.ToInt32(Spartane.Web.SessionHelper.Role), 0, 0, 258315).New)
                                            {
                            <div class="col-sm-1 abm-icons">
                                <a id="Estado_New" onclick="GetCatalogPopup('Estatus', 'Estatus');" href="#"><i class="glyphicon glyphicon-plus"></i></a>
                            </div>}
                                        </div>
                                    </div>
                                </div>


                                <div id="tabDatos_de_Contacto" class="tab-pane">
                                    <div class="panel-body">
                                        <div id="divContactos">
                                            <div class="ibox-title">
                                                <h5>@Resources.EmpresasResources.Contactos</h5>
                                                <div class="ibox-tools">
                                                </div>
                                            </div>
                                            <div class="ibox-content">
                                                <div class="">
                                                    @if (permissionDetalle_Contactos_Empresa.New && !ViewBag.Consult)
                                                    {
                                    <a onclick="Detalle_Contactos_EmpresafnClickAddRow();" href="javascript:void(0);" title="@Resources.Resources.AddNewRow" class="Detalle_Contactos_EmpresaAddRow btn btn-primary">
                                        <i class="glyphicon glyphicon-plus"></i>
                                    </a>}
                                                    <button onclick="EmpresasGetBusinessRule('', 'Al Guardar o al Eliminar una Row', '258519')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#EmpresasBusinessRule-form">
                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToCreateGrid">
                                                            <i class="fa fa-cogs fa-spin"></i>
                                                        </a>
                                                    </button>
                                                    @if (permissionDetalle_Contactos_Empresa.New && !ViewBag.Consult)
                                                    {
                                    <a onclick="Detalle_Contactos_EmpresafnOpenAddRowPopUp();" data-toggle="modal" title="@Resources.Resources.AddNewRow" data-target="#AddDetalle_Contactos_Empresa-form" data-backdrop="static" data-keyboard="false" class="btn_mrpopup btn btn-primary">
                                        <i class="glyphicon glyphicon-new-window"></i>
                                    </a>}
                                                </div>

                                                <br />

                                                <div style='overflow-x: auto;'>
                                                    <table class="table table-striped table-bordered table-hover childValidateTable" id="Detalle_Contactos_EmpresaGrid">
                                                        <thead>
                                                            <tr>
                                                                <th class="ActionHeader"><span>@Resources.Resources.Actions</span></th>


                                                                <th class="Nombre_completoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258502" data-field-id="Detalle_Contactos_EmpresaNombre_completo" data-field-name="@Resources.Detalle_Contactos_EmpresaResources.Nombre_completo" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Contactos_EmpresaResources.Nombre_completo">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Contactos_EmpresaResources.Nombre_completo
                                                                    </span>
                                                                </th>
                                                                <th class="CorreoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258503" data-field-id="Detalle_Contactos_EmpresaCorreo" data-field-name="@Resources.Detalle_Contactos_EmpresaResources.Correo" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Contactos_EmpresaResources.Correo">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Contactos_EmpresaResources.Correo
                                                                    </span>
                                                                </th>
                                                                <th class="TelefonoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258504" data-field-id="Detalle_Contactos_EmpresaTelefono" data-field-name="@Resources.Detalle_Contactos_EmpresaResources.Telefono" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Contactos_EmpresaResources.Telefono">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Contactos_EmpresaResources.Telefono
                                                                    </span>
                                                                </th>
                                                                <th class="Contacto_PrincipalHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258505" data-field-id="Detalle_Contactos_EmpresaContacto_Principal" data-field-name="@Resources.Detalle_Contactos_EmpresaResources.Contacto_Principal" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Contactos_EmpresaResources.Contacto_Principal">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Contactos_EmpresaResources.Contacto_Principal
                                                                    </span>
                                                                </th>
                                                                <th class="AreaHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258506" data-field-id="Detalle_Contactos_EmpresaArea" data-field-name="@Resources.Detalle_Contactos_EmpresaResources.Area" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Contactos_EmpresaResources.Area">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Contactos_EmpresaResources.Area
                                                                    </span>
                                                                </th>
                                                                <th class="Acceso_al_SistemaHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258507" data-field-id="Detalle_Contactos_EmpresaAcceso_al_Sistema" data-field-name="@Resources.Detalle_Contactos_EmpresaResources.Acceso_al_Sistema" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Contactos_EmpresaResources.Acceso_al_Sistema">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Contactos_EmpresaResources.Acceso_al_Sistema
                                                                    </span>
                                                                </th>
                                                                <th class="Nombre_de_usuarioHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258508" data-field-id="Detalle_Contactos_EmpresaNombre_de_usuario" data-field-name="@Resources.Detalle_Contactos_EmpresaResources.Nombre_de_usuario" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Contactos_EmpresaResources.Nombre_de_usuario">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Contactos_EmpresaResources.Nombre_de_usuario
                                                                    </span>
                                                                </th>
                                                                <th class="Recibe_AlertasHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258509" data-field-id="Detalle_Contactos_EmpresaRecibe_Alertas" data-field-name="@Resources.Detalle_Contactos_EmpresaResources.Recibe_Alertas" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Contactos_EmpresaResources.Recibe_Alertas">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Contactos_EmpresaResources.Recibe_Alertas
                                                                    </span>
                                                                </th>
                                                                <th class="EstatusHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258510" data-field-id="Detalle_Contactos_EmpresaEstatus" data-field-name="@Resources.Detalle_Contactos_EmpresaResources.Estatus" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Contactos_EmpresaResources.Estatus">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Contactos_EmpresaResources.Estatus
                                                                    </span>
                                                                </th>
                                                                <th class="Folio_UsuarioHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="260538" data-field-id="Detalle_Contactos_EmpresaFolio_Usuario" data-field-name="@Resources.Detalle_Contactos_EmpresaResources.Folio_Usuario" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Contactos_EmpresaResources.Folio_Usuario">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Contactos_EmpresaResources.Folio_Usuario
                                                                    </span>
                                                                </th>

                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div id="tabDatos_Fiscales" class="tab-pane">
                                    <div class="panel-body">
                                        <div class="form-group" id="divRegimen_Fiscal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Regimen_Fiscal</label>
                                            <div class="col-sm-8" data-field-id="Regimen_Fiscal" data-attribute="258316" data-field-name="@Resources.EmpresasResources.Regimen_Fiscal">
                                                <select class="form-control Datos_Fiscales" data-val="true" data-val-number="The field Régimen Fiscal must be a number." data-val-required="The Régimen Fiscal field is required." id="Regimen_Fiscal" name="Regimen_Fiscal">
                                                    <option value=""></option>
                                                    @if (varRegimenes_Fiscales_Regimen_Fiscal != null)
                                                    {
                                                        foreach (var itemRegimen_Fiscal in varRegimenes_Fiscales_Regimen_Fiscal)
                                                        {
                                                            if (itemRegimen_Fiscal.Value == Convert.ToString(Model.Regimen_Fiscal))
                                                            {
                                    <option value="@itemRegimen_Fiscal.Value" selected>@itemRegimen_Fiscal.Text</option> }
                                                            else
                                                            {
                                    <option value="@itemRegimen_Fiscal.Value">@itemRegimen_Fiscal.Text</option>}
                                                        }
                                                    }
                                                </select>
                                                @*<span class="field-validation-valid" data-valmsg-for="Regimen_Fiscal" data-valmsg-replace="true"></span>*@
                                            </div>
                                            @if (PermissionHelper.GetRoleObjectPermission(Convert.ToInt32(Spartane.Web.SessionHelper.Role), 0, 0, 258316).New)
                                            {
                            <div class="col-sm-1 abm-icons">
                                <a id="Estado_New" onclick="GetCatalogPopup('Regimenes_Fiscales', 'Regimen_Fiscal');" href="#"><i class="glyphicon glyphicon-plus"></i></a>
                            </div>}
                                        </div>
                                        <div class="form-group" id="divNombre_o_Razon_Social">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Nombre_o_Razon_Social</label>
                                            <div class="col-sm-8" data-field-id="Nombre_o_Razon_Social" data-attribute="258317" data-field-name="@Resources.EmpresasResources.Nombre_o_Razon_Social">
                                                <input class="form-control Datos_Fiscales" id="Nombre_o_Razon_Social" name="Nombre_o_Razon_Social" type="text" value="@Model.Nombre_o_Razon_Social">
                                                @*<span class="field-validation-valid" data-valmsg-for="Nombre_o_Razon_Social" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divRFC">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.RFC</label>
                                            <div class="col-sm-8" data-field-id="RFC" data-attribute="258318" data-field-name="@Resources.EmpresasResources.RFC">
                                                <input class="form-control Datos_Fiscales" id="RFC" name="RFC" type="text" value="@Model.RFC">
                                                @*<span class="field-validation-valid" data-valmsg-for="RFC" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divCalle_Fiscal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Calle_Fiscal</label>
                                            <div class="col-sm-8" data-field-id="Calle_Fiscal" data-attribute="258319" data-field-name="@Resources.EmpresasResources.Calle_Fiscal">
                                                <input class="form-control Datos_Fiscales" id="Calle_Fiscal" name="Calle_Fiscal" type="text" value="@Model.Calle_Fiscal">
                                                @*<span class="field-validation-valid" data-valmsg-for="Calle_Fiscal" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divNumero_exterior_Fiscal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Numero_exterior_Fiscal</label>
                                            <div class="col-sm-8" data-field-id="Numero_exterior_Fiscal" data-attribute="258320" data-field-name="@Resources.EmpresasResources.Numero_exterior_Fiscal">
                                                <input class="form-control Datos_Fiscales" id="Numero_exterior_Fiscal" name="Numero_exterior_Fiscal" type="text" value="@Model.Numero_exterior_Fiscal">
                                                @*<span class="field-validation-valid" data-valmsg-for="Numero_exterior_Fiscal" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divNumero_interior_Fiscal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Numero_interior_Fiscal</label>
                                            <div class="col-sm-8" data-field-id="Numero_interior_Fiscal" data-attribute="258321" data-field-name="@Resources.EmpresasResources.Numero_interior_Fiscal">
                                                <input class="form-control Datos_Fiscales" id="Numero_interior_Fiscal" name="Numero_interior_Fiscal" type="text" value="@Model.Numero_interior_Fiscal">
                                                @*<span class="field-validation-valid" data-valmsg-for="Numero_interior_Fiscal" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divColonia_Fiscal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Colonia_Fiscal</label>
                                            <div class="col-sm-8" data-field-id="Colonia_Fiscal" data-attribute="258322" data-field-name="@Resources.EmpresasResources.Colonia_Fiscal">
                                                <input class="form-control Datos_Fiscales" id="Colonia_Fiscal" name="Colonia_Fiscal" type="text" value="@Model.Colonia_Fiscal">
                                                @*<span class="field-validation-valid" data-valmsg-for="Colonia_Fiscal" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divCP_Fiscal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.CP_Fiscal</label>
                                            <div class="col-sm-8" data-field-id="CP_Fiscal" data-attribute="258323" data-field-name="@Resources.EmpresasResources.CP_Fiscal">
                                                <input class="form-control inputNumber Datos_Fiscales" id="CP_Fiscal" name="CP_Fiscal" type="text" value="@Model.CP_Fiscal">
                                                @*<span class="field-validation-valid" data-valmsg-for="CP_Fiscal" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divCiudad_Fiscal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Ciudad_Fiscal</label>
                                            <div class="col-sm-8" data-field-id="Ciudad_Fiscal" data-attribute="258324" data-field-name="@Resources.EmpresasResources.Ciudad_Fiscal">
                                                <input class="form-control Datos_Fiscales" id="Ciudad_Fiscal" name="Ciudad_Fiscal" type="text" value="@Model.Ciudad_Fiscal">
                                                @*<span class="field-validation-valid" data-valmsg-for="Ciudad_Fiscal" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divEstado_Fiscal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Estado_Fiscal</label>
                                            <div class="col-sm-8" data-field-id="Estado_Fiscal" data-attribute="258325" data-field-name="@Resources.EmpresasResources.Estado_Fiscal">
                                                <select class="form-control Datos_Fiscales" data-val="true" data-val-number="The field Estado Fiscal must be a number." data-val-required="The Estado Fiscal field is required." id="Estado_Fiscal" name="Estado_Fiscal">
                                                    <option value=""></option>
                                                    @if (varEstado_Estado_Fiscal != null)
                                                    {
                                                        foreach (var itemEstado_Fiscal in varEstado_Estado_Fiscal)
                                                        {
                                                            if (itemEstado_Fiscal.Value == Convert.ToString(Model.Estado_Fiscal))
                                                            {
                                    <option value="@itemEstado_Fiscal.Value" selected>@itemEstado_Fiscal.Text</option> }
                                                            else
                                                            {
                                    <option value="@itemEstado_Fiscal.Value">@itemEstado_Fiscal.Text</option>}
                                                        }
                                                    }
                                                </select>
                                                @*<span class="field-validation-valid" data-valmsg-for="Estado_Fiscal" data-valmsg-replace="true"></span>*@
                                            </div>
                                            @if (PermissionHelper.GetRoleObjectPermission(Convert.ToInt32(Spartane.Web.SessionHelper.Role), 0, 0, 258325).New)
                                            {
                            <div class="col-sm-1 abm-icons">
                                <a id="Estado_New" onclick="GetCatalogPopup('Estado', 'Estado_Fiscal');" href="#"><i class="glyphicon glyphicon-plus"></i></a>
                            </div>}
                                        </div>
                                        <div class="form-group" id="divPais_Fiscal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Pais_Fiscal</label>
                                            <div class="col-sm-8" data-field-id="Pais_Fiscal" data-attribute="258326" data-field-name="@Resources.EmpresasResources.Pais_Fiscal">
                                                <select class="form-control Datos_Fiscales" data-val="true" data-val-number="The field País Fiscal must be a number." data-val-required="The País Fiscal field is required." id="Pais_Fiscal" name="Pais_Fiscal">
                                                    <option value=""></option>
                                                    @if (varPais_Pais_Fiscal != null)
                                                    {
                                                        foreach (var itemPais_Fiscal in varPais_Pais_Fiscal)
                                                        {
                                                            if (itemPais_Fiscal.Value == Convert.ToString(Model.Pais_Fiscal))
                                                            {
                                    <option value="@itemPais_Fiscal.Value" selected>@itemPais_Fiscal.Text</option> }
                                                            else
                                                            {
                                    <option value="@itemPais_Fiscal.Value">@itemPais_Fiscal.Text</option>}
                                                        }
                                                    }
                                                </select>
                                                @*<span class="field-validation-valid" data-valmsg-for="Pais_Fiscal" data-valmsg-replace="true"></span>*@
                                            </div>
                                            @if (PermissionHelper.GetRoleObjectPermission(Convert.ToInt32(Spartane.Web.SessionHelper.Role), 0, 0, 258326).New)
                                            {
                            <div class="col-sm-1 abm-icons">
                                <a id="Estado_New" onclick="GetCatalogPopup('Pais', 'Pais_Fiscal');" href="#"><i class="glyphicon glyphicon-plus"></i></a>
                            </div>}
                                        </div>
                                        <div class="form-group" id="divTelefono_Fiscal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Telefono_Fiscal</label>
                                            <div class="col-sm-8" data-field-id="Telefono_Fiscal" data-attribute="258327" data-field-name="@Resources.EmpresasResources.Telefono_Fiscal">
                                                <input class="form-control Datos_Fiscales" id="Telefono_Fiscal" name="Telefono_Fiscal" type="text" value="@Model.Telefono_Fiscal">
                                                @*<span class="field-validation-valid" data-valmsg-for="Telefono_Fiscal" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divFax">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Fax</label>
                                            <div class="col-sm-8" data-field-id="Fax" data-attribute="258328" data-field-name="@Resources.EmpresasResources.Fax">
                                                <input class="form-control Datos_Fiscales" id="Fax" name="Fax" type="text" value="@Model.Fax">
                                                @*<span class="field-validation-valid" data-valmsg-for="Fax" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divNombres_del_Representante_Legal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Nombres_del_Representante_Legal</label>
                                            <div class="col-sm-8" data-field-id="Nombres_del_Representante_Legal" data-attribute="258329" data-field-name="@Resources.EmpresasResources.Nombres_del_Representante_Legal">
                                                <input class="form-control Datos_Fiscales" id="Nombres_del_Representante_Legal" name="Nombres_del_Representante_Legal" type="text" value="@Model.Nombres_del_Representante_Legal">
                                                @*<span class="field-validation-valid" data-valmsg-for="Nombres_del_Representante_Legal" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divApellido_Paterno_del_Representante_Legal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Apellido_Paterno_del_Representante_Legal</label>
                                            <div class="col-sm-8" data-field-id="Apellido_Paterno_del_Representante_Legal" data-attribute="258330" data-field-name="@Resources.EmpresasResources.Apellido_Paterno_del_Representante_Legal">
                                                <input class="form-control Datos_Fiscales" id="Apellido_Paterno_del_Representante_Legal" name="Apellido_Paterno_del_Representante_Legal" type="text" value="@Model.Apellido_Paterno_del_Representante_Legal">
                                                @*<span class="field-validation-valid" data-valmsg-for="Apellido_Paterno_del_Representante_Legal" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divApellido_Materno_del_Representante_Legal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Apellido_Materno_del_Representante_Legal</label>
                                            <div class="col-sm-8" data-field-id="Apellido_Materno_del_Representante_Legal" data-attribute="258331" data-field-name="@Resources.EmpresasResources.Apellido_Materno_del_Representante_Legal">
                                                <input class="form-control Datos_Fiscales" id="Apellido_Materno_del_Representante_Legal" name="Apellido_Materno_del_Representante_Legal" type="text" value="@Model.Apellido_Materno_del_Representante_Legal">
                                                @*<span class="field-validation-valid" data-valmsg-for="Apellido_Materno_del_Representante_Legal" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                        <div class="form-group" id="divNombre_Completo_del_Representante_Legal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Nombre_Completo_del_Representante_Legal</label>
                                            <div class="col-sm-8" data-field-id="Nombre_Completo_del_Representante_Legal" data-attribute="258332" data-field-name="@Resources.EmpresasResources.Nombre_Completo_del_Representante_Legal">
                                                <input class="form-control Datos_Fiscales" id="Nombre_Completo_del_Representante_Legal" name="Nombre_Completo_del_Representante_Legal" type="text" value="@Model.Nombre_Completo_del_Representante_Legal">
                                                @*<span class="field-validation-valid" data-valmsg-for="Nombre_Completo_del_Representante_Legal" data-valmsg-replace="true"></span>*@
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div id="tabSuscripcion" class="tab-pane">
                                    <div class="panel-body">
                                        <div id="divSuscripciones">
                                            <div class="ibox-title">
                                                <h5>@Resources.EmpresasResources.Suscripciones</h5>
                                                <div class="ibox-tools">
                                                </div>
                                            </div>
                                            <div class="ibox-content">
                                                <div class="">
                                                    @if (permissionDetalle_Suscripciones_Empresa.New && !ViewBag.Consult)
                                                    {
                                    <a onclick="Detalle_Suscripciones_EmpresafnClickAddRow();" href="javascript:void(0);" title="@Resources.Resources.AddNewRow" class="Detalle_Suscripciones_EmpresaAddRow btn btn-primary">
                                        <i class="glyphicon glyphicon-plus"></i>
                                    </a>}
                                                    <button onclick="EmpresasGetBusinessRule('', 'Al Guardar o al Eliminar una Row', '258520')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#EmpresasBusinessRule-form">
                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToCreateGrid">
                                                            <i class="fa fa-cogs fa-spin"></i>
                                                        </a>
                                                    </button>
                                                    @if (permissionDetalle_Suscripciones_Empresa.New && !ViewBag.Consult)
                                                    {
                                    <a onclick="Detalle_Suscripciones_EmpresafnOpenAddRowPopUp();" data-toggle="modal" title="@Resources.Resources.AddNewRow" data-target="#AddDetalle_Suscripciones_Empresa-form" data-backdrop="static" data-keyboard="false" class="btn_mrpopup btn btn-primary">
                                        <i class="glyphicon glyphicon-new-window"></i>
                                    </a>}
                                                </div>

                                                <br />

                                                <div style='overflow-x: auto;'>
                                                    <table class="table table-striped table-bordered table-hover childValidateTable" id="Detalle_Suscripciones_EmpresaGrid">
                                                        <thead>
                                                            <tr>
                                                                <th class="ActionHeader"><span>@Resources.Resources.Actions</span></th>


                                                                <th class="Cantidad_de_BeneficiariosHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258480" data-field-id="Detalle_Suscripciones_EmpresaCantidad_de_Beneficiarios" data-field-name="@Resources.Detalle_Suscripciones_EmpresaResources.Cantidad_de_Beneficiarios" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Suscripciones_EmpresaResources.Cantidad_de_Beneficiarios">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>
                                                                        @Resources.Detalle_Suscripciones_EmpresaResources.Cantidad_de_Beneficiarios
                                                                    </span>
                                                                </th>
                                                                <th class="SuscripcionHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258481" data-field-id="Detalle_Suscripciones_EmpresaSuscripcion" data-field-name="@Resources.Detalle_Suscripciones_EmpresaResources.Suscripcion" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Suscripciones_EmpresaResources.Suscripcion">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Suscripciones_EmpresaResources.Suscripcion
                                                                    </span>
                                                                </th>
                                                                <th class="Fecha_de_inicioHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258482" data-field-id="Detalle_Suscripciones_EmpresaFecha_de_inicio" data-field-name="@Resources.Detalle_Suscripciones_EmpresaResources.Fecha_de_inicio" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Suscripciones_EmpresaResources.Fecha_de_inicio">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Suscripciones_EmpresaResources.Fecha_de_inicio
                                                                    </span>
                                                                </th>
                                                                <th class="Fecha_FinHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258483" data-field-id="Detalle_Suscripciones_EmpresaFecha_Fin" data-field-name="@Resources.Detalle_Suscripciones_EmpresaResources.Fecha_Fin" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Suscripciones_EmpresaResources.Fecha_Fin">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Suscripciones_EmpresaResources.Fecha_Fin
                                                                    </span>
                                                                </th>
                                                                <th class="Nombre_de_la_SuscripcionHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258484" data-field-id="Detalle_Suscripciones_EmpresaNombre_de_la_Suscripcion" data-field-name="@Resources.Detalle_Suscripciones_EmpresaResources.Nombre_de_la_Suscripcion" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Suscripciones_EmpresaResources.Nombre_de_la_Suscripcion">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Suscripciones_EmpresaResources.Nombre_de_la_Suscripcion
                                                                    </span>
                                                                </th>
                                                                <th class="Frecuencia_de_PagoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258485" data-field-id="Detalle_Suscripciones_EmpresaFrecuencia_de_Pago" data-field-name="@Resources.Detalle_Suscripciones_EmpresaResources.Frecuencia_de_Pago" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Suscripciones_EmpresaResources.Frecuencia_de_Pago">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Suscripciones_EmpresaResources.Frecuencia_de_Pago
                                                                    </span>
                                                                </th>
                                                                <th class="CostoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258486" data-field-id="Detalle_Suscripciones_EmpresaCosto" data-field-name="@Resources.Detalle_Suscripciones_EmpresaResources.Costo" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Suscripciones_EmpresaResources.Costo">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Suscripciones_EmpresaResources.Costo
                                                                    </span>
                                                                </th>
                                                                <th class="EstatusHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258487" data-field-id="Detalle_Suscripciones_EmpresaEstatus" data-field-name="@Resources.Detalle_Suscripciones_EmpresaResources.Estatus" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Suscripciones_EmpresaResources.Estatus">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Suscripciones_EmpresaResources.Estatus
                                                                    </span>
                                                                </th>
                                                                <th class="Beneficiarios_extra_por_titularHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="261306" data-field-id="Detalle_Suscripciones_EmpresaBeneficiarios_extra_por_titular" data-field-name="@Resources.Detalle_Suscripciones_EmpresaResources.Beneficiarios_extra_por_titular" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Suscripciones_EmpresaResources.Beneficiarios_extra_por_titular">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Suscripciones_EmpresaResources.Beneficiarios_extra_por_titular
                                                                    </span>
                                                                </th>

                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="divPagos">
                                            <div class="ibox-title">
                                                <h5>@Resources.EmpresasResources.Pagos</h5>
                                                <div class="ibox-tools">
                                                </div>
                                            </div>
                                            <div class="ibox-content">
                                                <div class="">
                                                    @if (permissionDetalle_Pagos_Empresa.New && !ViewBag.Consult)
                                                    {
                                    <a onclick="Detalle_Pagos_EmpresafnClickAddRow();" href="javascript:void(0);" title="@Resources.Resources.AddNewRow" class="Detalle_Pagos_EmpresaAddRow btn btn-primary">
                                        <i class="glyphicon glyphicon-plus"></i>
                                    </a>}
                                                    <button onclick="EmpresasGetBusinessRule('', 'Al Guardar o al Eliminar una Row', '258521')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#EmpresasBusinessRule-form">
                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToCreateGrid">
                                                            <i class="fa fa-cogs fa-spin"></i>
                                                        </a>
                                                    </button>
                                                    @if (permissionDetalle_Pagos_Empresa.New && !ViewBag.Consult)
                                                    {
                                    <a onclick="Detalle_Pagos_EmpresafnOpenAddRowPopUp();" data-toggle="modal" title="@Resources.Resources.AddNewRow" data-target="#AddDetalle_Pagos_Empresa-form" data-backdrop="static" data-keyboard="false" class="btn_mrpopup btn btn-primary">
                                        <i class="glyphicon glyphicon-new-window"></i>
                                    </a>}
                                                </div>

                                                <br />

                                                <div style='overflow-x: auto;'>
                                                    <table class="table table-striped table-bordered table-hover childValidateTable" id="Detalle_Pagos_EmpresaGrid">
                                                        <thead>
                                                            <tr>
                                                                <th class="ActionHeader"><span>@Resources.Resources.Actions</span></th>


                                                                <th class="SuscripcionHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258490" data-field-id="Detalle_Pagos_EmpresaSuscripcion" data-field-name="@Resources.Detalle_Pagos_EmpresaResources.Suscripcion" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Pagos_EmpresaResources.Suscripcion">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Pagos_EmpresaResources.Suscripcion
                                                                    </span>
                                                                </th>
                                                                <th class="Concepto_de_PagoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258491" data-field-id="Detalle_Pagos_EmpresaConcepto_de_Pago" data-field-name="@Resources.Detalle_Pagos_EmpresaResources.Concepto_de_Pago" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Pagos_EmpresaResources.Concepto_de_Pago">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Pagos_EmpresaResources.Concepto_de_Pago
                                                                    </span>
                                                                </th>
                                                                <th class="Fecha_de_SuscripcionHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258497" data-field-id="Detalle_Pagos_EmpresaFecha_de_Suscripcion" data-field-name="@Resources.Detalle_Pagos_EmpresaResources.Fecha_de_Suscripcion" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Pagos_EmpresaResources.Fecha_de_Suscripcion">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Pagos_EmpresaResources.Fecha_de_Suscripcion
                                                                    </span>
                                                                </th>
                                                                <th class="Numero_de_PagoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258498" data-field-id="Detalle_Pagos_EmpresaNumero_de_Pago" data-field-name="@Resources.Detalle_Pagos_EmpresaResources.Numero_de_Pago" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Pagos_EmpresaResources.Numero_de_Pago">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>
                                                                        @Resources.Detalle_Pagos_EmpresaResources.Numero_de_Pago
                                                                    </span>
                                                                </th>
                                                                <th class="De_Total_de_PagosHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258499" data-field-id="Detalle_Pagos_EmpresaDe_Total_de_Pagos" data-field-name="@Resources.Detalle_Pagos_EmpresaResources.De_Total_de_Pagos" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Pagos_EmpresaResources.De_Total_de_Pagos">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>
                                                                        @Resources.Detalle_Pagos_EmpresaResources.De_Total_de_Pagos
                                                                    </span>
                                                                </th>
                                                                <th class="Fecha_Limite_de_PagoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258492" data-field-id="Detalle_Pagos_EmpresaFecha_Limite_de_Pago" data-field-name="@Resources.Detalle_Pagos_EmpresaResources.Fecha_Limite_de_Pago" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Pagos_EmpresaResources.Fecha_Limite_de_Pago">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Pagos_EmpresaResources.Fecha_Limite_de_Pago
                                                                    </span>
                                                                </th>
                                                                <th class="Recordatorio_diasHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258493" data-field-id="Detalle_Pagos_EmpresaRecordatorio_dias" data-field-name="@Resources.Detalle_Pagos_EmpresaResources.Recordatorio_dias" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Pagos_EmpresaResources.Recordatorio_dias">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>
                                                                        @Resources.Detalle_Pagos_EmpresaResources.Recordatorio_dias
                                                                    </span>
                                                                </th>
                                                                <th class="Forma_de_PagoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258494" data-field-id="Detalle_Pagos_EmpresaForma_de_Pago" data-field-name="@Resources.Detalle_Pagos_EmpresaResources.Forma_de_Pago" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Pagos_EmpresaResources.Forma_de_Pago">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Pagos_EmpresaResources.Forma_de_Pago
                                                                    </span>
                                                                </th>
                                                                <th class="Fecha_de_PagoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258495" data-field-id="Detalle_Pagos_EmpresaFecha_de_Pago" data-field-name="@Resources.Detalle_Pagos_EmpresaResources.Fecha_de_Pago" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Pagos_EmpresaResources.Fecha_de_Pago">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Pagos_EmpresaResources.Fecha_de_Pago
                                                                    </span>
                                                                </th>
                                                                <th class="EstatusHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258496" data-field-id="Detalle_Pagos_EmpresaEstatus" data-field-name="@Resources.Detalle_Pagos_EmpresaResources.Estatus" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Pagos_EmpresaResources.Estatus">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Pagos_EmpresaResources.Estatus
                                                                    </span>
                                                                </th>

                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div id="tabDocumentacion" class="tab-pane">
                                    <div class="panel-body">
                                        @if (attachedFileCedula_Fiscal != null && attachedFileCedula_Fiscal.File_Id > 0)
                                        {
                        <div class="form-group" id="divAttachmentCedula_Fiscal">
                            <label class="col-sm-2 control-label">@Resources.Resources.PreviouslyAttachedFile</label>
                            <div class="col-sm-8 Documentacion" data-field-id="Cedula_Fiscal" data-attribute="258338" data-field-name="@Resources.EmpresasResources.Cedula_Fiscal">
                                <a href="@Url.Content("~/Frontal/Empresas/GetFile")?id=@attachedFileCedula_Fiscal.File_Id" target="_blank">@attachedFileCedula_Fiscal.Description</a>
                                <img src="@Url.Content("~/Content/Images/RemoveAttachment.png")" onclick="RemoveAttachmentMainCedula_Fiscal('@attachedFileCedula_Fiscal.File_Id')" />
                            </div>
                            <input id="hdnRemoveCedula_Fiscal" name="RemoveCedula_Fiscal" value="0" type="hidden" />
                            <input class="form-control col-md-12 Documentacion" id="hdnAttachedCedula_Fiscal" type="hidden" name="Cedula_Fiscal" value="@Model.Cedula_Fiscal">
                        </div>}
                                        <div class="form-group" id="divCedula_Fiscal">
                                            <label class="col-sm-2 control-label">@Resources.EmpresasResources.Cedula_Fiscal</label>
                                            <div class="col-sm-8" data-field-id="Cedula_Fiscal" data-attribute="258338" data-field-name="@Resources.EmpresasResources.Cedula_Fiscal">
                                                <input type="file" name="Cedula_FiscalFile" id="Cedula_FiscalFile" class="form-control" />
                                            </div>
                                        </div>
                                        <div id="divContratos">
                                            <div class="ibox-title">
                                                <h5>@Resources.EmpresasResources.Contratos</h5>
                                                <div class="ibox-tools">
                                                </div>
                                            </div>
                                            <div class="ibox-content">
                                                <div class="">
                                                    @if (permissionDetalle_Contratos_Empresa.New && !ViewBag.Consult)
                                                    {
                                    <a onclick="Detalle_Contratos_EmpresafnClickAddRow();" href="javascript:void(0);" title="@Resources.Resources.AddNewRow" class="Detalle_Contratos_EmpresaAddRow btn btn-primary">
                                        <i class="glyphicon glyphicon-plus"></i>
                                    </a>}
                                                    <button onclick="EmpresasGetBusinessRule('', 'Al Guardar o al Eliminar una Row', '258522')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#EmpresasBusinessRule-form">
                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToCreateGrid">
                                                            <i class="fa fa-cogs fa-spin"></i>
                                                        </a>
                                                    </button>
                                                    @if (permissionDetalle_Contratos_Empresa.New && !ViewBag.Consult)
                                                    {
                                    <a onclick="Detalle_Contratos_EmpresafnOpenAddRowPopUp();" data-toggle="modal" title="@Resources.Resources.AddNewRow" data-target="#AddDetalle_Contratos_Empresa-form" data-backdrop="static" data-keyboard="false" class="btn_mrpopup btn btn-primary">
                                        <i class="glyphicon glyphicon-new-window"></i>
                                    </a>}
                                                </div>

                                                <br />

                                                <div style='overflow-x: auto;'>
                                                    <table class="table table-striped table-bordered table-hover childValidateTable" id="Detalle_Contratos_EmpresaGrid">
                                                        <thead>
                                                            <tr>
                                                                <th class="ActionHeader"><span>@Resources.Resources.Actions</span></th>


                                                                <th class="SuscripcionHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258513" data-field-id="Detalle_Contratos_EmpresaSuscripcion" data-field-name="@Resources.Detalle_Contratos_EmpresaResources.Suscripcion" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Contratos_EmpresaResources.Suscripcion">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Contratos_EmpresaResources.Suscripcion
                                                                    </span>
                                                                </th>
                                                                <th class="Tipo_de_ContratoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258514" data-field-id="Detalle_Contratos_EmpresaTipo_de_Contrato" data-field-name="@Resources.Detalle_Contratos_EmpresaResources.Tipo_de_Contrato" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Contratos_EmpresaResources.Tipo_de_Contrato">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Contratos_EmpresaResources.Tipo_de_Contrato
                                                                    </span>
                                                                </th>
                                                                <th class="DocumentoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258515" data-field-id="Detalle_Contratos_EmpresaDocumento" data-field-name="@Resources.Detalle_Contratos_EmpresaResources.Documento" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Contratos_EmpresaResources.Documento">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Contratos_EmpresaResources.Documento
                                                                    </span>
                                                                </th>
                                                                <th class="Fecha_de_Firma_de_ContratoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258516" data-field-id="Detalle_Contratos_EmpresaFecha_de_Firma_de_Contrato" data-field-name="@Resources.Detalle_Contratos_EmpresaResources.Fecha_de_Firma_de_Contrato" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Contratos_EmpresaResources.Fecha_de_Firma_de_Contrato">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Contratos_EmpresaResources.Fecha_de_Firma_de_Contrato
                                                                    </span>
                                                                </th>

                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div id="tabBeneficiarios" class="tab-pane">
                                    <div class="panel-body">
                                        <div id="divBeneficiarios_Titulares">
                                            <div class="ibox-title">
                                                <h5>@Resources.EmpresasResources.Beneficiarios_Titulares</h5>
                                                <div class="ibox-tools">
                                                </div>
                                            </div>
                                            <div class="ibox-content">
                                                <div class="">
                                                    @if (permissionDetalle_Registro_Beneficiarios_Titulares_Empresa.New && !ViewBag.Consult)
                                                    {
                                                        <a onclick="Detalle_Registro_Beneficiarios_Titulares_EmpresafnClickAddRow();" href="javascript:void(0);" title="@Resources.Resources.AddNewRow" class="Detalle_Registro_Beneficiarios_Titulares_EmpresaAddRow btn btn-primary">
                                                            <i class="glyphicon glyphicon-plus"></i>
                                                        </a>}
                                                    <button onclick="EmpresasGetBusinessRule('', 'Al Guardar o al Eliminar una Row', '261250')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#EmpresasBusinessRule-form">
                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToCreateGrid">
                                                            <i class="fa fa-cogs fa-spin"></i>
                                                        </a>
                                                    </button>
                                                    @if (permissionDetalle_Registro_Beneficiarios_Titulares_Empresa.New && !ViewBag.Consult)
                                                    {
                                                        <a onclick="Detalle_Registro_Beneficiarios_Titulares_EmpresafnOpenAddRowPopUp();" data-toggle="modal" title="@Resources.Resources.AddNewRow" data-target="#AddDetalle_Registro_Beneficiarios_Titulares_Empresa-form" data-backdrop="static" data-keyboard="false" class="btn_mrpopup btn btn-primary">
                                                            <i class="glyphicon glyphicon-new-window"></i>
                                                        </a>}
                                                    @* CODMANINI-ADD *@
                                                    @if (permissionDetalle_Registro_Beneficiarios_Empresa.New && !ViewBag.Consult)
                                                    {
                                                        <a onclick="Detalle_Registro_Beneficiarios_SubirExcel();" title="Subir Archivo de Excel" class="btn_mrpopup btn btn-primary">
                                                            <i class="fa fa-file-excel-o"></i>
                                                        </a>}
                                                    @* CODMANFIN-ADD *@
                                                </div>

                                                <br />

                                                <div style='overflow-x: auto;'>
                                                    <table class="table table-striped table-bordered table-hover childValidateTable" id="Detalle_Registro_Beneficiarios_Titulares_EmpresaGrid">
                                                        <thead>
                                                            <tr>
                                                                <th class="ActionHeader"><span>@Resources.Resources.Actions</span></th>


                                                                <th class="Numero_de_Empleado_TitularHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="261253" data-field-id="Detalle_Registro_Beneficiarios_Titulares_EmpresaNumero_de_Empleado_Titular" data-field-name="@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Numero_de_Empleado_Titular" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Numero_de_Empleado_Titular">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Numero_de_Empleado_Titular
                                                                    </span>
                                                                </th>
                                                                <th class="UsuarioHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="261254" data-field-id="Detalle_Registro_Beneficiarios_Titulares_EmpresaUsuario" data-field-name="@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Usuario" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Usuario">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Usuario
                                                                    </span>
                                                                </th>
                                                                <th class="NombresHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="261255" data-field-id="Detalle_Registro_Beneficiarios_Titulares_EmpresaNombres" data-field-name="@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Nombres" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Nombres">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Nombres
                                                                    </span>
                                                                </th>
                                                                <th class="Apellido_PaternoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="261256" data-field-id="Detalle_Registro_Beneficiarios_Titulares_EmpresaApellido_Paterno" data-field-name="@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Apellido_Paterno" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Apellido_Paterno">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Apellido_Paterno
                                                                    </span>
                                                                </th>
                                                                <th class="Apellido_MaternoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="261257" data-field-id="Detalle_Registro_Beneficiarios_Titulares_EmpresaApellido_Materno" data-field-name="@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Apellido_Materno" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Apellido_Materno">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Apellido_Materno
                                                                    </span>
                                                                </th>
                                                                <th class="Nombre_CompletoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="261258" data-field-id="Detalle_Registro_Beneficiarios_Titulares_EmpresaNombre_Completo" data-field-name="@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Nombre_Completo" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Nombre_Completo">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Nombre_Completo
                                                                    </span>
                                                                </th>
                                                                <th class="EmailHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="261259" data-field-id="Detalle_Registro_Beneficiarios_Titulares_EmpresaEmail" data-field-name="@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Email" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Email">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Email
                                                                    </span>
                                                                </th>
                                                                <th class="ActivoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="261260" data-field-id="Detalle_Registro_Beneficiarios_Titulares_EmpresaActivo" data-field-name="@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Activo" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Activo">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Activo
                                                                    </span>
                                                                </th>
                                                                <th class="SuscripcionHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="261261" data-field-id="Detalle_Registro_Beneficiarios_Titulares_EmpresaSuscripcion" data-field-name="@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Suscripcion" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Suscripcion">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Suscripcion
                                                                    </span>
                                                                </th>
                                                                <th class="EstatusHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="261263" data-field-id="Detalle_Registro_Beneficiarios_Titulares_EmpresaEstatus" data-field-name="@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Estatus" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Estatus">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_Titulares_EmpresaResources.Estatus
                                                                    </span>
                                                                </th>

                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="divBeneficiarios">
                                            <div class="ibox-title">
                                                <h5>@Resources.EmpresasResources.Beneficiarios</h5>
                                                <div class="ibox-tools">
                                                </div>
                                            </div>
                                            <div class="ibox-content">
                                                <div class="">
                                                    @if (permissionDetalle_Registro_Beneficiarios_Empresa.New && !ViewBag.Consult)
                                                    {
                                    <a onclick="Detalle_Registro_Beneficiarios_EmpresafnClickAddRow();" href="javascript:void(0);" title="@Resources.Resources.AddNewRow" class="Detalle_Registro_Beneficiarios_EmpresaAddRow btn btn-primary">
                                        <i class="glyphicon glyphicon-plus"></i>
                                    </a>}
                                                    <button onclick="EmpresasGetBusinessRule('', 'Al Guardar o al Eliminar una Row', '258948')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#EmpresasBusinessRule-form">
                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToCreateGrid">
                                                            <i class="fa fa-cogs fa-spin"></i>
                                                        </a>
                                                    </button>
                                                    @if (permissionDetalle_Registro_Beneficiarios_Empresa.New && !ViewBag.Consult)
                                                    {
                                    <a onclick="Detalle_Registro_Beneficiarios_EmpresafnOpenAddRowPopUp();" data-toggle="modal" title="@Resources.Resources.AddNewRow" data-target="#AddDetalle_Registro_Beneficiarios_Empresa-form" data-backdrop="static" data-keyboard="false" class="btn_mrpopup btn btn-primary">
                                        <i class="glyphicon glyphicon-new-window"></i>
                                    </a>}
                                                </div>

                                                <br />

                                                <div style='overflow-x: auto;'>
                                                    <table class="table table-striped table-bordered table-hover childValidateTable" id="Detalle_Registro_Beneficiarios_EmpresaGrid">
                                                        <thead>
                                                            <tr>
                                                                <th class="ActionHeader"><span>@Resources.Resources.Actions</span></th>


                                                                <th class="Numero_de_Empleado_TitularHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="261236" data-field-id="Detalle_Registro_Beneficiarios_EmpresaNumero_de_Empleado_Titular" data-field-name="@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Numero_de_Empleado_Titular" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Numero_de_Empleado_Titular">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Numero_de_Empleado_Titular
                                                                    </span>
                                                                </th>
                                                                <th class="Numero_de_EmpleadoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258937" data-field-id="Detalle_Registro_Beneficiarios_EmpresaNumero_de_Empleado" data-field-name="@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Numero_de_Empleado" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Numero_de_Empleado">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Numero_de_Empleado
                                                                    </span>
                                                                </th>
                                                                <th class="UsuarioHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258938" data-field-id="Detalle_Registro_Beneficiarios_EmpresaUsuario" data-field-name="@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Usuario" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Usuario">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Usuario
                                                                    </span>
                                                                </th>
                                                                <th class="ActivoHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258944" data-field-id="Detalle_Registro_Beneficiarios_EmpresaActivo" data-field-name="@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Activo" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Activo">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Activo
                                                                    </span>
                                                                </th>
                                                                <th class="SuscripcionHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258945" data-field-id="Detalle_Registro_Beneficiarios_EmpresaSuscripcion" data-field-name="@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Suscripcion" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Suscripcion">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Suscripcion
                                                                    </span>
                                                                </th>
                                                                <th class="EstatusHeader">
                                                                    <span>
                                                                        <button type="button" data-attribute="258947" data-field-id="Detalle_Registro_Beneficiarios_EmpresaEstatus" data-field-name="@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Estatus" data-toggle="modal" data-target="#EmpresasBusinessRule-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Estatus">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>@Resources.Detalle_Registro_Beneficiarios_EmpresaResources.Estatus
                                                                    </span>
                                                                </th>

                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <br />
                            <div class="form-actions fluid">
                                <input type="hidden" value="@Model.Folio" id="ReferenceFolio" />
                                <input type="hidden" value="@Model.Folio" name="Folio" id="FolioId" />
                                <input type="hidden" value="@ViewBag.Operation" name="Operation" id="Operation" />
                                @if (!ViewBag.Consult)
                                {
                                    <input type="button" value="@Resources.Resources.Guardar" id="EmpresasGuardar" class="btn btn-w-m btn-primary btn_save" onclick="return checkClientValidate('EmpresasCreateForm');" />
                                    <button onclick="EmpresasGetBusinessRule('', 'Al Guardar o al Cerrar la Pantalla', '2')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#EmpresasBusinessRule-form">
                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleBeforeSave">
                                            <i class="fa fa-cogs fa-spin"></i>
                                        </a>
                                    </button>

                                    <input type="button" value="@Resources.Resources.GuardarNuevo" id="EmpresasGuardarYNuevo" onclick="return checkClientValidate('EmpresasCreateForm');" data-bind="    click: saveAndNew" class="btn btn-w-m btn-success btn_saveandnew" />
                                    <input type="button" value="@Resources.Resources.GuardarCopia" id="EmpresasGuardarYCopia" onclick="return checkClientValidate('EmpresasCreateForm');" data-bind="    click: saveAndNew" class="btn btn-w-m btn-success btn_saveandcopy" />
                                    if (permission.Configure)
                                    {
                                        <a title="@Resources.Resources.Configure" id="ConfigureSave" name="ConfigureSave" onclick="SaveElementAttributes()" class="btn btn-success btn-configure">@Resources.Resources.Configure</a>
                                    }
                                }

                                <input type="hidden" id="hdnConfigureType" />
                                <input type="hidden" id="hdnEmpresasBusinessRuleFieldId" />
                                <input type="hidden" id="hdnEmpresasBusinessRuleFieldName" />
                                <input type="hidden" id="hdnEmpresasBusinessRuleAttribute" />

                                <input type="button" value="@Resources.Resources.Cancelar" id="EmpresasCancelar" name="EmpresasCancelar" class="btn btn-danger noConsult btn_cancelar" data-bind="click: cancel" tabindex="16" />

                                <button onclick="EmpresasGetBusinessRule('', 'Al Cancelar', '4')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#EmpresasBusinessRule-form">
                                    <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToBegin">
                                        <i class="fa fa-cogs fa-spin"></i>
                                    </a>
                                </button>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
    <input id="hdnApplicationDirectory" type="hidden" value="@Url.Content("~/")" />

    @section Styles {
        <link href="@Url.Content("~/Content/BootstrapDatePicker/bootstrap-datetimepicker.min.css")" rel="stylesheet" />
        @Styles.Render("~/Content/plugins/dataTables/dataTablesStyles")
        @Styles.Render("~/plugins/dateRangeStyles")
        @Styles.Render("~/plugins/dataPickerStyles")
        @Styles.Render("~/plugins/clockpickerStyles")
        @Styles.Render("~/plugins/awesomeCheckboxStyles")
        @Styles.Render("~/plugins/select2Styles")
        @Styles.Render("~/Content/plugins/chosen/chosenStyles")
        <style>
                    .dataTables_filter {
                        display: none;
                    }

                    .select2-results {
                        background-color: #fff;
                    }

                    .select2-container .select2-dropdown {
                        height: auto !important;
                    }

                    div.dataTables_info {
                        display: inline-block;
                        float: right;
                    }
                    /*i {
                font-size: 25px !important;
                display: block;
                color: #676a6c;
                margin-left: 6px;
                margin-right: 6px;
            }*/

                    .fullWidth {
                        width: 100%;
                    }
        </style>
    }

    <script type="text/javascript" src="~/Uploads/Scripts/Empresas.js?v=@DateTime.Now.ToString("ddMMyyyyhhmmss")"></script>
    <script type="text/javascript" src="~/Scripts/Custom/EmpresasGeneral.js?v=@DateTime.Now.ToString("ddMMyyyyhhmmss")"></script>
    <script type="text/javascript" src="~/Uploads/Scripts/Rules/EmpresasCreateRules.js?v=@DateTime.Now.ToString("ddMMyyyyhhmmss")"></script>
    <script src="~/Scripts/plugins/chosen/chosen.jquery.js"></script>

    @section Scripts {


        <script type="text/javascript">

        function RemoveAttachmentMainCedula_Fiscal () {
            $("#hdnRemoveCedula_Fiscal").val("1");
            $("#divAttachmentCedula_Fiscal").hide();
        }


            /*CODMANINI-ADD*/
        //MTG  20/07/2020  funciones para gestionar la carga del archivo
         function Detalle_Registro_Beneficiarios_SubirExcel() {
             var showme = document.getElementById("importModal");
             showme.style.display = "block";
             showme.className = "modal fade in";
         }

        function OcultarModalImportar() {
            var hiddeme = document.getElementById("importModal");
            hiddeme.style.display = "none";
            hiddeme.className = "modal fade";
        }

        var progressBarStart = function () {
            $("#progressbar_container").show();
        }

        var progressBarUpdate = function (percentage) {
            $('#progressbar_label').html(percentage + "%");
            $("#progressbar").width(percentage + "%");
        }

        var progressBarComplete = function () {
            $("#progressbar_container").fadeOut(500);
        }

        var file;

        $('#fileInput').change(function (e) {
            file = e.target.files[0];
        });

        var uploadCompleted = function () {
            var formData = new FormData();
            formData.append('fileName', file.name);
            formData.append('completed', true);

            var xhr2 = new XMLHttpRequest();
            xhr2.onload = function () {
                progressBarUpdate(100);
                progressBarComplete();
            }
            xhr2.open("POST", "@Url.Content("~/Frontal/Empresas/UploadComplete")" + "?fileName=" + file.name + "&complete=" + 1, true);
            //xhr2.onload = function () { target.parseJSON(req, url) };
            xhr2.send(formData);
            ObtenResultProcesado();
        }


        function ObtenResultProcesado() {
            $.ajax({
                url: "@Url.Content("~/Frontal/Empresas/ObtenTableExcelProcess")",
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {

                    Detalle_Registro_Beneficiarios_Titulares_EmpresaDataDataTable = result.data;
                    showDetalle_Registro_Beneficiarios_Titulares_EmpresaGrid(result.data);
                    $('#Detalle_Registro_Beneficiarios_Titulares_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                    $('#Detalle_Registro_Beneficiarios_Titulares_EmpresaGrid .gridDatePicker').attr("readonly", "");
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }


        var multiUpload = function (count, counter, blob, completed, start, end, bytesPerChunk) {
            counter = counter + 1;
            if (counter <= count) {
                var chunk = blob.slice(start, end);
                var xhr = new XMLHttpRequest();
                xhr.onload = function () {
                    start = end;
                    end = start + bytesPerChunk;
                    if (count == counter) {
                        uploadCompleted();
                    } else {
                        var percentage = (counter / count) * 100;
                        progressBarUpdate(percentage);
                        multiUpload(count, counter, blob, completed, start, end, bytesPerChunk);
                    }
                }
                xhr.open("POST","@Url.Content("~/Frontal/Empresas/MultiUpload")" + "?id=" + counter.toString() + "&fileName=" + file.name, true);
                xhr.send(chunk);
                alert("Carga realizada correctamente");
                OcultarModalImportar();
            }
            }

        $("#btnUpload").click(function () {
            var blob = file;
            var bytesPerChunk = 1048576;
            var size = blob.size;

            var start = 0;
            var end = bytesPerChunk;
            var completed = 0;
            var count = size % bytesPerChunk == 0 ? size / bytesPerChunk : Math.floor(size / bytesPerChunk) + 1;
            var counter = 0;
            progressBarStart();
            multiUpload(count, counter, blob, completed, start, end, bytesPerChunk);
        });
        //***************************************************************************

     /*CODMANFIN-ADD*/




	function GetTraduction(text) {
         switch (text.toLowerCase()) {
            case 'edit':
                return "@Resources.Resources.Edit";
            case 'delete':
                return "@Resources.Resources.Delete";
            case 'required':
                return "@Resources.Resources.Required";
            case 'notrequired':
                return "@Resources.Resources.NotRequired";
            case 'enabled':
                return "@Resources.Resources.Enabled";
            case 'disabled':
                return "@Resources.Resources.Disabled";
            case 'visible':
                return "@Resources.Resources.Visible";
            case 'botvisible':
                return "@Resources.Resources.InVisible";
            case 'messagednoinvisible':
                return "@Resources.Resources.messagedNoInVisible";
            case 'messagednoreadonly':
                return "@Resources.Resources.messagedNoReadOnly";
            case 'defaultvalue':
                return "@Resources.Resources.DefaultValue";
            case 'helptext':
                return "@Resources.Resources.HelpText";
            default:
                return "";
        }
    }

	    var viewInEframe =  ('@ViewBag.viewInEframe' == 'True');
	    var isPartial = ('@ViewBag.IsPartial' == 'True');
        var isMR = ('@ViewBag.isMR' == 'True');
        var nameMR = '@ViewBag.nameMR';
		var nameAttribute = '@ViewBag.nameAttribute';
		var Tab_Datos_Generales = true;

		var Tab_Datos_de_Contacto = true;

		var Tab_Datos_Fiscales = true;

		var Tab_Suscripcion = true;

		var Tab_Documentacion = true;

		var Tab_Beneficiarios = true;


        $(document).ready(function () {
            $('#ObjectId').val('44282');





            GetDetalle_Contactos_Empresa_areas_EmpresasItem();



            GetDetalle_Contactos_Empresa_EstatusItem();
            GetDetalle_Contactos_Empresa_Spartan_UserItem();

              showDetalle_Contactos_EmpresaGrid(null);


            GetDetalle_Suscripciones_Empresa_Planes_de_SuscripcionItem();



            GetDetalle_Suscripciones_Empresa_Frecuencia_de_pago_EmpresasItem();

            GetDetalle_Suscripciones_Empresa_Estatus_de_SuscripcionItem();


              showDetalle_Suscripciones_EmpresaGrid(null);

            GetDetalle_Pagos_Empresa_Planes_de_SuscripcionItem();






            GetDetalle_Pagos_Empresa_Formas_de_PagoItem();

            GetDetalle_Pagos_Empresa_Estatus_de_PagoItem();

              showDetalle_Pagos_EmpresaGrid(null);

            GetDetalle_Contratos_Empresa_Planes_de_SuscripcionItem();
            GetDetalle_Contratos_Empresa_Tipos_de_ContratoItem();



              showDetalle_Contratos_EmpresaGrid(null);


            GetDetalle_Registro_Beneficiarios_Titulares_Empresa_Spartan_UserItem();






            GetDetalle_Registro_Beneficiarios_Titulares_Empresa_Planes_de_SuscripcionItem();
            GetDetalle_Registro_Beneficiarios_Titulares_Empresa_EstatusItem();

              showDetalle_Registro_Beneficiarios_Titulares_EmpresaGrid(null);



            GetDetalle_Registro_Beneficiarios_Empresa_Spartan_UserItem();

            GetDetalle_Registro_Beneficiarios_Empresa_Planes_de_SuscripcionItem();
            GetDetalle_Registro_Beneficiarios_Empresa_EstatusItem();

              showDetalle_Registro_Beneficiarios_EmpresaGrid(null);



             @if(ViewBag.IsNew)
            {
                <text>$('input:checkbox').prop('checked', false);</text>
            }
			else
            {
                <text>
				if (Tab_Datos_Generales)
					Fill_Datos_Generales();

				if (Tab_Datos_de_Contacto)
					Fill_Datos_de_Contacto();

				if (Tab_Datos_Fiscales)
					Fill_Datos_Fiscales();

				if (Tab_Suscripcion)
					Fill_Suscripcion();

				if (Tab_Documentacion)
					Fill_Documentacion();

				if (Tab_Beneficiarios)
					Fill_Beneficiarios();


                </text>
             }
             EjecutarValidacionesAlComienzo();
                         $('#Fecha_de_Registro').datepicker({
                todayBtn: "linked",
                keyboardNavigation: false,
                forceParse: false,
                calendarWeeks: true,
                autoclose: true,
                format: "@ConfigurationProperty.DateFormatDatePicker"
            });
            $('#Hora_de_Registro').clockpicker();


            initiateUIControls();
			$('a').tooltip();
			$('.loading').css('display', 'none');

			 if (viewInEframe) {
                $('#EmpresasGuardarYNuevo').hide();
                $('#EmpresasGuardarYCopia').hide();
                $('#EmpresasCancelar').hide();
                $('#ConfigureSave').hide();
                $('#EmpresasGuardar').val('Actualizar Seccion ' + '@Resources.EmpresasResources.Empresas' )
            }




        });

        var Detalle_Contactos_EmpresainsertRowCurrentIndex = -1;
        var Detalle_Contactos_EmpresaDataDataTable;
        function getDetalle_Contactos_EmpresaData() {
            $.ajax({
                url: "@Url.Content("~/Frontal/Empresas/GetDetalle_Contactos_Empresa")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceFolio").val() != "" ? "&RelationId=" + $("#ReferenceFolio").val() : ""),
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                    Detalle_Contactos_EmpresaDataDataTable = result.data;
                    showDetalle_Contactos_EmpresaGrid(result.data);
                    $('#Detalle_Contactos_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                    $('#Detalle_Contactos_EmpresaGrid .gridDatePicker').attr("readonly", "");
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }
        function Detalle_Contactos_EmpresaGetUpdateRowControls(data, nameOfTable, rowIndex) {

            var columnData = [];
            var counter = 0;
            var inputData = "<input type='text' class='fullWidth form-control' />";

            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Nombre_completo)).addClass('Nombre_completo').attr('id', nameOfTable + 'Nombre_completo' + rowIndex).attr('data-field', 'Nombre_completo');
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Correo)).addClass('Correo').attr('id', nameOfTable + 'Correo' + rowIndex).attr('data-field', 'Correo');
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Telefono)).addClass('Telefono').attr('id', nameOfTable + 'Telefono' + rowIndex).attr('data-field', 'Telefono');
              columnData[counter++] = $($($.parseHTML(GetGridCheckBox())).prop('checked', (data.Contacto_Principal=="true" || data.Contacto_Principal==true)? 'checked': ''? 'checked': '')).addClass('Contacto_Principal').attr('id', nameOfTable + 'Contacto_Principal' + rowIndex).attr('data-field', 'Contacto_Principal');
           columnData[counter++] = $($(GetDetalle_Contactos_Empresa_areas_EmpresasDropDown()).val(data.Area)).addClass('Area inputNumber').attr('id', nameOfTable + 'Area' + rowIndex).attr('data-field', 'Area').after($.parseHTML(addNew('Detalle_Contactos_Empresa', 'areas_Empresas','Area', 258506)));
              columnData[counter++] = $($($.parseHTML(GetGridCheckBox())).prop('checked', (data.Acceso_al_Sistema=="true" || data.Acceso_al_Sistema==true)? 'checked': ''? 'checked': '')).addClass('Acceso_al_Sistema').attr('id', nameOfTable + 'Acceso_al_Sistema' + rowIndex).attr('data-field', 'Acceso_al_Sistema');
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Nombre_de_usuario)).addClass('Nombre_de_usuario').attr('id', nameOfTable + 'Nombre_de_usuario' + rowIndex).attr('data-field', 'Nombre_de_usuario');
              columnData[counter++] = $($($.parseHTML(GetGridCheckBox())).prop('checked', (data.Recibe_Alertas=="true" || data.Recibe_Alertas==true)? 'checked': ''? 'checked': '')).addClass('Recibe_Alertas').attr('id', nameOfTable + 'Recibe_Alertas' + rowIndex).attr('data-field', 'Recibe_Alertas');
           columnData[counter++] = $($(GetDetalle_Contactos_Empresa_EstatusDropDown()).val(data.Estatus)).addClass('Estatus inputNumber').attr('id', nameOfTable + 'Estatus' + rowIndex).attr('data-field', 'Estatus').after($.parseHTML(addNew('Detalle_Contactos_Empresa', 'Estatus','Estatus', 258510)));
           columnData[counter++] = $($(GetDetalle_Contactos_Empresa_Spartan_UserDropDown()).val(data.Folio_Usuario)).addClass('Folio_Usuario inputNumber').attr('id', nameOfTable + 'Folio_Usuario' + rowIndex).attr('data-field', 'Folio_Usuario').after($.parseHTML(addNew('Detalle_Contactos_Empresa', 'Spartan_User','Folio_Usuario', 260538)));

            return columnData;
        }



        function GetFileInfo(fileData, fileUploadData) {

            var $div = $("<div>");
            if (fileUploadData != null && fileUploadData.files.length > 0) {

                $div.append("<label>" + fileUploadData.files[0].name + "</label>");
                //<i class="fa fa-times-circle" id='removeFileAttachment'>
                $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                    if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
                        var parent = $(this).parent().parent();
                        parent.empty();
                        parent.append("<input type='file'>");
                    }
                }));
                return $div;

            } else if (fileUploadData != null) {
                return $.parseHTML(GetFileUploader());
            } else {
                $div.append("<label>" + fileData.FileName + "</label>");
                $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                    if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
                        var parent = $(this).parent().parent();
                        parent.empty();
                        parent.append("<input type='file'>");
                    }
                }));
                return $div;
            }
        }

        var removedDetalle_Contactos_EmpresaData = [];
        function Detalle_Contactos_EmpresaDeleteRow(rowIndex, row) {
            var rowIndexTable = Detalle_Contactos_EmpresaTable.fnGetPosition($(row).parent().parent()[0]);
            var permission = {
                 Delete: '@permissionDetalle_Contactos_Empresa.Delete' == 'True'
            };
            if (!permission.Delete || isConsultMode)
                return;
            if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
              if (EjecutarValidacionesAlEliminarMRDetalle_Contactos_Empresa('Detalle_Contactos_Empresa_', '_' + rowIndex)) {
                var prevData = Detalle_Contactos_EmpresaTable.fnGetData(rowIndexTable );
                removedDetalle_Contactos_EmpresaData.push(prevData);
                Detalle_Contactos_EmpresaTable.fnDeleteRow(rowIndexTable );
				showDetalle_Contactos_EmpresaGrid(Detalle_Contactos_EmpresaTable.fnGetData());
              }
            }
			initiateUIControls();
        }

        function Detalle_Contactos_EmpresarowCreationGrid(row, data, index) {
            var permission =  {
                 Edit: '@permissionDetalle_Contactos_Empresa.Edit' == 'True',
                 Delete: '@permissionDetalle_Contactos_Empresa.Delete' == 'True'
            };
            setDetalle_Contactos_EmpresaValidation();
            var Detalle_Contactos_EmpresaRowElement = "Detalle_Contactos_Empresa_" + index.toString();
            $(row).addClass(Detalle_Contactos_EmpresaRowElement);
            var nameOfTable='Detalle_Contactos_Empresa_';
            var rowIndex = '_' + index;
            Detalle_Contactos_EmpresainsertRowCurrentIndex = index;

            row.innerHTML = "";

            if (data.IsInsertRow) {

                if (row.childNodes.length != 0) {
                    for (var i = 0; i < row.childNodes.length; i++) {
                        row.childNodes[i].remove();
                    }
                }
                var controls = GetInsertDetalle_Contactos_EmpresaRowControls(index);
                var actionColInsert = $('<td>');

                var abc = "if(dynamicFieldValidation('" + Detalle_Contactos_EmpresaRowElement + "')){ Detalle_Contactos_EmpresaInsertRow(" + index + "); }";
                var insertRowHTML = '<a  data-toggle="tooltip" title="Confirmar Registro" onclick="' + abc + '">';
                $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
				$('<i class="fa fa-times">').appendTo($("<a data-toggle='tooltip' title='Cancelar Registro' onclick='Detalle_Contactos_EmpresaCancelRow(" + index + ")'>").appendTo(actionColInsert));
                actionColInsert.appendTo(row);

                for (i = 0; i < controls.length; i++) {
					var idHeader = $(controls[i]).data('field') + 'Header';
					if($(controls[i]).length > 1){
						idHeader = $($(controls[i])[1]).data('field') + 'Header';
					}

					var classe = ($('#Detalle_Contactos_EmpresaGrid .' + idHeader).hasClass('dt-right') ? "dt-right" : "") + $('#Detalle_Contactos_EmpresaGrid .' + idHeader ).css('display') == 'none' ? " hide" : "";

					if ($(controls[i]).next().length > 0) {
					    var div = $(controls[i]).next();
					    $('<td class="' + classe + '">').append($(controls[i])).append(div).appendTo(row);
					}else
					    $(controls[i]).appendTo($('<td class="' + classe + '">').appendTo(row));

                }
                $('#Detalle_Contactos_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                $('#Detalle_Contactos_EmpresaGrid .gridDatePicker').attr("readonly", "");
                return;
            }

            var actionCol = $('<td>');
			var edit = "<a title='@Resources.Resources.Edit' class='edit-MR' onclick='Detalle_Contactos_EmpresaEditRow(" + index + ", this)'>";
            if (!permission.Edit || isConsultMode)
                edit = "";
            var editPopUp = "<a title='@Resources.Resources.Edit' class='edit-popup-MR' data-toggle='modal' data-target='#AddDetalle_Contactos_Empresa-form' onclick='Detalle_Contactos_EmpresaEditRowPopup(" + index + ", this)'>";
            if (!permission.Edit || isConsultMode)
                editPopUp = "";
            var eliminar = "<a title='@Resources.Resources.Delete' class='eliminar-MR' onclick='Detalle_Contactos_EmpresaDeleteRow(" + index + ", this)'>";
            if (!permission.Delete || isConsultMode)
                eliminar = "";
            $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
            //$('<i class="fa fa-edit">').appendTo($(editPopUp).appendTo(actionCol));
            $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));
			if ($('.Action' + 'Header').css('display') != 'none')
				actionCol.appendTo(row);

            if ($('.Nombre_completo' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Nombre_completo'+rowIndex+'">').text(data.Nombre_completo).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Nombre_completo'+rowIndex+'">').text(data.Nombre_completo).appendTo(row);
            if ($('.Correo' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Correo'+rowIndex+'">').text(data.Correo).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Correo'+rowIndex+'">').text(data.Correo).appendTo(row);
            if ($('.Telefono' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Telefono'+rowIndex+'">').text(data.Telefono).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Telefono'+rowIndex+'">').text(data.Telefono).appendTo(row);
            if ($('.Contacto_Principal' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Contacto_Principal'+rowIndex+'">').text(data.Contacto_Principal).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Contacto_Principal'+rowIndex+'">').text(data.Contacto_Principal).appendTo(row);
            if ($('.Area' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Area'+rowIndex+'">').text(GetDetalle_Contactos_Empresa_areas_EmpresasName(data.Area)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Area'+rowIndex+'">').text(GetDetalle_Contactos_Empresa_areas_EmpresasName(data.Area)).appendTo(row);
            if ($('.Acceso_al_Sistema' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Acceso_al_Sistema'+rowIndex+'">').text(data.Acceso_al_Sistema).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Acceso_al_Sistema'+rowIndex+'">').text(data.Acceso_al_Sistema).appendTo(row);
            if ($('.Nombre_de_usuario' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Nombre_de_usuario'+rowIndex+'">').text(data.Nombre_de_usuario).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Nombre_de_usuario'+rowIndex+'">').text(data.Nombre_de_usuario).appendTo(row);
            if ($('.Recibe_Alertas' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Recibe_Alertas'+rowIndex+'">').text(data.Recibe_Alertas).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Recibe_Alertas'+rowIndex+'">').text(data.Recibe_Alertas).appendTo(row);
            if ($('.Estatus' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Estatus'+rowIndex+'">').text(GetDetalle_Contactos_Empresa_EstatusName(data.Estatus)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Estatus'+rowIndex+'">').text(GetDetalle_Contactos_Empresa_EstatusName(data.Estatus)).appendTo(row);
            if ($('.Folio_Usuario' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Folio_Usuario'+rowIndex+'">').text(GetDetalle_Contactos_Empresa_Spartan_UserName(data.Folio_Usuario)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Folio_Usuario'+rowIndex+'">').text(GetDetalle_Contactos_Empresa_Spartan_UserName(data.Folio_Usuario)).appendTo(row);

        }

        var Detalle_Contactos_EmpresaTable;
        function showDetalle_Contactos_EmpresaGrid(dataSet) {
            //removedDetalle_Contactos_EmpresaData = [];
            Detalle_Contactos_EmpresaTable = $('#Detalle_Contactos_EmpresaGrid').dataTable({
                dom: '<"html5buttons"B>lTgitp',
                buttons: [
                ],
                "createdRow": Detalle_Contactos_EmpresarowCreationGrid,
                "lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
                data: dataSet,
                "columns": [
                    { "data": null, 'visible': true, "orderable": false },

                    { "data": "Nombre_completo", "orderable": false },
                    { "data": "Correo", "orderable": false },
                    { "data": "Telefono", "orderable": false },
                    { "data": "Contacto_Principal", "orderable": false },
                    { "data": "Area", "orderable": false },
                    { "data": "Acceso_al_Sistema", "orderable": false },
                    { "data": "Nombre_de_usuario", "orderable": false },
                    { "data": "Recibe_Alertas", "orderable": false },
                    { "data": "Estatus", "orderable": false },
                    { "data": "Folio_Usuario", "orderable": false },

                ],
                "order": [[0, "asc"]],
                "language": {
                    "lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                    "zeroRecords": "@Resources.Resources.NothingFound",
                    "info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                    "infoEmpty": "@Resources.Resources.NoRecords",
                    "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                    "sSearch": "@Resources.Resources.Search",
                    "paginate": {
                        "previous": "@Resources.Resources.Previous",
                        "next": "@Resources.Resources.Next"
                    }
                },
				"bDestroy": true,
                "fnDrawCallback": function (settings) {
                    setDetalle_Contactos_EmpresaValidation();
                }
            }).on('init.dt', function (e, data) {
                $('a').tooltip();
            }).on('draw.dt', function () {
                $('#Detalle_Contactos_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                $('.gridDatePicker').inputmask("99-99-9999", { "placeholder": "dd-mm-yyyy" });
            });
        }






    var Detalle_Contactos_Empresa_areas_EmpresasItems;
        function GetDetalle_Contactos_Empresa_areas_EmpresasItem() {
            Detalle_Contactos_Empresa_areas_EmpresasItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Contactos_Empresa_areas_EmpresasAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Contactos_Empresa_areas_EmpresasItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }



    var Detalle_Contactos_Empresa_EstatusItems;
        function GetDetalle_Contactos_Empresa_EstatusItem() {
            Detalle_Contactos_Empresa_EstatusItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Contactos_Empresa_EstatusAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Contactos_Empresa_EstatusItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }
    var Detalle_Contactos_Empresa_Spartan_UserItems;
        function GetDetalle_Contactos_Empresa_Spartan_UserItem() {
            Detalle_Contactos_Empresa_Spartan_UserItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Contactos_Empresa_Spartan_UserAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Contactos_Empresa_Spartan_UserItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }

        var Detalle_Contactos_EmpresaData = [];
        var Detalle_Contactos_EmpresadeletedItem = [];
        var Detalle_Contactos_EmpresaDataMain = [];
        var Detalle_Contactos_EmpresaDataMainPages = [];
        var Detalle_Contactos_EmpresanewItemCount = 0;
        var Detalle_Contactos_EmpresamaxItemIndex = 0;
        var Detalle_Contactos_EmpresaDataMainInitialized = false;

        function SendDetalle_Contactos_Empresa(callBack, FolioId) {
            Detalle_Contactos_EmpresaData = GetDetalle_Contactos_EmpresaFromDataTable();

            if (Detalle_Contactos_EmpresaData.length > 0 || $("#ReferenceFolio").val() != FolioId) {
                if ($("#ReferenceFolio").val() != "0" && FolioId ==null)
                    FolioId = $("#ReferenceFolio").val();
                if ($("#ReferenceFolio").val() == '')
                    $("#ReferenceFolio").val('0');
                $.ajax({
                    url: '@Url.Content("~/Frontal/Empresas/PostDetalle_Contactos_Empresa?MasterId=")' + FolioId + "&referenceId=" + $("#ReferenceFolio").val(),
                    type: 'POST',
                    data: GetDetalle_Contactos_Empresa(),
                    async: true,
                    success: function (result) {

                    },
                    error: function (result) {
                        showNotification("@Resources.Resources.ErrorContactingServer", "error");
                    },
                    cache: false,
                    contentType: false,
                    processData: false
                });
            } else {
                //showNotification("@Resources.Resources.SaveSuccess", "success");
                //callBack(FolioId);
            }
            return true;
        }

        function GetAddDetalle_Contactos_EmpresaPopup(currentRowIndex, mode, id) {

            $.ajax({
                url: "@Url.Action("AddDetalle_Contactos_Empresa", "Detalle_Contactos_Empresa")",
                type: "GET",
                async: false,
                data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
                success: function (data) {
                    $(".AddDetalle_Contactos_EmpresaModal").html(data);
                },
                error: function () {

                }
            });

            @*$.get('@Url.Action("AddDetalle_Contactos_Empresa", "Detalle_Contactos_Empresa")', { rowIndex: currentRowIndex }, function (data) {
                $(".AddDetalle_Contactos_EmpresaModal").html(data);
            });*@
        }

        function ShowMessagePendingRowDetalle_Contactos_Empresa()
        {
            //alert('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Contactos"))')
	    showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Contactos"))', "warning");
        }
        var Detalle_Suscripciones_EmpresainsertRowCurrentIndex = -1;
        var Detalle_Suscripciones_EmpresaDataDataTable;
        function getDetalle_Suscripciones_EmpresaData() {
            $.ajax({
                url: "@Url.Content("~/Frontal/Empresas/GetDetalle_Suscripciones_Empresa")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceFolio").val() != "" ? "&RelationId=" + $("#ReferenceFolio").val() : ""),
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                    Detalle_Suscripciones_EmpresaDataDataTable = result.data;
                    showDetalle_Suscripciones_EmpresaGrid(result.data);
                    $('#Detalle_Suscripciones_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                    $('#Detalle_Suscripciones_EmpresaGrid .gridDatePicker').attr("readonly", "");
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }
        function Detalle_Suscripciones_EmpresaGetUpdateRowControls(data, nameOfTable, rowIndex) {

            var columnData = [];
            var counter = 0;
            var inputData = "<input type='text' class='fullWidth form-control' />";

            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Cantidad_de_Beneficiarios)).addClass('Cantidad_de_Beneficiarios inputNumber').attr('id', nameOfTable + 'Cantidad_de_Beneficiarios' + rowIndex).attr('data-field', 'Cantidad_de_Beneficiarios');
           columnData[counter++] = $($(GetDetalle_Suscripciones_Empresa_Planes_de_SuscripcionDropDown()).val(data.Suscripcion)).addClass('Suscripcion inputNumber').attr('id', nameOfTable + 'Suscripcion' + rowIndex).attr('data-field', 'Suscripcion').after($.parseHTML(addNew('Detalle_Suscripciones_Empresa', 'Planes_de_Suscripcion','Suscripcion', 258481)));
            columnData[counter++] = $($($.parseHTML(GetGridDatePicker())).val(data.Fecha_de_inicio)).addClass('Fecha_de_inicio').attr('id', nameOfTable + 'Fecha_de_inicio' + rowIndex).attr('data-field', 'Fecha_de_inicio');
            columnData[counter++] = $($($.parseHTML(GetGridDatePicker())).val(data.Fecha_Fin)).addClass('Fecha_Fin').attr('id', nameOfTable + 'Fecha_Fin' + rowIndex).attr('data-field', 'Fecha_Fin');
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Nombre_de_la_Suscripcion)).addClass('Nombre_de_la_Suscripcion').attr('id', nameOfTable + 'Nombre_de_la_Suscripcion' + rowIndex).attr('data-field', 'Nombre_de_la_Suscripcion');
           columnData[counter++] = $($(GetDetalle_Suscripciones_Empresa_Frecuencia_de_pago_EmpresasDropDown()).val(data.Frecuencia_de_Pago)).addClass('Frecuencia_de_Pago inputNumber').attr('id', nameOfTable + 'Frecuencia_de_Pago' + rowIndex).attr('data-field', 'Frecuencia_de_Pago').after($.parseHTML(addNew('Detalle_Suscripciones_Empresa', 'Frecuencia_de_pago_Empresas','Frecuencia_de_Pago', 258485)));
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Costo)).addClass('Costo').attr('id', nameOfTable + 'Costo' + rowIndex).attr('data-field', 'Costo');
           columnData[counter++] = $($(GetDetalle_Suscripciones_Empresa_Estatus_de_SuscripcionDropDown()).val(data.Estatus)).addClass('Estatus inputNumber').attr('id', nameOfTable + 'Estatus' + rowIndex).attr('data-field', 'Estatus').after($.parseHTML(addNew('Detalle_Suscripciones_Empresa', 'Estatus_de_Suscripcion','Estatus', 258487)));
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Beneficiarios_extra_por_titular)).addClass('Beneficiarios_extra_por_titular').attr('id', nameOfTable + 'Beneficiarios_extra_por_titular' + rowIndex).attr('data-field', 'Beneficiarios_extra_por_titular');

            return columnData;
        }



        function GetFileInfo(fileData, fileUploadData) {

            var $div = $("<div>");
            if (fileUploadData != null && fileUploadData.files.length > 0) {

                $div.append("<label>" + fileUploadData.files[0].name + "</label>");
                //<i class="fa fa-times-circle" id='removeFileAttachment'>
                $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                    if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
                        var parent = $(this).parent().parent();
                        parent.empty();
                        parent.append("<input type='file'>");
                    }
                }));
                return $div;

            } else if (fileUploadData != null) {
                return $.parseHTML(GetFileUploader());
            } else {
                $div.append("<label>" + fileData.FileName + "</label>");
                $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                    if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
                        var parent = $(this).parent().parent();
                        parent.empty();
                        parent.append("<input type='file'>");
                    }
                }));
                return $div;
            }
        }

        var removedDetalle_Suscripciones_EmpresaData = [];
        function Detalle_Suscripciones_EmpresaDeleteRow(rowIndex, row) {
            var rowIndexTable = Detalle_Suscripciones_EmpresaTable.fnGetPosition($(row).parent().parent()[0]);
            var permission = {
                 Delete: '@permissionDetalle_Suscripciones_Empresa.Delete' == 'True'
            };
            if (!permission.Delete || isConsultMode)
                return;
            if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
              if (EjecutarValidacionesAlEliminarMRDetalle_Suscripciones_Empresa('Detalle_Suscripciones_Empresa_', '_' + rowIndex)) {
                var prevData = Detalle_Suscripciones_EmpresaTable.fnGetData(rowIndexTable );
                removedDetalle_Suscripciones_EmpresaData.push(prevData);
                Detalle_Suscripciones_EmpresaTable.fnDeleteRow(rowIndexTable );
				showDetalle_Suscripciones_EmpresaGrid(Detalle_Suscripciones_EmpresaTable.fnGetData());
              }
            }
			initiateUIControls();
        }

        function Detalle_Suscripciones_EmpresarowCreationGrid(row, data, index) {
            var permission =  {
                 Edit: '@permissionDetalle_Suscripciones_Empresa.Edit' == 'True',
                 Delete: '@permissionDetalle_Suscripciones_Empresa.Delete' == 'True'
            };
            setDetalle_Suscripciones_EmpresaValidation();
            var Detalle_Suscripciones_EmpresaRowElement = "Detalle_Suscripciones_Empresa_" + index.toString();
            $(row).addClass(Detalle_Suscripciones_EmpresaRowElement);
            var nameOfTable='Detalle_Suscripciones_Empresa_';
            var rowIndex = '_' + index;
            Detalle_Suscripciones_EmpresainsertRowCurrentIndex = index;

            row.innerHTML = "";

            if (data.IsInsertRow) {

                if (row.childNodes.length != 0) {
                    for (var i = 0; i < row.childNodes.length; i++) {
                        row.childNodes[i].remove();
                    }
                }
                var controls = GetInsertDetalle_Suscripciones_EmpresaRowControls(index);
                var actionColInsert = $('<td>');

                var abc = "if(dynamicFieldValidation('" + Detalle_Suscripciones_EmpresaRowElement + "')){ Detalle_Suscripciones_EmpresaInsertRow(" + index + "); }";
                var insertRowHTML = '<a  data-toggle="tooltip" title="Confirmar Registro" onclick="' + abc + '">';
                $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
				$('<i class="fa fa-times">').appendTo($("<a data-toggle='tooltip' title='Cancelar Registro' onclick='Detalle_Suscripciones_EmpresaCancelRow(" + index + ")'>").appendTo(actionColInsert));
                actionColInsert.appendTo(row);

                for (i = 0; i < controls.length; i++) {
					var idHeader = $(controls[i]).data('field') + 'Header';
					if($(controls[i]).length > 1){
						idHeader = $($(controls[i])[1]).data('field') + 'Header';
					}

					var classe = ($('#Detalle_Suscripciones_EmpresaGrid .' + idHeader).hasClass('dt-right') ? "dt-right" : "") + $('#Detalle_Suscripciones_EmpresaGrid .' + idHeader ).css('display') == 'none' ? " hide" : "";

					if ($(controls[i]).next().length > 0) {
					    var div = $(controls[i]).next();
					    $('<td class="' + classe + '">').append($(controls[i])).append(div).appendTo(row);
					}else
					    $(controls[i]).appendTo($('<td class="' + classe + '">').appendTo(row));

                }
                $('#Detalle_Suscripciones_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                $('#Detalle_Suscripciones_EmpresaGrid .gridDatePicker').attr("readonly", "");
                return;
            }

            var actionCol = $('<td>');
			var edit = "<a title='@Resources.Resources.Edit' class='edit-MR' onclick='Detalle_Suscripciones_EmpresaEditRow(" + index + ", this)'>";
            if (!permission.Edit || isConsultMode)
                edit = "";
            var editPopUp = "<a title='@Resources.Resources.Edit' class='edit-popup-MR' data-toggle='modal' data-target='#AddDetalle_Suscripciones_Empresa-form' onclick='Detalle_Suscripciones_EmpresaEditRowPopup(" + index + ", this)'>";
            if (!permission.Edit || isConsultMode)
                editPopUp = "";
            var eliminar = "<a title='@Resources.Resources.Delete' class='eliminar-MR' onclick='Detalle_Suscripciones_EmpresaDeleteRow(" + index + ", this)'>";
            if (!permission.Delete || isConsultMode)
                eliminar = "";
            $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
            //$('<i class="fa fa-edit">').appendTo($(editPopUp).appendTo(actionCol));
            $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));
			if ($('.Action' + 'Header').css('display') != 'none')
				actionCol.appendTo(row);

            if ($('.Cantidad_de_Beneficiarios' + 'Header').css('display') != 'none')
                $('<td class="dt-right"  id="'+nameOfTable+'Cantidad_de_Beneficiarios'+rowIndex+'">').text(data.Cantidad_de_Beneficiarios).appendTo(row);
            else
                 $('<td class="dt-right" style="display:none;"  id="'+nameOfTable+'Cantidad_de_Beneficiarios'+rowIndex+'">').text(data.Cantidad_de_Beneficiarios).appendTo(row);
            if ($('.Suscripcion' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Suscripcion'+rowIndex+'">').text(GetDetalle_Suscripciones_Empresa_Planes_de_SuscripcionName(data.Suscripcion)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Suscripcion'+rowIndex+'">').text(GetDetalle_Suscripciones_Empresa_Planes_de_SuscripcionName(data.Suscripcion)).appendTo(row);
            if ($('.Fecha_de_inicio' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Fecha_de_inicio'+rowIndex+'">').text(data.Fecha_de_inicio).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Fecha_de_inicio'+rowIndex+'">').text(data.Fecha_de_inicio).appendTo(row);
            if ($('.Fecha_Fin' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Fecha_Fin'+rowIndex+'">').text(data.Fecha_Fin).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Fecha_Fin'+rowIndex+'">').text(data.Fecha_Fin).appendTo(row);
            if ($('.Nombre_de_la_Suscripcion' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Nombre_de_la_Suscripcion'+rowIndex+'">').text(data.Nombre_de_la_Suscripcion).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Nombre_de_la_Suscripcion'+rowIndex+'">').text(data.Nombre_de_la_Suscripcion).appendTo(row);
            if ($('.Frecuencia_de_Pago' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Frecuencia_de_Pago'+rowIndex+'">').text(GetDetalle_Suscripciones_Empresa_Frecuencia_de_pago_EmpresasName(data.Frecuencia_de_Pago)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Frecuencia_de_Pago'+rowIndex+'">').text(GetDetalle_Suscripciones_Empresa_Frecuencia_de_pago_EmpresasName(data.Frecuencia_de_Pago)).appendTo(row);
            if ($('.Costo' + 'Header').css('display') != 'none')
                $('<td class="dt-right"  id="'+nameOfTable+'Costo'+rowIndex+'">').text(data.Costo).appendTo(row);
            else
                 $('<td style="display:none" class="dt-right"  id="'+nameOfTable+'Costo'+rowIndex+'">').text(data.Costo).appendTo(row);
            if ($('.Estatus' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Estatus'+rowIndex+'">').text(GetDetalle_Suscripciones_Empresa_Estatus_de_SuscripcionName(data.Estatus)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Estatus'+rowIndex+'">').text(GetDetalle_Suscripciones_Empresa_Estatus_de_SuscripcionName(data.Estatus)).appendTo(row);
            if ($('.Beneficiarios_extra_por_titular' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Beneficiarios_extra_por_titular'+rowIndex+'">').text(data.Beneficiarios_extra_por_titular).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Beneficiarios_extra_por_titular'+rowIndex+'">').text(data.Beneficiarios_extra_por_titular).appendTo(row);

        }

        var Detalle_Suscripciones_EmpresaTable;
        function showDetalle_Suscripciones_EmpresaGrid(dataSet) {
            //removedDetalle_Suscripciones_EmpresaData = [];
            Detalle_Suscripciones_EmpresaTable = $('#Detalle_Suscripciones_EmpresaGrid').dataTable({
                dom: '<"html5buttons"B>lTgitp',
                buttons: [
                ],
                "createdRow": Detalle_Suscripciones_EmpresarowCreationGrid,
                "lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
                data: dataSet,
                "columns": [
                    { "data": null, 'visible': true, "orderable": false },

                    { "data": "Cantidad_de_Beneficiarios", "className": "dt-right", "orderable": false },
                    { "data": "Suscripcion", "orderable": false },
                    { "data": "Fecha_de_inicio", "orderable": false },
                    { "data": "Fecha_Fin", "orderable": false },
                    { "data": "Nombre_de_la_Suscripcion", "orderable": false },
                    { "data": "Frecuencia_de_Pago", "orderable": false },
                    { "data": "Costo","className": "dt-right", "orderable": false },
                    { "data": "Estatus", "orderable": false },
                    { "data": "Beneficiarios_extra_por_titular", "orderable": false },

                ],
                "order": [[0, "asc"]],
                "language": {
                    "lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                    "zeroRecords": "@Resources.Resources.NothingFound",
                    "info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                    "infoEmpty": "@Resources.Resources.NoRecords",
                    "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                    "sSearch": "@Resources.Resources.Search",
                    "paginate": {
                        "previous": "@Resources.Resources.Previous",
                        "next": "@Resources.Resources.Next"
                    }
                },
				"bDestroy": true,
                "fnDrawCallback": function (settings) {
                    setDetalle_Suscripciones_EmpresaValidation();
                }
            }).on('init.dt', function (e, data) {
                $('a').tooltip();
            }).on('draw.dt', function () {
                $('#Detalle_Suscripciones_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                $('.gridDatePicker').inputmask("99-99-9999", { "placeholder": "dd-mm-yyyy" });
            });
        }



    var Detalle_Suscripciones_Empresa_Planes_de_SuscripcionItems;
        function GetDetalle_Suscripciones_Empresa_Planes_de_SuscripcionItem() {
            Detalle_Suscripciones_Empresa_Planes_de_SuscripcionItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Suscripciones_Empresa_Planes_de_SuscripcionAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Suscripciones_Empresa_Planes_de_SuscripcionItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }



    var Detalle_Suscripciones_Empresa_Frecuencia_de_pago_EmpresasItems;
        function GetDetalle_Suscripciones_Empresa_Frecuencia_de_pago_EmpresasItem() {
            Detalle_Suscripciones_Empresa_Frecuencia_de_pago_EmpresasItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Suscripciones_Empresa_Frecuencia_de_pago_EmpresasAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Suscripciones_Empresa_Frecuencia_de_pago_EmpresasItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }

    var Detalle_Suscripciones_Empresa_Estatus_de_SuscripcionItems;
        function GetDetalle_Suscripciones_Empresa_Estatus_de_SuscripcionItem() {
            Detalle_Suscripciones_Empresa_Estatus_de_SuscripcionItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Suscripciones_Empresa_Estatus_de_SuscripcionAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Suscripciones_Empresa_Estatus_de_SuscripcionItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }


        var Detalle_Suscripciones_EmpresaData = [];
        var Detalle_Suscripciones_EmpresadeletedItem = [];
        var Detalle_Suscripciones_EmpresaDataMain = [];
        var Detalle_Suscripciones_EmpresaDataMainPages = [];
        var Detalle_Suscripciones_EmpresanewItemCount = 0;
        var Detalle_Suscripciones_EmpresamaxItemIndex = 0;
        var Detalle_Suscripciones_EmpresaDataMainInitialized = false;

        function SendDetalle_Suscripciones_Empresa(callBack, FolioId) {
            Detalle_Suscripciones_EmpresaData = GetDetalle_Suscripciones_EmpresaFromDataTable();

            if (Detalle_Suscripciones_EmpresaData.length > 0 || $("#ReferenceFolio").val() != FolioId) {
                if ($("#ReferenceFolio").val() != "0" && FolioId ==null)
                    FolioId = $("#ReferenceFolio").val();
                if ($("#ReferenceFolio").val() == '')
                    $("#ReferenceFolio").val('0');
                $.ajax({
                    url: '@Url.Content("~/Frontal/Empresas/PostDetalle_Suscripciones_Empresa?MasterId=")' + FolioId + "&referenceId=" + $("#ReferenceFolio").val(),
                    type: 'POST',
                    data: GetDetalle_Suscripciones_Empresa(),
                    async: true,
                    success: function (result) {

                    },
                    error: function (result) {
                        showNotification("@Resources.Resources.ErrorContactingServer", "error");
                    },
                    cache: false,
                    contentType: false,
                    processData: false
                });
            } else {
                //showNotification("@Resources.Resources.SaveSuccess", "success");
                //callBack(FolioId);
            }
            return true;
        }

        function GetAddDetalle_Suscripciones_EmpresaPopup(currentRowIndex, mode, id) {

            $.ajax({
                url: "@Url.Action("AddDetalle_Suscripciones_Empresa", "Detalle_Suscripciones_Empresa")",
                type: "GET",
                async: false,
                data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
                success: function (data) {
                    $(".AddDetalle_Suscripciones_EmpresaModal").html(data);
                },
                error: function () {

                }
            });

            @*$.get('@Url.Action("AddDetalle_Suscripciones_Empresa", "Detalle_Suscripciones_Empresa")', { rowIndex: currentRowIndex }, function (data) {
                $(".AddDetalle_Suscripciones_EmpresaModal").html(data);
            });*@
        }

        function ShowMessagePendingRowDetalle_Suscripciones_Empresa()
        {
            //alert('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Suscripciones"))')
	    showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Suscripciones"))', "warning");
        }
        var Detalle_Pagos_EmpresainsertRowCurrentIndex = -1;
        var Detalle_Pagos_EmpresaDataDataTable;
        function getDetalle_Pagos_EmpresaData() {
            $.ajax({
                url: "@Url.Content("~/Frontal/Empresas/GetDetalle_Pagos_Empresa")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceFolio").val() != "" ? "&RelationId=" + $("#ReferenceFolio").val() : ""),
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                    Detalle_Pagos_EmpresaDataDataTable = result.data;
                    showDetalle_Pagos_EmpresaGrid(result.data);
                    $('#Detalle_Pagos_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                    $('#Detalle_Pagos_EmpresaGrid .gridDatePicker').attr("readonly", "");
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }
        function Detalle_Pagos_EmpresaGetUpdateRowControls(data, nameOfTable, rowIndex) {

            var columnData = [];
            var counter = 0;
            var inputData = "<input type='text' class='fullWidth form-control' />";

           columnData[counter++] = $($(GetDetalle_Pagos_Empresa_Planes_de_SuscripcionDropDown()).val(data.Suscripcion)).addClass('Suscripcion inputNumber').attr('id', nameOfTable + 'Suscripcion' + rowIndex).attr('data-field', 'Suscripcion').after($.parseHTML(addNew('Detalle_Pagos_Empresa', 'Planes_de_Suscripcion','Suscripcion', 258490)));
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Concepto_de_Pago)).addClass('Concepto_de_Pago').attr('id', nameOfTable + 'Concepto_de_Pago' + rowIndex).attr('data-field', 'Concepto_de_Pago');
            columnData[counter++] = $($($.parseHTML(GetGridDatePicker())).val(data.Fecha_de_Suscripcion)).addClass('Fecha_de_Suscripcion').attr('id', nameOfTable + 'Fecha_de_Suscripcion' + rowIndex).attr('data-field', 'Fecha_de_Suscripcion');
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Numero_de_Pago)).addClass('Numero_de_Pago inputNumber').attr('id', nameOfTable + 'Numero_de_Pago' + rowIndex).attr('data-field', 'Numero_de_Pago');
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.De_Total_de_Pagos)).addClass('De_Total_de_Pagos inputNumber').attr('id', nameOfTable + 'De_Total_de_Pagos' + rowIndex).attr('data-field', 'De_Total_de_Pagos');
            columnData[counter++] = $($($.parseHTML(GetGridDatePicker())).val(data.Fecha_Limite_de_Pago)).addClass('Fecha_Limite_de_Pago').attr('id', nameOfTable + 'Fecha_Limite_de_Pago' + rowIndex).attr('data-field', 'Fecha_Limite_de_Pago');
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Recordatorio_dias)).addClass('Recordatorio_dias inputNumber').attr('id', nameOfTable + 'Recordatorio_dias' + rowIndex).attr('data-field', 'Recordatorio_dias');
           columnData[counter++] = $($(GetDetalle_Pagos_Empresa_Formas_de_PagoDropDown()).val(data.Forma_de_Pago)).addClass('Forma_de_Pago inputNumber').attr('id', nameOfTable + 'Forma_de_Pago' + rowIndex).attr('data-field', 'Forma_de_Pago').after($.parseHTML(addNew('Detalle_Pagos_Empresa', 'Formas_de_Pago','Forma_de_Pago', 258494)));
            columnData[counter++] = $($($.parseHTML(GetGridDatePicker())).val(data.Fecha_de_Pago)).addClass('Fecha_de_Pago').attr('id', nameOfTable + 'Fecha_de_Pago' + rowIndex).attr('data-field', 'Fecha_de_Pago');
           columnData[counter++] = $($(GetDetalle_Pagos_Empresa_Estatus_de_PagoDropDown()).val(data.Estatus)).addClass('Estatus inputNumber').attr('id', nameOfTable + 'Estatus' + rowIndex).attr('data-field', 'Estatus').after($.parseHTML(addNew('Detalle_Pagos_Empresa', 'Estatus_de_Pago','Estatus', 258496)));

            return columnData;
        }



        function GetFileInfo(fileData, fileUploadData) {

            var $div = $("<div>");
            if (fileUploadData != null && fileUploadData.files.length > 0) {

                $div.append("<label>" + fileUploadData.files[0].name + "</label>");
                //<i class="fa fa-times-circle" id='removeFileAttachment'>
                $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                    if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
                        var parent = $(this).parent().parent();
                        parent.empty();
                        parent.append("<input type='file'>");
                    }
                }));
                return $div;

            } else if (fileUploadData != null) {
                return $.parseHTML(GetFileUploader());
            } else {
                $div.append("<label>" + fileData.FileName + "</label>");
                $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                    if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
                        var parent = $(this).parent().parent();
                        parent.empty();
                        parent.append("<input type='file'>");
                    }
                }));
                return $div;
            }
        }

        var removedDetalle_Pagos_EmpresaData = [];
        function Detalle_Pagos_EmpresaDeleteRow(rowIndex, row) {
            var rowIndexTable = Detalle_Pagos_EmpresaTable.fnGetPosition($(row).parent().parent()[0]);
            var permission = {
                 Delete: '@permissionDetalle_Pagos_Empresa.Delete' == 'True'
            };
            if (!permission.Delete || isConsultMode)
                return;
            if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
              if (EjecutarValidacionesAlEliminarMRDetalle_Pagos_Empresa('Detalle_Pagos_Empresa_', '_' + rowIndex)) {
                var prevData = Detalle_Pagos_EmpresaTable.fnGetData(rowIndexTable );
                removedDetalle_Pagos_EmpresaData.push(prevData);
                Detalle_Pagos_EmpresaTable.fnDeleteRow(rowIndexTable );
				showDetalle_Pagos_EmpresaGrid(Detalle_Pagos_EmpresaTable.fnGetData());
              }
            }
			initiateUIControls();
        }

        function Detalle_Pagos_EmpresarowCreationGrid(row, data, index) {
            var permission =  {
                 Edit: '@permissionDetalle_Pagos_Empresa.Edit' == 'True',
                 Delete: '@permissionDetalle_Pagos_Empresa.Delete' == 'True'
            };
            setDetalle_Pagos_EmpresaValidation();
            var Detalle_Pagos_EmpresaRowElement = "Detalle_Pagos_Empresa_" + index.toString();
            $(row).addClass(Detalle_Pagos_EmpresaRowElement);
            var nameOfTable='Detalle_Pagos_Empresa_';
            var rowIndex = '_' + index;
            Detalle_Pagos_EmpresainsertRowCurrentIndex = index;

            row.innerHTML = "";

            if (data.IsInsertRow) {

                if (row.childNodes.length != 0) {
                    for (var i = 0; i < row.childNodes.length; i++) {
                        row.childNodes[i].remove();
                    }
                }
                var controls = GetInsertDetalle_Pagos_EmpresaRowControls(index);
                var actionColInsert = $('<td>');

                var abc = "if(dynamicFieldValidation('" + Detalle_Pagos_EmpresaRowElement + "')){ Detalle_Pagos_EmpresaInsertRow(" + index + "); }";
                var insertRowHTML = '<a  data-toggle="tooltip" title="Confirmar Registro" onclick="' + abc + '">';
                $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
				$('<i class="fa fa-times">').appendTo($("<a data-toggle='tooltip' title='Cancelar Registro' onclick='Detalle_Pagos_EmpresaCancelRow(" + index + ")'>").appendTo(actionColInsert));
                actionColInsert.appendTo(row);

                for (i = 0; i < controls.length; i++) {
					var idHeader = $(controls[i]).data('field') + 'Header';
					if($(controls[i]).length > 1){
						idHeader = $($(controls[i])[1]).data('field') + 'Header';
					}

					var classe = ($('#Detalle_Pagos_EmpresaGrid .' + idHeader).hasClass('dt-right') ? "dt-right" : "") + $('#Detalle_Pagos_EmpresaGrid .' + idHeader ).css('display') == 'none' ? " hide" : "";

					if ($(controls[i]).next().length > 0) {
					    var div = $(controls[i]).next();
					    $('<td class="' + classe + '">').append($(controls[i])).append(div).appendTo(row);
					}else
					    $(controls[i]).appendTo($('<td class="' + classe + '">').appendTo(row));

                }
                $('#Detalle_Pagos_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                $('#Detalle_Pagos_EmpresaGrid .gridDatePicker').attr("readonly", "");
                return;
            }

            var actionCol = $('<td>');
			var edit = "<a title='@Resources.Resources.Edit' class='edit-MR' onclick='Detalle_Pagos_EmpresaEditRow(" + index + ", this)'>";
            if (!permission.Edit || isConsultMode)
                edit = "";
            var editPopUp = "<a title='@Resources.Resources.Edit' class='edit-popup-MR' data-toggle='modal' data-target='#AddDetalle_Pagos_Empresa-form' onclick='Detalle_Pagos_EmpresaEditRowPopup(" + index + ", this)'>";
            if (!permission.Edit || isConsultMode)
                editPopUp = "";
            var eliminar = "<a title='@Resources.Resources.Delete' class='eliminar-MR' onclick='Detalle_Pagos_EmpresaDeleteRow(" + index + ", this)'>";
            if (!permission.Delete || isConsultMode)
                eliminar = "";
            $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
            //$('<i class="fa fa-edit">').appendTo($(editPopUp).appendTo(actionCol));
            $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));
			if ($('.Action' + 'Header').css('display') != 'none')
				actionCol.appendTo(row);

            if ($('.Suscripcion' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Suscripcion'+rowIndex+'">').text(GetDetalle_Pagos_Empresa_Planes_de_SuscripcionName(data.Suscripcion)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Suscripcion'+rowIndex+'">').text(GetDetalle_Pagos_Empresa_Planes_de_SuscripcionName(data.Suscripcion)).appendTo(row);
            if ($('.Concepto_de_Pago' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Concepto_de_Pago'+rowIndex+'">').text(data.Concepto_de_Pago).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Concepto_de_Pago'+rowIndex+'">').text(data.Concepto_de_Pago).appendTo(row);
            if ($('.Fecha_de_Suscripcion' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Fecha_de_Suscripcion'+rowIndex+'">').text(data.Fecha_de_Suscripcion).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Fecha_de_Suscripcion'+rowIndex+'">').text(data.Fecha_de_Suscripcion).appendTo(row);
            if ($('.Numero_de_Pago' + 'Header').css('display') != 'none')
                $('<td class="dt-right"  id="'+nameOfTable+'Numero_de_Pago'+rowIndex+'">').text(data.Numero_de_Pago).appendTo(row);
            else
                 $('<td class="dt-right" style="display:none;"  id="'+nameOfTable+'Numero_de_Pago'+rowIndex+'">').text(data.Numero_de_Pago).appendTo(row);
            if ($('.De_Total_de_Pagos' + 'Header').css('display') != 'none')
                $('<td class="dt-right"  id="'+nameOfTable+'De_Total_de_Pagos'+rowIndex+'">').text(data.De_Total_de_Pagos).appendTo(row);
            else
                 $('<td class="dt-right" style="display:none;"  id="'+nameOfTable+'De_Total_de_Pagos'+rowIndex+'">').text(data.De_Total_de_Pagos).appendTo(row);
            if ($('.Fecha_Limite_de_Pago' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Fecha_Limite_de_Pago'+rowIndex+'">').text(data.Fecha_Limite_de_Pago).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Fecha_Limite_de_Pago'+rowIndex+'">').text(data.Fecha_Limite_de_Pago).appendTo(row);
            if ($('.Recordatorio_dias' + 'Header').css('display') != 'none')
                $('<td class="dt-right"  id="'+nameOfTable+'Recordatorio_dias'+rowIndex+'">').text(data.Recordatorio_dias).appendTo(row);
            else
                 $('<td class="dt-right" style="display:none;"  id="'+nameOfTable+'Recordatorio_dias'+rowIndex+'">').text(data.Recordatorio_dias).appendTo(row);
            if ($('.Forma_de_Pago' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Forma_de_Pago'+rowIndex+'">').text(GetDetalle_Pagos_Empresa_Formas_de_PagoName(data.Forma_de_Pago)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Forma_de_Pago'+rowIndex+'">').text(GetDetalle_Pagos_Empresa_Formas_de_PagoName(data.Forma_de_Pago)).appendTo(row);
            if ($('.Fecha_de_Pago' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Fecha_de_Pago'+rowIndex+'">').text(data.Fecha_de_Pago).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Fecha_de_Pago'+rowIndex+'">').text(data.Fecha_de_Pago).appendTo(row);
            if ($('.Estatus' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Estatus'+rowIndex+'">').text(GetDetalle_Pagos_Empresa_Estatus_de_PagoName(data.Estatus)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Estatus'+rowIndex+'">').text(GetDetalle_Pagos_Empresa_Estatus_de_PagoName(data.Estatus)).appendTo(row);

        }

        var Detalle_Pagos_EmpresaTable;
        function showDetalle_Pagos_EmpresaGrid(dataSet) {
            //removedDetalle_Pagos_EmpresaData = [];
            Detalle_Pagos_EmpresaTable = $('#Detalle_Pagos_EmpresaGrid').dataTable({
                dom: '<"html5buttons"B>lTgitp',
                buttons: [
                ],
                "createdRow": Detalle_Pagos_EmpresarowCreationGrid,
                "lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
                data: dataSet,
                "columns": [
                    { "data": null, 'visible': true, "orderable": false },

                    { "data": "Suscripcion", "orderable": false },
                    { "data": "Concepto_de_Pago", "orderable": false },
                    { "data": "Fecha_de_Suscripcion", "orderable": false },
                    { "data": "Numero_de_Pago", "className": "dt-right", "orderable": false },
                    { "data": "De_Total_de_Pagos", "className": "dt-right", "orderable": false },
                    { "data": "Fecha_Limite_de_Pago", "orderable": false },
                    { "data": "Recordatorio_dias", "className": "dt-right", "orderable": false },
                    { "data": "Forma_de_Pago", "orderable": false },
                    { "data": "Fecha_de_Pago", "orderable": false },
                    { "data": "Estatus", "orderable": false },

                ],
                "order": [[0, "asc"]],
                "language": {
                    "lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                    "zeroRecords": "@Resources.Resources.NothingFound",
                    "info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                    "infoEmpty": "@Resources.Resources.NoRecords",
                    "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                    "sSearch": "@Resources.Resources.Search",
                    "paginate": {
                        "previous": "@Resources.Resources.Previous",
                        "next": "@Resources.Resources.Next"
                    }
                },
				"bDestroy": true,
                "fnDrawCallback": function (settings) {
                    setDetalle_Pagos_EmpresaValidation();
                }
            }).on('init.dt', function (e, data) {
                $('a').tooltip();
            }).on('draw.dt', function () {
                $('#Detalle_Pagos_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                $('.gridDatePicker').inputmask("99-99-9999", { "placeholder": "dd-mm-yyyy" });
            });
        }


    var Detalle_Pagos_Empresa_Planes_de_SuscripcionItems;
        function GetDetalle_Pagos_Empresa_Planes_de_SuscripcionItem() {
            Detalle_Pagos_Empresa_Planes_de_SuscripcionItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Pagos_Empresa_Planes_de_SuscripcionAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Pagos_Empresa_Planes_de_SuscripcionItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }






    var Detalle_Pagos_Empresa_Formas_de_PagoItems;
        function GetDetalle_Pagos_Empresa_Formas_de_PagoItem() {
            Detalle_Pagos_Empresa_Formas_de_PagoItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Pagos_Empresa_Formas_de_PagoAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Pagos_Empresa_Formas_de_PagoItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }

    var Detalle_Pagos_Empresa_Estatus_de_PagoItems;
        function GetDetalle_Pagos_Empresa_Estatus_de_PagoItem() {
            Detalle_Pagos_Empresa_Estatus_de_PagoItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Pagos_Empresa_Estatus_de_PagoAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Pagos_Empresa_Estatus_de_PagoItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }

        var Detalle_Pagos_EmpresaData = [];
        var Detalle_Pagos_EmpresadeletedItem = [];
        var Detalle_Pagos_EmpresaDataMain = [];
        var Detalle_Pagos_EmpresaDataMainPages = [];
        var Detalle_Pagos_EmpresanewItemCount = 0;
        var Detalle_Pagos_EmpresamaxItemIndex = 0;
        var Detalle_Pagos_EmpresaDataMainInitialized = false;

        function SendDetalle_Pagos_Empresa(callBack, FolioId) {
            Detalle_Pagos_EmpresaData = GetDetalle_Pagos_EmpresaFromDataTable();

            if (Detalle_Pagos_EmpresaData.length > 0 || $("#ReferenceFolio").val() != FolioId) {
                if ($("#ReferenceFolio").val() != "0" && FolioId ==null)
                    FolioId = $("#ReferenceFolio").val();
                if ($("#ReferenceFolio").val() == '')
                    $("#ReferenceFolio").val('0');
                $.ajax({
                    url: '@Url.Content("~/Frontal/Empresas/PostDetalle_Pagos_Empresa?MasterId=")' + FolioId + "&referenceId=" + $("#ReferenceFolio").val(),
                    type: 'POST',
                    data: GetDetalle_Pagos_Empresa(),
                    async: true,
                    success: function (result) {

                    },
                    error: function (result) {
                        showNotification("@Resources.Resources.ErrorContactingServer", "error");
                    },
                    cache: false,
                    contentType: false,
                    processData: false
                });
            } else {
                //showNotification("@Resources.Resources.SaveSuccess", "success");
                //callBack(FolioId);
            }
            return true;
        }

        function GetAddDetalle_Pagos_EmpresaPopup(currentRowIndex, mode, id) {

            $.ajax({
                url: "@Url.Action("AddDetalle_Pagos_Empresa", "Detalle_Pagos_Empresa")",
                type: "GET",
                async: false,
                data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
                success: function (data) {
                    $(".AddDetalle_Pagos_EmpresaModal").html(data);
                },
                error: function () {

                }
            });

            @*$.get('@Url.Action("AddDetalle_Pagos_Empresa", "Detalle_Pagos_Empresa")', { rowIndex: currentRowIndex }, function (data) {
                $(".AddDetalle_Pagos_EmpresaModal").html(data);
            });*@
        }

        function ShowMessagePendingRowDetalle_Pagos_Empresa()
        {
            //alert('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Pagos"))')
	    showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Pagos"))', "warning");
        }
        var Detalle_Contratos_EmpresainsertRowCurrentIndex = -1;
        var Detalle_Contratos_EmpresaDataDataTable;
        function getDetalle_Contratos_EmpresaData() {
            $.ajax({
                url: "@Url.Content("~/Frontal/Empresas/GetDetalle_Contratos_Empresa")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceFolio").val() != "" ? "&RelationId=" + $("#ReferenceFolio").val() : ""),
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                    Detalle_Contratos_EmpresaDataDataTable = result.data;
                    showDetalle_Contratos_EmpresaGrid(result.data);
                    $('#Detalle_Contratos_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                    $('#Detalle_Contratos_EmpresaGrid .gridDatePicker').attr("readonly", "");
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }
        function Detalle_Contratos_EmpresaGetUpdateRowControls(data, nameOfTable, rowIndex) {

            var columnData = [];
            var counter = 0;
            var inputData = "<input type='text' class='fullWidth form-control' />";

           columnData[counter++] = $($(GetDetalle_Contratos_Empresa_Planes_de_SuscripcionDropDown()).val(data.Suscripcion)).addClass('Suscripcion inputNumber').attr('id', nameOfTable + 'Suscripcion' + rowIndex).attr('data-field', 'Suscripcion').after($.parseHTML(addNew('Detalle_Contratos_Empresa', 'Planes_de_Suscripcion','Suscripcion', 258513)));
           columnData[counter++] = $($(GetDetalle_Contratos_Empresa_Tipos_de_ContratoDropDown()).val(data.Tipo_de_Contrato)).addClass('Tipo_de_Contrato inputNumber').attr('id', nameOfTable + 'Tipo_de_Contrato' + rowIndex).attr('data-field', 'Tipo_de_Contrato').after($.parseHTML(addNew('Detalle_Contratos_Empresa', 'Tipos_de_Contrato','Tipo_de_Contrato', 258514)));
            columnData[counter++] = data.DocumentoDetail == null || (data.DocumentoFileInfo.FileId == null || (data.DocumentoFileInfo.FileId <= 0 && data.DocumentoFileInfo.FileName  == '')) ? $($.parseHTML(GetFileUploader())).attr('id', nameOfTable + 'Documento' + rowIndex).attr('data-field', 'Documento','Spartane_File') : $(GetFileInfo(data.DocumentoFileInfo, data.DocumentoDetail)).attr('id', nameOfTable + 'Documento' + rowIndex).attr('data-field', 'Documento','Spartane_File');
            columnData[counter++] = $($($.parseHTML(GetGridDatePicker())).val(data.Fecha_de_Firma_de_Contrato)).addClass('Fecha_de_Firma_de_Contrato').attr('id', nameOfTable + 'Fecha_de_Firma_de_Contrato' + rowIndex).attr('data-field', 'Fecha_de_Firma_de_Contrato');

            return columnData;
        }



        function GetFileInfo(fileData, fileUploadData) {

            var $div = $("<div>");
            if (fileUploadData != null && fileUploadData.files.length > 0) {

                $div.append("<label>" + fileUploadData.files[0].name + "</label>");
                //<i class="fa fa-times-circle" id='removeFileAttachment'>
                $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                    if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
                        var parent = $(this).parent().parent();
                        parent.empty();
                        parent.append("<input type='file'>");
                    }
                }));
                return $div;

            } else if (fileUploadData != null) {
                return $.parseHTML(GetFileUploader());
            } else {
                $div.append("<label>" + fileData.FileName + "</label>");
                $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                    if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
                        var parent = $(this).parent().parent();
                        parent.empty();
                        parent.append("<input type='file'>");
                    }
                }));
                return $div;
            }
        }

        var removedDetalle_Contratos_EmpresaData = [];
        function Detalle_Contratos_EmpresaDeleteRow(rowIndex, row) {
            var rowIndexTable = Detalle_Contratos_EmpresaTable.fnGetPosition($(row).parent().parent()[0]);
            var permission = {
                 Delete: '@permissionDetalle_Contratos_Empresa.Delete' == 'True'
            };
            if (!permission.Delete || isConsultMode)
                return;
            if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
              if (EjecutarValidacionesAlEliminarMRDetalle_Contratos_Empresa('Detalle_Contratos_Empresa_', '_' + rowIndex)) {
                var prevData = Detalle_Contratos_EmpresaTable.fnGetData(rowIndexTable );
                removedDetalle_Contratos_EmpresaData.push(prevData);
                Detalle_Contratos_EmpresaTable.fnDeleteRow(rowIndexTable );
				showDetalle_Contratos_EmpresaGrid(Detalle_Contratos_EmpresaTable.fnGetData());
              }
            }
			initiateUIControls();
        }

        function Detalle_Contratos_EmpresarowCreationGrid(row, data, index) {
            var permission =  {
                 Edit: '@permissionDetalle_Contratos_Empresa.Edit' == 'True',
                 Delete: '@permissionDetalle_Contratos_Empresa.Delete' == 'True'
            };
            setDetalle_Contratos_EmpresaValidation();
            var Detalle_Contratos_EmpresaRowElement = "Detalle_Contratos_Empresa_" + index.toString();
            $(row).addClass(Detalle_Contratos_EmpresaRowElement);
            var nameOfTable='Detalle_Contratos_Empresa_';
            var rowIndex = '_' + index;
            Detalle_Contratos_EmpresainsertRowCurrentIndex = index;

            row.innerHTML = "";

            if (data.IsInsertRow) {

                if (row.childNodes.length != 0) {
                    for (var i = 0; i < row.childNodes.length; i++) {
                        row.childNodes[i].remove();
                    }
                }
                var controls = GetInsertDetalle_Contratos_EmpresaRowControls(index);
                var actionColInsert = $('<td>');

                var abc = "if(dynamicFieldValidation('" + Detalle_Contratos_EmpresaRowElement + "')){ Detalle_Contratos_EmpresaInsertRow(" + index + "); }";
                var insertRowHTML = '<a  data-toggle="tooltip" title="Confirmar Registro" onclick="' + abc + '">';
                $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
				$('<i class="fa fa-times">').appendTo($("<a data-toggle='tooltip' title='Cancelar Registro' onclick='Detalle_Contratos_EmpresaCancelRow(" + index + ")'>").appendTo(actionColInsert));
                actionColInsert.appendTo(row);

                for (i = 0; i < controls.length; i++) {
					var idHeader = $(controls[i]).data('field') + 'Header';
					if($(controls[i]).length > 1){
						idHeader = $($(controls[i])[1]).data('field') + 'Header';
					}

					var classe = ($('#Detalle_Contratos_EmpresaGrid .' + idHeader).hasClass('dt-right') ? "dt-right" : "") + $('#Detalle_Contratos_EmpresaGrid .' + idHeader ).css('display') == 'none' ? " hide" : "";

					if ($(controls[i]).next().length > 0) {
					    var div = $(controls[i]).next();
					    $('<td class="' + classe + '">').append($(controls[i])).append(div).appendTo(row);
					}else
					    $(controls[i]).appendTo($('<td class="' + classe + '">').appendTo(row));

                }
                $('#Detalle_Contratos_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                $('#Detalle_Contratos_EmpresaGrid .gridDatePicker').attr("readonly", "");
                return;
            }

            var actionCol = $('<td>');
			var edit = "<a title='@Resources.Resources.Edit' class='edit-MR' onclick='Detalle_Contratos_EmpresaEditRow(" + index + ", this)'>";
            if (!permission.Edit || isConsultMode)
                edit = "";
            var editPopUp = "<a title='@Resources.Resources.Edit' class='edit-popup-MR' data-toggle='modal' data-target='#AddDetalle_Contratos_Empresa-form' onclick='Detalle_Contratos_EmpresaEditRowPopup(" + index + ", this)'>";
            if (!permission.Edit || isConsultMode)
                editPopUp = "";
            var eliminar = "<a title='@Resources.Resources.Delete' class='eliminar-MR' onclick='Detalle_Contratos_EmpresaDeleteRow(" + index + ", this)'>";
            if (!permission.Delete || isConsultMode)
                eliminar = "";
            $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
            //$('<i class="fa fa-edit">').appendTo($(editPopUp).appendTo(actionCol));
            $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));
			if ($('.Action' + 'Header').css('display') != 'none')
				actionCol.appendTo(row);

            if ($('.Suscripcion' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Suscripcion'+rowIndex+'">').text(GetDetalle_Contratos_Empresa_Planes_de_SuscripcionName(data.Suscripcion)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Suscripcion'+rowIndex+'">').text(GetDetalle_Contratos_Empresa_Planes_de_SuscripcionName(data.Suscripcion)).appendTo(row);
            if ($('.Tipo_de_Contrato' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Tipo_de_Contrato'+rowIndex+'">').text(GetDetalle_Contratos_Empresa_Tipos_de_ContratoName(data.Tipo_de_Contrato)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Tipo_de_Contrato'+rowIndex+'">').text(GetDetalle_Contratos_Empresa_Tipos_de_ContratoName(data.Tipo_de_Contrato)).appendTo(row);
            if ($('.Documento' + 'Header').css('display') != 'none'){
                var DocumentofileTd = $('<td>');
            if (data.DocumentoDetail != null && data.DocumentoDetail.files != null) {
                if (data.DocumentoDetail.files.length > 0)
                    $("<a >" + data.DocumentoDetail.files[0].name + "</a>").appendTo(DocumentofileTd);
            }
            else if (data.DocumentoFileInfo != null && data.DocumentoFileInfo.FileId > 0) {
                $("<a href='" + '@Url.Content("~/Frontal/Detalle_Contratos_Empresa/GetFile?id=")' + data.DocumentoFileInfo.FileId + "' target='_blank'>" + data.DocumentoFileInfo.FileName + "</a>").appendTo(DocumentofileTd);
            } else if (data.DocumentoFileInfo != null){
                $("<a >" + data.DocumentoFileInfo.FileName + "</a>").appendTo(DocumentofileTd);
            }
            DocumentofileTd.appendTo(row);
}
            if ($('.Fecha_de_Firma_de_Contrato' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Fecha_de_Firma_de_Contrato'+rowIndex+'">').text(data.Fecha_de_Firma_de_Contrato).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Fecha_de_Firma_de_Contrato'+rowIndex+'">').text(data.Fecha_de_Firma_de_Contrato).appendTo(row);

        }

        var Detalle_Contratos_EmpresaTable;
        function showDetalle_Contratos_EmpresaGrid(dataSet) {
            //removedDetalle_Contratos_EmpresaData = [];
            Detalle_Contratos_EmpresaTable = $('#Detalle_Contratos_EmpresaGrid').dataTable({
                dom: '<"html5buttons"B>lTgitp',
                buttons: [
                ],
                "createdRow": Detalle_Contratos_EmpresarowCreationGrid,
                "lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
                data: dataSet,
                "columns": [
                    { "data": null, 'visible': true, "orderable": false },

                    { "data": "Suscripcion", "orderable": false },
                    { "data": "Tipo_de_Contrato", "orderable": false },
                    { "data": "DocumentoFileInfo", "orderable": false },
                    { "data": "Fecha_de_Firma_de_Contrato", "orderable": false },

                ],
                "order": [[0, "asc"]],
                "language": {
                    "lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                    "zeroRecords": "@Resources.Resources.NothingFound",
                    "info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                    "infoEmpty": "@Resources.Resources.NoRecords",
                    "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                    "sSearch": "@Resources.Resources.Search",
                    "paginate": {
                        "previous": "@Resources.Resources.Previous",
                        "next": "@Resources.Resources.Next"
                    }
                },
				"bDestroy": true,
                "fnDrawCallback": function (settings) {
                    setDetalle_Contratos_EmpresaValidation();
                }
            }).on('init.dt', function (e, data) {
                $('a').tooltip();
            }).on('draw.dt', function () {
                $('#Detalle_Contratos_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                $('.gridDatePicker').inputmask("99-99-9999", { "placeholder": "dd-mm-yyyy" });
            });
        }


    var Detalle_Contratos_Empresa_Planes_de_SuscripcionItems;
        function GetDetalle_Contratos_Empresa_Planes_de_SuscripcionItem() {
            Detalle_Contratos_Empresa_Planes_de_SuscripcionItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Contratos_Empresa_Planes_de_SuscripcionAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Contratos_Empresa_Planes_de_SuscripcionItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }
    var Detalle_Contratos_Empresa_Tipos_de_ContratoItems;
        function GetDetalle_Contratos_Empresa_Tipos_de_ContratoItem() {
            Detalle_Contratos_Empresa_Tipos_de_ContratoItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Contratos_Empresa_Tipos_de_ContratoAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Contratos_Empresa_Tipos_de_ContratoItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }



        var Detalle_Contratos_EmpresaData = [];
        var Detalle_Contratos_EmpresadeletedItem = [];
        var Detalle_Contratos_EmpresaDataMain = [];
        var Detalle_Contratos_EmpresaDataMainPages = [];
        var Detalle_Contratos_EmpresanewItemCount = 0;
        var Detalle_Contratos_EmpresamaxItemIndex = 0;
        var Detalle_Contratos_EmpresaDataMainInitialized = false;

        function SendDetalle_Contratos_Empresa(callBack, FolioId) {
            Detalle_Contratos_EmpresaData = GetDetalle_Contratos_EmpresaFromDataTable();

            if (Detalle_Contratos_EmpresaData.length > 0 || $("#ReferenceFolio").val() != FolioId) {
                if ($("#ReferenceFolio").val() != "0" && FolioId ==null)
                    FolioId = $("#ReferenceFolio").val();
                if ($("#ReferenceFolio").val() == '')
                    $("#ReferenceFolio").val('0');
                $.ajax({
                    url: '@Url.Content("~/Frontal/Empresas/PostDetalle_Contratos_Empresa?MasterId=")' + FolioId + "&referenceId=" + $("#ReferenceFolio").val(),
                    type: 'POST',
                    data: GetDetalle_Contratos_Empresa(),
                    async: true,
                    success: function (result) {

                    },
                    error: function (result) {
                        showNotification("@Resources.Resources.ErrorContactingServer", "error");
                    },
                    cache: false,
                    contentType: false,
                    processData: false
                });
            } else {
                //showNotification("@Resources.Resources.SaveSuccess", "success");
                //callBack(FolioId);
            }
            return true;
        }

        function GetAddDetalle_Contratos_EmpresaPopup(currentRowIndex, mode, id) {

            $.ajax({
                url: "@Url.Action("AddDetalle_Contratos_Empresa", "Detalle_Contratos_Empresa")",
                type: "GET",
                async: false,
                data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
                success: function (data) {
                    $(".AddDetalle_Contratos_EmpresaModal").html(data);
                },
                error: function () {

                }
            });

            @*$.get('@Url.Action("AddDetalle_Contratos_Empresa", "Detalle_Contratos_Empresa")', { rowIndex: currentRowIndex }, function (data) {
                $(".AddDetalle_Contratos_EmpresaModal").html(data);
            });*@
        }

        function ShowMessagePendingRowDetalle_Contratos_Empresa()
        {
            //alert('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Contratos"))')
	    showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Contratos"))', "warning");
        }
        var Detalle_Registro_Beneficiarios_Titulares_EmpresainsertRowCurrentIndex = -1;
        var Detalle_Registro_Beneficiarios_Titulares_EmpresaDataDataTable;
        function getDetalle_Registro_Beneficiarios_Titulares_EmpresaData() {
            $.ajax({
                url: "@Url.Content("~/Frontal/Empresas/GetDetalle_Registro_Beneficiarios_Titulares_Empresa")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceFolio").val() != "" ? "&RelationId=" + $("#ReferenceFolio").val() : ""),
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                    Detalle_Registro_Beneficiarios_Titulares_EmpresaDataDataTable = result.data;
                    showDetalle_Registro_Beneficiarios_Titulares_EmpresaGrid(result.data);
                    $('#Detalle_Registro_Beneficiarios_Titulares_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                    $('#Detalle_Registro_Beneficiarios_Titulares_EmpresaGrid .gridDatePicker').attr("readonly", "");
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }
        function Detalle_Registro_Beneficiarios_Titulares_EmpresaGetUpdateRowControls(data, nameOfTable, rowIndex) {

            var columnData = [];
            var counter = 0;
            var inputData = "<input type='text' class='fullWidth form-control' />";

            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Numero_de_Empleado_Titular)).addClass('Numero_de_Empleado_Titular').attr('id', nameOfTable + 'Numero_de_Empleado_Titular' + rowIndex).attr('data-field', 'Numero_de_Empleado_Titular');
           columnData[counter++] = $($(GetDetalle_Registro_Beneficiarios_Titulares_Empresa_Spartan_UserDropDown()).val(data.Usuario)).addClass('Usuario inputNumber').attr('id', nameOfTable + 'Usuario' + rowIndex).attr('data-field', 'Usuario').after($.parseHTML(addNew('Detalle_Registro_Beneficiarios_Titulares_Empresa', 'Spartan_User','Usuario', 261254)));
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Nombres)).addClass('Nombres').attr('id', nameOfTable + 'Nombres' + rowIndex).attr('data-field', 'Nombres');
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Apellido_Paterno)).addClass('Apellido_Paterno').attr('id', nameOfTable + 'Apellido_Paterno' + rowIndex).attr('data-field', 'Apellido_Paterno');
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Apellido_Materno)).addClass('Apellido_Materno').attr('id', nameOfTable + 'Apellido_Materno' + rowIndex).attr('data-field', 'Apellido_Materno');
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Nombre_Completo)).addClass('Nombre_Completo').attr('id', nameOfTable + 'Nombre_Completo' + rowIndex).attr('data-field', 'Nombre_Completo');
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Email)).addClass('Email').attr('id', nameOfTable + 'Email' + rowIndex).attr('data-field', 'Email');
              columnData[counter++] = $($($.parseHTML(GetGridCheckBox())).prop('checked', (data.Activo=="true" || data.Activo==true)? 'checked': ''? 'checked': '')).addClass('Activo').attr('id', nameOfTable + 'Activo' + rowIndex).attr('data-field', 'Activo');
           columnData[counter++] = $($(GetDetalle_Registro_Beneficiarios_Titulares_Empresa_Planes_de_SuscripcionDropDown()).val(data.Suscripcion)).addClass('Suscripcion inputNumber').attr('id', nameOfTable + 'Suscripcion' + rowIndex).attr('data-field', 'Suscripcion').after($.parseHTML(addNew('Detalle_Registro_Beneficiarios_Titulares_Empresa', 'Planes_de_Suscripcion','Suscripcion', 261261)));
           columnData[counter++] = $($(GetDetalle_Registro_Beneficiarios_Titulares_Empresa_EstatusDropDown()).val(data.Estatus)).addClass('Estatus inputNumber').attr('id', nameOfTable + 'Estatus' + rowIndex).attr('data-field', 'Estatus').after($.parseHTML(addNew('Detalle_Registro_Beneficiarios_Titulares_Empresa', 'Estatus','Estatus', 261263)));

            return columnData;
        }



        function GetFileInfo(fileData, fileUploadData) {

            var $div = $("<div>");
            if (fileUploadData != null && fileUploadData.files.length > 0) {

                $div.append("<label>" + fileUploadData.files[0].name + "</label>");
                //<i class="fa fa-times-circle" id='removeFileAttachment'>
                $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                    if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
                        var parent = $(this).parent().parent();
                        parent.empty();
                        parent.append("<input type='file'>");
                    }
                }));
                return $div;

            } else if (fileUploadData != null) {
                return $.parseHTML(GetFileUploader());
            } else {
                $div.append("<label>" + fileData.FileName + "</label>");
                $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                    if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
                        var parent = $(this).parent().parent();
                        parent.empty();
                        parent.append("<input type='file'>");
                    }
                }));
                return $div;
            }
        }

        var removedDetalle_Registro_Beneficiarios_Titulares_EmpresaData = [];
        function Detalle_Registro_Beneficiarios_Titulares_EmpresaDeleteRow(rowIndex, row) {
            var rowIndexTable = Detalle_Registro_Beneficiarios_Titulares_EmpresaTable.fnGetPosition($(row).parent().parent()[0]);
            var permission = {
                 Delete: '@permissionDetalle_Registro_Beneficiarios_Titulares_Empresa.Delete' == 'True'
            };
            if (!permission.Delete || isConsultMode)
                return;
            if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
              if (EjecutarValidacionesAlEliminarMRDetalle_Registro_Beneficiarios_Titulares_Empresa('Detalle_Registro_Beneficiarios_Titulares_Empresa_', '_' + rowIndex)) {
                var prevData = Detalle_Registro_Beneficiarios_Titulares_EmpresaTable.fnGetData(rowIndexTable );
                removedDetalle_Registro_Beneficiarios_Titulares_EmpresaData.push(prevData);
                Detalle_Registro_Beneficiarios_Titulares_EmpresaTable.fnDeleteRow(rowIndexTable );
				showDetalle_Registro_Beneficiarios_Titulares_EmpresaGrid(Detalle_Registro_Beneficiarios_Titulares_EmpresaTable.fnGetData());
              }
            }
			initiateUIControls();
        }

        function Detalle_Registro_Beneficiarios_Titulares_EmpresarowCreationGrid(row, data, index) {
            var permission =  {
                 Edit: '@permissionDetalle_Registro_Beneficiarios_Titulares_Empresa.Edit' == 'True',
                 Delete: '@permissionDetalle_Registro_Beneficiarios_Titulares_Empresa.Delete' == 'True'
            };
            setDetalle_Registro_Beneficiarios_Titulares_EmpresaValidation();
            var Detalle_Registro_Beneficiarios_Titulares_EmpresaRowElement = "Detalle_Registro_Beneficiarios_Titulares_Empresa_" + index.toString();
            $(row).addClass(Detalle_Registro_Beneficiarios_Titulares_EmpresaRowElement);
            var nameOfTable='Detalle_Registro_Beneficiarios_Titulares_Empresa_';
            var rowIndex = '_' + index;
            Detalle_Registro_Beneficiarios_Titulares_EmpresainsertRowCurrentIndex = index;

            row.innerHTML = "";

            if (data.IsInsertRow) {

                if (row.childNodes.length != 0) {
                    for (var i = 0; i < row.childNodes.length; i++) {
                        row.childNodes[i].remove();
                    }
                }
                var controls = GetInsertDetalle_Registro_Beneficiarios_Titulares_EmpresaRowControls(index);
                var actionColInsert = $('<td>');

                var abc = "if(dynamicFieldValidation('" + Detalle_Registro_Beneficiarios_Titulares_EmpresaRowElement + "')){ Detalle_Registro_Beneficiarios_Titulares_EmpresaInsertRow(" + index + "); }";
                var insertRowHTML = '<a  data-toggle="tooltip" title="Confirmar Registro" onclick="' + abc + '">';
                $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
				$('<i class="fa fa-times">').appendTo($("<a data-toggle='tooltip' title='Cancelar Registro' onclick='Detalle_Registro_Beneficiarios_Titulares_EmpresaCancelRow(" + index + ")'>").appendTo(actionColInsert));
                actionColInsert.appendTo(row);

                for (i = 0; i < controls.length; i++) {
					var idHeader = $(controls[i]).data('field') + 'Header';
					if($(controls[i]).length > 1){
						idHeader = $($(controls[i])[1]).data('field') + 'Header';
					}

					var classe = ($('#Detalle_Registro_Beneficiarios_Titulares_EmpresaGrid .' + idHeader).hasClass('dt-right') ? "dt-right" : "") + $('#Detalle_Registro_Beneficiarios_Titulares_EmpresaGrid .' + idHeader ).css('display') == 'none' ? " hide" : "";

					if ($(controls[i]).next().length > 0) {
					    var div = $(controls[i]).next();
					    $('<td class="' + classe + '">').append($(controls[i])).append(div).appendTo(row);
					}else
					    $(controls[i]).appendTo($('<td class="' + classe + '">').appendTo(row));

                }
                $('#Detalle_Registro_Beneficiarios_Titulares_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                $('#Detalle_Registro_Beneficiarios_Titulares_EmpresaGrid .gridDatePicker').attr("readonly", "");
                return;
            }

            var actionCol = $('<td>');
			var edit = "<a title='@Resources.Resources.Edit' class='edit-MR' onclick='Detalle_Registro_Beneficiarios_Titulares_EmpresaEditRow(" + index + ", this)'>";
            if (!permission.Edit || isConsultMode)
                edit = "";
            var editPopUp = "<a title='@Resources.Resources.Edit' class='edit-popup-MR' data-toggle='modal' data-target='#AddDetalle_Registro_Beneficiarios_Titulares_Empresa-form' onclick='Detalle_Registro_Beneficiarios_Titulares_EmpresaEditRowPopup(" + index + ", this)'>";
            if (!permission.Edit || isConsultMode)
                editPopUp = "";
            var eliminar = "<a title='@Resources.Resources.Delete' class='eliminar-MR' onclick='Detalle_Registro_Beneficiarios_Titulares_EmpresaDeleteRow(" + index + ", this)'>";
            if (!permission.Delete || isConsultMode)
                eliminar = "";
            $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
            //$('<i class="fa fa-edit">').appendTo($(editPopUp).appendTo(actionCol));
            $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));
			if ($('.Action' + 'Header').css('display') != 'none')
				actionCol.appendTo(row);

            if ($('.Numero_de_Empleado_Titular' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Numero_de_Empleado_Titular'+rowIndex+'">').text(data.Numero_de_Empleado_Titular).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Numero_de_Empleado_Titular'+rowIndex+'">').text(data.Numero_de_Empleado_Titular).appendTo(row);
            if ($('.Usuario' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Usuario'+rowIndex+'">').text(GetDetalle_Registro_Beneficiarios_Titulares_Empresa_Spartan_UserName(data.Usuario)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Usuario'+rowIndex+'">').text(GetDetalle_Registro_Beneficiarios_Titulares_Empresa_Spartan_UserName(data.Usuario)).appendTo(row);
            if ($('.Nombres' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Nombres'+rowIndex+'">').text(data.Nombres).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Nombres'+rowIndex+'">').text(data.Nombres).appendTo(row);
            if ($('.Apellido_Paterno' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Apellido_Paterno'+rowIndex+'">').text(data.Apellido_Paterno).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Apellido_Paterno'+rowIndex+'">').text(data.Apellido_Paterno).appendTo(row);
            if ($('.Apellido_Materno' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Apellido_Materno'+rowIndex+'">').text(data.Apellido_Materno).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Apellido_Materno'+rowIndex+'">').text(data.Apellido_Materno).appendTo(row);
            if ($('.Nombre_Completo' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Nombre_Completo'+rowIndex+'">').text(data.Nombre_Completo).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Nombre_Completo'+rowIndex+'">').text(data.Nombre_Completo).appendTo(row);
            if ($('.Email' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Email'+rowIndex+'">').text(data.Email).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Email'+rowIndex+'">').text(data.Email).appendTo(row);
            if ($('.Activo' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Activo'+rowIndex+'">').text(data.Activo).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Activo'+rowIndex+'">').text(data.Activo).appendTo(row);
            if ($('.Suscripcion' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Suscripcion'+rowIndex+'">').text(GetDetalle_Registro_Beneficiarios_Titulares_Empresa_Planes_de_SuscripcionName(data.Suscripcion)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Suscripcion'+rowIndex+'">').text(GetDetalle_Registro_Beneficiarios_Titulares_Empresa_Planes_de_SuscripcionName(data.Suscripcion)).appendTo(row);
            if ($('.Estatus' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Estatus'+rowIndex+'">').text(GetDetalle_Registro_Beneficiarios_Titulares_Empresa_EstatusName(data.Estatus)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Estatus'+rowIndex+'">').text(GetDetalle_Registro_Beneficiarios_Titulares_Empresa_EstatusName(data.Estatus)).appendTo(row);

        }

        var Detalle_Registro_Beneficiarios_Titulares_EmpresaTable;
        function showDetalle_Registro_Beneficiarios_Titulares_EmpresaGrid(dataSet) {
            //removedDetalle_Registro_Beneficiarios_Titulares_EmpresaData = [];
            Detalle_Registro_Beneficiarios_Titulares_EmpresaTable = $('#Detalle_Registro_Beneficiarios_Titulares_EmpresaGrid').dataTable({
                dom: '<"html5buttons"B>lTgitp',
                buttons: [
                ],
                "createdRow": Detalle_Registro_Beneficiarios_Titulares_EmpresarowCreationGrid,
                "lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
                data: dataSet,
                "columns": [
                    { "data": null, 'visible': true, "orderable": false },

                    { "data": "Numero_de_Empleado_Titular", "orderable": false },
                    { "data": "Usuario", "orderable": false },
                    { "data": "Nombres", "orderable": false },
                    { "data": "Apellido_Paterno", "orderable": false },
                    { "data": "Apellido_Materno", "orderable": false },
                    { "data": "Nombre_Completo", "orderable": false },
                    { "data": "Email", "orderable": false },
                    { "data": "Activo", "orderable": false },
                    { "data": "Suscripcion", "orderable": false },
                    { "data": "Estatus", "orderable": false },

                ],
                "order": [[0, "asc"]],
                "language": {
                    "lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                    "zeroRecords": "@Resources.Resources.NothingFound",
                    "info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                    "infoEmpty": "@Resources.Resources.NoRecords",
                    "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                    "sSearch": "@Resources.Resources.Search",
                    "paginate": {
                        "previous": "@Resources.Resources.Previous",
                        "next": "@Resources.Resources.Next"
                    }
                },
				"bDestroy": true,
                "fnDrawCallback": function (settings) {
                    setDetalle_Registro_Beneficiarios_Titulares_EmpresaValidation();
                }
            }).on('init.dt', function (e, data) {
                $('a').tooltip();
            }).on('draw.dt', function () {
                $('#Detalle_Registro_Beneficiarios_Titulares_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                $('.gridDatePicker').inputmask("99-99-9999", { "placeholder": "dd-mm-yyyy" });
            });
        }



    var Detalle_Registro_Beneficiarios_Titulares_Empresa_Spartan_UserItems;
        function GetDetalle_Registro_Beneficiarios_Titulares_Empresa_Spartan_UserItem() {
            Detalle_Registro_Beneficiarios_Titulares_Empresa_Spartan_UserItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Registro_Beneficiarios_Titulares_Empresa_Spartan_UserAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Registro_Beneficiarios_Titulares_Empresa_Spartan_UserItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }






    var Detalle_Registro_Beneficiarios_Titulares_Empresa_Planes_de_SuscripcionItems;
        function GetDetalle_Registro_Beneficiarios_Titulares_Empresa_Planes_de_SuscripcionItem() {
            Detalle_Registro_Beneficiarios_Titulares_Empresa_Planes_de_SuscripcionItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Registro_Beneficiarios_Titulares_Empresa_Planes_de_SuscripcionAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Registro_Beneficiarios_Titulares_Empresa_Planes_de_SuscripcionItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }
    var Detalle_Registro_Beneficiarios_Titulares_Empresa_EstatusItems;
        function GetDetalle_Registro_Beneficiarios_Titulares_Empresa_EstatusItem() {
            Detalle_Registro_Beneficiarios_Titulares_Empresa_EstatusItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Registro_Beneficiarios_Titulares_Empresa_EstatusAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Registro_Beneficiarios_Titulares_Empresa_EstatusItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }

        var Detalle_Registro_Beneficiarios_Titulares_EmpresaData = [];
        var Detalle_Registro_Beneficiarios_Titulares_EmpresadeletedItem = [];
        var Detalle_Registro_Beneficiarios_Titulares_EmpresaDataMain = [];
        var Detalle_Registro_Beneficiarios_Titulares_EmpresaDataMainPages = [];
        var Detalle_Registro_Beneficiarios_Titulares_EmpresanewItemCount = 0;
        var Detalle_Registro_Beneficiarios_Titulares_EmpresamaxItemIndex = 0;
        var Detalle_Registro_Beneficiarios_Titulares_EmpresaDataMainInitialized = false;

        function SendDetalle_Registro_Beneficiarios_Titulares_Empresa(callBack, FolioId) {
            Detalle_Registro_Beneficiarios_Titulares_EmpresaData = GetDetalle_Registro_Beneficiarios_Titulares_EmpresaFromDataTable();

            if (Detalle_Registro_Beneficiarios_Titulares_EmpresaData.length > 0 || $("#ReferenceFolio").val() != FolioId) {
                if ($("#ReferenceFolio").val() != "0" && FolioId ==null)
                    FolioId = $("#ReferenceFolio").val();
                if ($("#ReferenceFolio").val() == '')
                    $("#ReferenceFolio").val('0');
                $.ajax({
                    url: '@Url.Content("~/Frontal/Empresas/PostDetalle_Registro_Beneficiarios_Titulares_Empresa?MasterId=")' + FolioId + "&referenceId=" + $("#ReferenceFolio").val(),
                    type: 'POST',
                    data: GetDetalle_Registro_Beneficiarios_Titulares_Empresa(),
                    async: true,
                    success: function (result) {

                    },
                    error: function (result) {
                        showNotification("@Resources.Resources.ErrorContactingServer", "error");
                    },
                    cache: false,
                    contentType: false,
                    processData: false
                });
            } else {
                //showNotification("@Resources.Resources.SaveSuccess", "success");
                //callBack(FolioId);
            }
            return true;
        }

        function GetAddDetalle_Registro_Beneficiarios_Titulares_EmpresaPopup(currentRowIndex, mode, id) {

            $.ajax({
                url: "@Url.Action("AddDetalle_Registro_Beneficiarios_Titulares_Empresa", "Detalle_Registro_Beneficiarios_Titulares_Empresa")",
                type: "GET",
                async: false,
                data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
                success: function (data) {
                    $(".AddDetalle_Registro_Beneficiarios_Titulares_EmpresaModal").html(data);
                },
                error: function () {

                }
            });

            @*$.get('@Url.Action("AddDetalle_Registro_Beneficiarios_Titulares_Empresa", "Detalle_Registro_Beneficiarios_Titulares_Empresa")', { rowIndex: currentRowIndex }, function (data) {
                $(".AddDetalle_Registro_Beneficiarios_Titulares_EmpresaModal").html(data);
            });*@
        }

        function ShowMessagePendingRowDetalle_Registro_Beneficiarios_Titulares_Empresa()
        {
            //alert('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Beneficiarios Titulares"))')
	    showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Beneficiarios Titulares"))', "warning");
        }
        var Detalle_Registro_Beneficiarios_EmpresainsertRowCurrentIndex = -1;
        var Detalle_Registro_Beneficiarios_EmpresaDataDataTable;
        function getDetalle_Registro_Beneficiarios_EmpresaData() {
            $.ajax({
                url: "@Url.Content("~/Frontal/Empresas/GetDetalle_Registro_Beneficiarios_Empresa")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceFolio").val() != "" ? "&RelationId=" + $("#ReferenceFolio").val() : ""),
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                    Detalle_Registro_Beneficiarios_EmpresaDataDataTable = result.data;
                    showDetalle_Registro_Beneficiarios_EmpresaGrid(result.data);
                    $('#Detalle_Registro_Beneficiarios_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                    $('#Detalle_Registro_Beneficiarios_EmpresaGrid .gridDatePicker').attr("readonly", "");
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }
        function Detalle_Registro_Beneficiarios_EmpresaGetUpdateRowControls(data, nameOfTable, rowIndex) {

            var columnData = [];
            var counter = 0;
            var inputData = "<input type='text' class='fullWidth form-control' />";

            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Numero_de_Empleado_Titular)).addClass('Numero_de_Empleado_Titular').attr('id', nameOfTable + 'Numero_de_Empleado_Titular' + rowIndex).attr('data-field', 'Numero_de_Empleado_Titular');
            columnData[counter++] = $($($.parseHTML(inputData)).val(data.Numero_de_Empleado)).addClass('Numero_de_Empleado').attr('id', nameOfTable + 'Numero_de_Empleado' + rowIndex).attr('data-field', 'Numero_de_Empleado');
           columnData[counter++] = $($(GetDetalle_Registro_Beneficiarios_Empresa_Spartan_UserDropDown()).val(data.Usuario)).addClass('Usuario inputNumber').attr('id', nameOfTable + 'Usuario' + rowIndex).attr('data-field', 'Usuario').after($.parseHTML(addNew('Detalle_Registro_Beneficiarios_Empresa', 'Spartan_User','Usuario', 258938)));
              columnData[counter++] = $($($.parseHTML(GetGridCheckBox())).prop('checked', (data.Activo=="true" || data.Activo==true)? 'checked': ''? 'checked': '')).addClass('Activo').attr('id', nameOfTable + 'Activo' + rowIndex).attr('data-field', 'Activo');
           columnData[counter++] = $($(GetDetalle_Registro_Beneficiarios_Empresa_Planes_de_SuscripcionDropDown()).val(data.Suscripcion)).addClass('Suscripcion inputNumber').attr('id', nameOfTable + 'Suscripcion' + rowIndex).attr('data-field', 'Suscripcion').after($.parseHTML(addNew('Detalle_Registro_Beneficiarios_Empresa', 'Planes_de_Suscripcion','Suscripcion', 258945)));
           columnData[counter++] = $($(GetDetalle_Registro_Beneficiarios_Empresa_EstatusDropDown()).val(data.Estatus)).addClass('Estatus inputNumber').attr('id', nameOfTable + 'Estatus' + rowIndex).attr('data-field', 'Estatus').after($.parseHTML(addNew('Detalle_Registro_Beneficiarios_Empresa', 'Estatus','Estatus', 258947)));

            return columnData;
        }



        function GetFileInfo(fileData, fileUploadData) {

            var $div = $("<div>");
            if (fileUploadData != null && fileUploadData.files.length > 0) {

                $div.append("<label>" + fileUploadData.files[0].name + "</label>");
                //<i class="fa fa-times-circle" id='removeFileAttachment'>
                $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                    if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
                        var parent = $(this).parent().parent();
                        parent.empty();
                        parent.append("<input type='file'>");
                    }
                }));
                return $div;

            } else if (fileUploadData != null) {
                return $.parseHTML(GetFileUploader());
            } else {
                $div.append("<label>" + fileData.FileName + "</label>");
                $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                    if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
                        var parent = $(this).parent().parent();
                        parent.empty();
                        parent.append("<input type='file'>");
                    }
                }));
                return $div;
            }
        }

        var removedDetalle_Registro_Beneficiarios_EmpresaData = [];
        function Detalle_Registro_Beneficiarios_EmpresaDeleteRow(rowIndex, row) {
            var rowIndexTable = Detalle_Registro_Beneficiarios_EmpresaTable.fnGetPosition($(row).parent().parent()[0]);
            var permission = {
                 Delete: '@permissionDetalle_Registro_Beneficiarios_Empresa.Delete' == 'True'
            };
            if (!permission.Delete || isConsultMode)
                return;
            if (confirm(htmlDecode("@Resources.Resources.DeleteConfirm"))) {
              if (EjecutarValidacionesAlEliminarMRDetalle_Registro_Beneficiarios_Empresa('Detalle_Registro_Beneficiarios_Empresa_', '_' + rowIndex)) {
                var prevData = Detalle_Registro_Beneficiarios_EmpresaTable.fnGetData(rowIndexTable );
                removedDetalle_Registro_Beneficiarios_EmpresaData.push(prevData);
                Detalle_Registro_Beneficiarios_EmpresaTable.fnDeleteRow(rowIndexTable );
				showDetalle_Registro_Beneficiarios_EmpresaGrid(Detalle_Registro_Beneficiarios_EmpresaTable.fnGetData());
              }
            }
			initiateUIControls();
        }

        function Detalle_Registro_Beneficiarios_EmpresarowCreationGrid(row, data, index) {
            var permission =  {
                 Edit: '@permissionDetalle_Registro_Beneficiarios_Empresa.Edit' == 'True',
                 Delete: '@permissionDetalle_Registro_Beneficiarios_Empresa.Delete' == 'True'
            };
            setDetalle_Registro_Beneficiarios_EmpresaValidation();
            var Detalle_Registro_Beneficiarios_EmpresaRowElement = "Detalle_Registro_Beneficiarios_Empresa_" + index.toString();
            $(row).addClass(Detalle_Registro_Beneficiarios_EmpresaRowElement);
            var nameOfTable='Detalle_Registro_Beneficiarios_Empresa_';
            var rowIndex = '_' + index;
            Detalle_Registro_Beneficiarios_EmpresainsertRowCurrentIndex = index;

            row.innerHTML = "";

            if (data.IsInsertRow) {

                if (row.childNodes.length != 0) {
                    for (var i = 0; i < row.childNodes.length; i++) {
                        row.childNodes[i].remove();
                    }
                }
                var controls = GetInsertDetalle_Registro_Beneficiarios_EmpresaRowControls(index);
                var actionColInsert = $('<td>');

                var abc = "if(dynamicFieldValidation('" + Detalle_Registro_Beneficiarios_EmpresaRowElement + "')){ Detalle_Registro_Beneficiarios_EmpresaInsertRow(" + index + "); }";
                var insertRowHTML = '<a  data-toggle="tooltip" title="Confirmar Registro" onclick="' + abc + '">';
                $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
				$('<i class="fa fa-times">').appendTo($("<a data-toggle='tooltip' title='Cancelar Registro' onclick='Detalle_Registro_Beneficiarios_EmpresaCancelRow(" + index + ")'>").appendTo(actionColInsert));
                actionColInsert.appendTo(row);

                for (i = 0; i < controls.length; i++) {
					var idHeader = $(controls[i]).data('field') + 'Header';
					if($(controls[i]).length > 1){
						idHeader = $($(controls[i])[1]).data('field') + 'Header';
					}

					var classe = ($('#Detalle_Registro_Beneficiarios_EmpresaGrid .' + idHeader).hasClass('dt-right') ? "dt-right" : "") + $('#Detalle_Registro_Beneficiarios_EmpresaGrid .' + idHeader ).css('display') == 'none' ? " hide" : "";

					if ($(controls[i]).next().length > 0) {
					    var div = $(controls[i]).next();
					    $('<td class="' + classe + '">').append($(controls[i])).append(div).appendTo(row);
					}else
					    $(controls[i]).appendTo($('<td class="' + classe + '">').appendTo(row));

                }
                $('#Detalle_Registro_Beneficiarios_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                $('#Detalle_Registro_Beneficiarios_EmpresaGrid .gridDatePicker').attr("readonly", "");
                return;
            }

            var actionCol = $('<td>');
			var edit = "<a title='@Resources.Resources.Edit' class='edit-MR' onclick='Detalle_Registro_Beneficiarios_EmpresaEditRow(" + index + ", this)'>";
            if (!permission.Edit || isConsultMode)
                edit = "";
            var editPopUp = "<a title='@Resources.Resources.Edit' class='edit-popup-MR' data-toggle='modal' data-target='#AddDetalle_Registro_Beneficiarios_Empresa-form' onclick='Detalle_Registro_Beneficiarios_EmpresaEditRowPopup(" + index + ", this)'>";
            if (!permission.Edit || isConsultMode)
                editPopUp = "";
            var eliminar = "<a title='@Resources.Resources.Delete' class='eliminar-MR' onclick='Detalle_Registro_Beneficiarios_EmpresaDeleteRow(" + index + ", this)'>";
            if (!permission.Delete || isConsultMode)
                eliminar = "";
            $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
            //$('<i class="fa fa-edit">').appendTo($(editPopUp).appendTo(actionCol));
            $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));
			if ($('.Action' + 'Header').css('display') != 'none')
				actionCol.appendTo(row);

            if ($('.Numero_de_Empleado_Titular' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Numero_de_Empleado_Titular'+rowIndex+'">').text(data.Numero_de_Empleado_Titular).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Numero_de_Empleado_Titular'+rowIndex+'">').text(data.Numero_de_Empleado_Titular).appendTo(row);
            if ($('.Numero_de_Empleado' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Numero_de_Empleado'+rowIndex+'">').text(data.Numero_de_Empleado).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Numero_de_Empleado'+rowIndex+'">').text(data.Numero_de_Empleado).appendTo(row);
            if ($('.Usuario' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Usuario'+rowIndex+'">').text(GetDetalle_Registro_Beneficiarios_Empresa_Spartan_UserName(data.Usuario)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Usuario'+rowIndex+'">').text(GetDetalle_Registro_Beneficiarios_Empresa_Spartan_UserName(data.Usuario)).appendTo(row);
            if ($('.Activo' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Activo'+rowIndex+'">').text(data.Activo).appendTo(row);
            else
                $('<td style="display:none;" id="'+nameOfTable+'Activo'+rowIndex+'">').text(data.Activo).appendTo(row);
            if ($('.Suscripcion' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Suscripcion'+rowIndex+'">').text(GetDetalle_Registro_Beneficiarios_Empresa_Planes_de_SuscripcionName(data.Suscripcion)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Suscripcion'+rowIndex+'">').text(GetDetalle_Registro_Beneficiarios_Empresa_Planes_de_SuscripcionName(data.Suscripcion)).appendTo(row);
            if ($('.Estatus' + 'Header').css('display') != 'none')
                $('<td id="'+nameOfTable+'Estatus'+rowIndex+'">').text(GetDetalle_Registro_Beneficiarios_Empresa_EstatusName(data.Estatus)).appendTo(row);
	    else
		$('<td style="display:none;" id="'+nameOfTable+'Estatus'+rowIndex+'">').text(GetDetalle_Registro_Beneficiarios_Empresa_EstatusName(data.Estatus)).appendTo(row);

        }

        var Detalle_Registro_Beneficiarios_EmpresaTable;
        function showDetalle_Registro_Beneficiarios_EmpresaGrid(dataSet) {
            //removedDetalle_Registro_Beneficiarios_EmpresaData = [];
            Detalle_Registro_Beneficiarios_EmpresaTable = $('#Detalle_Registro_Beneficiarios_EmpresaGrid').dataTable({
                dom: '<"html5buttons"B>lTgitp',
                buttons: [
                ],
                "createdRow": Detalle_Registro_Beneficiarios_EmpresarowCreationGrid,
                "lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
                data: dataSet,
                "columns": [
                    { "data": null, 'visible': true, "orderable": false },

                    { "data": "Numero_de_Empleado_Titular", "orderable": false },
                    { "data": "Numero_de_Empleado", "orderable": false },
                    { "data": "Usuario", "orderable": false },
                    { "data": "Activo", "orderable": false },
                    { "data": "Suscripcion", "orderable": false },
                    { "data": "Estatus", "orderable": false },

                ],
                "order": [[0, "asc"]],
                "language": {
                    "lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                    "zeroRecords": "@Resources.Resources.NothingFound",
                    "info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                    "infoEmpty": "@Resources.Resources.NoRecords",
                    "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                    "sSearch": "@Resources.Resources.Search",
                    "paginate": {
                        "previous": "@Resources.Resources.Previous",
                        "next": "@Resources.Resources.Next"
                    }
                },
				"bDestroy": true,
                "fnDrawCallback": function (settings) {
                    setDetalle_Registro_Beneficiarios_EmpresaValidation();
                }
            }).on('init.dt', function (e, data) {
                $('a').tooltip();
            }).on('draw.dt', function () {
                $('#Detalle_Registro_Beneficiarios_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                $('.gridDatePicker').inputmask("99-99-9999", { "placeholder": "dd-mm-yyyy" });
            });
        }




    var Detalle_Registro_Beneficiarios_Empresa_Spartan_UserItems;
        function GetDetalle_Registro_Beneficiarios_Empresa_Spartan_UserItem() {
            Detalle_Registro_Beneficiarios_Empresa_Spartan_UserItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Registro_Beneficiarios_Empresa_Spartan_UserAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Registro_Beneficiarios_Empresa_Spartan_UserItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }

    var Detalle_Registro_Beneficiarios_Empresa_Planes_de_SuscripcionItems;
        function GetDetalle_Registro_Beneficiarios_Empresa_Planes_de_SuscripcionItem() {
            Detalle_Registro_Beneficiarios_Empresa_Planes_de_SuscripcionItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Registro_Beneficiarios_Empresa_Planes_de_SuscripcionAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Registro_Beneficiarios_Empresa_Planes_de_SuscripcionItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }
    var Detalle_Registro_Beneficiarios_Empresa_EstatusItems;
        function GetDetalle_Registro_Beneficiarios_Empresa_EstatusItem() {
            Detalle_Registro_Beneficiarios_Empresa_EstatusItems = null;
            var ajaxUrl = "@Url.Content("~/Frontal/Empresas/GetDetalle_Registro_Beneficiarios_Empresa_EstatusAll")";
            $.ajax({
                url: ajaxUrl,
                type: 'GET',
                dataType: "json",
                async: false,
                global: false,
                success: function (result) {
                    Detalle_Registro_Beneficiarios_Empresa_EstatusItems = result;
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }

        var Detalle_Registro_Beneficiarios_EmpresaData = [];
        var Detalle_Registro_Beneficiarios_EmpresadeletedItem = [];
        var Detalle_Registro_Beneficiarios_EmpresaDataMain = [];
        var Detalle_Registro_Beneficiarios_EmpresaDataMainPages = [];
        var Detalle_Registro_Beneficiarios_EmpresanewItemCount = 0;
        var Detalle_Registro_Beneficiarios_EmpresamaxItemIndex = 0;
        var Detalle_Registro_Beneficiarios_EmpresaDataMainInitialized = false;

        function SendDetalle_Registro_Beneficiarios_Empresa(callBack, FolioId) {
            Detalle_Registro_Beneficiarios_EmpresaData = GetDetalle_Registro_Beneficiarios_EmpresaFromDataTable();

            if (Detalle_Registro_Beneficiarios_EmpresaData.length > 0 || $("#ReferenceFolio").val() != FolioId) {
                if ($("#ReferenceFolio").val() != "0" && FolioId ==null)
                    FolioId = $("#ReferenceFolio").val();
                if ($("#ReferenceFolio").val() == '')
                    $("#ReferenceFolio").val('0');
                $.ajax({
                    url: '@Url.Content("~/Frontal/Empresas/PostDetalle_Registro_Beneficiarios_Empresa?MasterId=")' + FolioId + "&referenceId=" + $("#ReferenceFolio").val(),
                    type: 'POST',
                    data: GetDetalle_Registro_Beneficiarios_Empresa(),
                    async: true,
                    success: function (result) {

                    },
                    error: function (result) {
                        showNotification("@Resources.Resources.ErrorContactingServer", "error");
                    },
                    cache: false,
                    contentType: false,
                    processData: false
                });
            } else {
                //showNotification("@Resources.Resources.SaveSuccess", "success");
                //callBack(FolioId);
            }
            return true;
        }

        function GetAddDetalle_Registro_Beneficiarios_EmpresaPopup(currentRowIndex, mode, id) {

            $.ajax({
                url: "@Url.Action("AddDetalle_Registro_Beneficiarios_Empresa", "Detalle_Registro_Beneficiarios_Empresa")",
                type: "GET",
                async: false,
                data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
                success: function (data) {
                    $(".AddDetalle_Registro_Beneficiarios_EmpresaModal").html(data);
                },
                error: function () {

                }
            });

            @*$.get('@Url.Action("AddDetalle_Registro_Beneficiarios_Empresa", "Detalle_Registro_Beneficiarios_Empresa")', { rowIndex: currentRowIndex }, function (data) {
                $(".AddDetalle_Registro_Beneficiarios_EmpresaModal").html(data);
            });*@
        }

        function ShowMessagePendingRowDetalle_Registro_Beneficiarios_Empresa()
        {
            //alert('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Beneficiarios"))')
	    showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Beneficiarios"))', "warning");
        }


        function initiateUIControls() {
             $('.gridDatePicker').datepicker({
                todayBtn: "linked",
                keyboardNavigation: false,
                forceParse: false,
                calendarWeeks: true,
                autoclose: true,
                format: "@ConfigurationProperty.DateFormatDatePicker"
            });
            //Time Picker
            $('.gridTimePicker').clockpicker();
            $('.inputMoney').inputmask("currency", { greedy: false, prefix: "", rightAlign: false });
			$('td.inputMoney').inputmask("currency", { greedy: false, prefix: "$ ", rightAlign: false });
			$('td input.inputMoney').inputmask("currency", { greedy: false, prefix: "$ ", rightAlign: false });






























































        }

        </script>

        <script type="text/javascript">


   function GetCatalogPopup(catalog, nameAttribute, isMR, nameMR) {
        if (!isMR)
            var url = "@Url.Action("Create", "Catalog", new { Module_Id = "1", isPartial = true, nameAttribute = "AttributoNombre" })";
        else
            var url = "@Url.Action("Create", "Catalog", new { Module_Id = "1", isPartial = true, isMR = true, nameMR = "Multirenglon",nameAttribute= "AttributoNombre" })";

        url = url.replace("Catalog", catalog).replace("Multirenglon", nameMR).replace("AttributoNombre", nameAttribute);

        window.open(htmlDecode(url), '_blank', 'left=200,top=100,width=850,height=550,toolbar=0,resizable=0');
    }

    function RefreshCatalog(catalog, control) {

	 if ($('#' + control).hasClass('AutoComplete'))   {
		   if ($('#' + control).attr("data-isfilter") == "true") {
				eval(GetReglaFilter(control, $('#ObjectId').val()));
				return;
			}
		}

			var url = '@Url.Content("~/Frontal/Empresas/GetCatalogAll")';
			url = url.replace(/Catalog/g, catalog);

			$.ajax({
				url: url,
				async: true,
				success:function(result)
				{
					addItemsToSelect($('#' + control), result);
				},
				error: function (result)
				{
					showNotification("@Resources.Resources.ErrorContactingServer", "error");
				}
			});

    }


        function SendEmpresasData(callBack) {


		 var arr = [];
		 $("form#CreateEmpresas").find(':input').each(function( index ) {
			if ($(this).prop('disabled')==true|| $(this).prop('disabled')=="disabled")
			{
				arr.push($(this).attr('id'));
				$(this).prop('disabled', false);
			}
	    });

             var formData = new FormData($("form#CreateEmpresas")[0]);
			$.each( arr, function( key, value ) {
			  $('#' +value).prop('disabled', true);
			});
			var id = $("#ReferenceFolio").val();
            var isNew = $('#hdnIsNew').val();

			if (Tab_Datos_Generales && !checkClientValidate('EmpresasCreateForm', 'Datos_Generales')) {
				return false;
			}

			if (Tab_Datos_de_Contacto && !checkClientValidate('EmpresasCreateForm', 'Datos_de_Contacto')) {
				return false;
			}

			if (Tab_Datos_Fiscales && !checkClientValidate('EmpresasCreateForm', 'Datos_Fiscales')) {
				return false;
			}

			if (Tab_Suscripcion && !checkClientValidate('EmpresasCreateForm', 'Suscripcion')) {
				return false;
			}

			if (Tab_Documentacion && !checkClientValidate('EmpresasCreateForm', 'Documentacion')) {
				return false;
			}

			if (Tab_Beneficiarios && !checkClientValidate('EmpresasCreateForm', 'Beneficiarios')) {
				return false;
			}



			if (isNew == "True")
            {
                id = CreateID();
            }


			if (Tab_Datos_Generales)
				Save_Datos_Generales(id);

			if (Tab_Datos_de_Contacto)
				Save_Datos_de_Contacto(id);

			if (Tab_Datos_Fiscales)
				Save_Datos_Fiscales(id);

			if (Tab_Suscripcion)
				Save_Suscripcion(id);

			if (Tab_Documentacion)
				Save_Documentacion(id);

			if (Tab_Beneficiarios)
				Save_Beneficiarios(id);


			showNotification("@Resources.Resources.SaveSuccess", "success");
			callBack(id);
            return true;
        };
		function CreateID()
		{
			var newId = 0;
			$.ajax({
				url: '@Url.Content("~/Frontal/Empresas/CreateID")',
				type: 'GET',
				async: false,
				success: function (result) {
					if (result < 0) {
						showNotification("@Resources.Resources.ErrorSave", "error");
					} else {
						newId = result;
					}
				},
				error: function (result) {
					showNotification("@Resources.Resources.ErrorContactingServer", "error");
				},
				cache: false,
				contentType: false,
				processData: false
			});
			return newId;
		}

		function OpenRules()
		{
			$.get('@Url.Action("Index", "Business_Rule_Creation")', {}, function (data) {
				$(".EmpresasBusinessRuleModal").html(data);
			});
		}
                function EmpresasGetBusinessRule(FieldId, FieldName, Attribute) {
			if (FieldId != null && FieldName != null)
			{
			        $('#FieldId').val(FieldId);
				$('#FieldName').val(FieldName);
				$('#Attribute').val(Attribute);
			}
			$('#ObjectId').val('44282');
			$('#Screen').val('Empresas');
			OpenRules();
               }

    var permission = {
        Consult: '@permission.Consult' == 'True',
        New: '@permission.New' == 'True',
        Edit: '@permission.Edit' == 'True',
        Delete: '@permission.Delete' == 'True',
        Export: '@permission.Export' == 'True',
        Print: '@permission.Print' == 'True',
        Configure: '@permission.Configure' == 'True',
    };


    //MR-var statusItems;
    //MR-var stateItems;
    //MR-var cityItems = [];
    var isConsultMode = "@ViewBag.Consult" == "True";
    Consult(isConsultMode);
        function Consult(val) {
            if (val) {
                $(':input').attr('readonly', 'readonly');
                $(':input').attr('disabled', 'true');
                $('.noConsult').removeAttr('readonly');
                $('.noConsult').removeAttr('disabled');
            }
        }

    function EmpresasBackToGrid() {
        		if (isPartial)
			window.close('', '_parent', '');
        else
			location.href = "@Url.Content("~/Frontal/Empresas/")";
    }

	function ReadScriptSettings(callback)
    {
        $.post("@Url.Content("~/Frontal/Empresas/ReadScriptSettings")", function (data) {
            mainElementObject = JSON.parse(data.MainElement);
			if (data.ChildElement != null) {
                childElementObject = JSON.parse(data.ChildElement);
            }
            callback();
        });
    }

    function SaveSettingsWithoutReload() {
        $.post("@Url.Content("~/Frontal/Empresas/WriteScriptSettings")", { CustomModuleAttributeList: mainElementObject, ChildModuleAttributeList: childElementObject }, function (data) {
            //$('#hdnConfigureType').val("0");
        }, "json");
    }

        function SaveElementAttributes() {
            if ($('#hdnConfigureType').val() == "1") {
                $.post("@Url.Content("~/Frontal/Empresas/WriteScriptSettings")", { CustomModuleAttributeList: mainElementObject, ChildModuleAttributeList: childElementObject }, function (data) {
                    $('#hdnConfigureType').val("0");
                    location.reload(true);
                }, "json");
            } else {
                $.post("@Url.Content("~/Frontal/Empresas/ReadScriptSettings")", function (data) {
                    mainElementObject = JSON.parse(data.MainElement);
                    childElementObject = JSON.parse(data.ChildElement);

                    for (var i = 0; i < mainElementObject.length; i++) {
							var mainElementAttributes = '<div class="col-sm-2">';
							mainElementAttributes += '<div class="displayAttributes requiredAttribute"><a class="requiredClick" title="' + (mainElementObject[i].IsRequired == true ? "@Resources.Resources.Required" : "@Resources.Resources.NotRequired") + '" onclick="setRequired(' + i.toString() + ', this, 1)"><img src="' + (mainElementObject[i].IsRequired == true ? "@Url.Content("~/Images/Required.png")" : "@Url.Content("~/Images/Not-Required.png")") + '" alt="" /></a></div>';
							mainElementAttributes += '<div class="displayAttributes visibleAttribute"><a class="visibleClick" title="' + (mainElementObject[i].IsVisible == true ? "@Resources.Resources.Visible" : "@Resources.Resources.InVisible") + '" onclick="setVisible(' + i.toString() + ', this, 1)"><img src="' + (mainElementObject[i].IsVisible == true ? "@Url.Content("~/Images/Visible.png")" : "@Url.Content("~/Images/InVisible.png")") + '" alt="" /></a></div>';
							mainElementAttributes += '<div class="displayAttributes readOnlyAttribute"><a class="readOnlyClick" title="' + (mainElementObject[i].IsReadOnly == true ? "@Resources.Resources.Disabled" : "@Resources.Resources.Enabled") + '" onclick="setReadOnly(' + i.toString() + ', this, 1)"><img src="' + (mainElementObject[i].IsReadOnly == true ? "@Url.Content("~/Images/Disabled.png")" : "@Url.Content("~/Images/Enabled.png")") + '" alt="" /></a></div>';
							mainElementAttributes += '<div class="displayAttributes defaultValueAttribute"><a id="hlDefaultValue_' + i.toString() + '" class="defaultValueClick" title="' + (mainElementObject[i].DefaultValue) + '" onclick="setDefaultValue(' + i.toString() + ', this, 1)"><img src="' + (mainElementObject[i].DefaultValue != '' && mainElementObject[i].DefaultValue != null ? "@Url.Content("~/Images/default-value.png")" : "@Url.Content("~/Images/Not-Default-Value.png")") + '" alt="" /></a></div>';
							mainElementAttributes += '<div class="displayAttributes helpTextAttribute"><a id="hlHelpText_' + i.toString() + '" class="helpTextClick" title="' + (mainElementObject[i].HelpText) + '" onclick="setHelpText(' + i.toString() + ', this, 1)"><img src="' + (mainElementObject[i].HelpText != '' && mainElementObject[i].HelpText != null ? "@Url.Content("~/Images/green-help.png")" : "@Url.Content("~/Images/red-help.jpg")") + '" alt="" /></a></div>';
							mainElementAttributes += '</div>';
							$('#' + mainElementObject[i].inputId).parent().closest('.form-group').show();

							$('#' + mainElementObject[i].inputId).closest('.col-sm-8').after(mainElementAttributes);
                  }
					 if (childElementObject != null) {
                        for (var j = 0; j < childElementObject.length; j++) {
                            var table = childElementObject[j].table.trim();
                            var grid = '#' + table + 'Grid';
                            $(grid).find("thead").find("tr").find("th").each(function () {
                                for (var i = 0; i < childElementObject[j].elements.length; i++) {
                                    if ($(this).hasClass(childElementObject[j].elements[i].inputId + 'Header')) {
                                        $(this).show();
                                        $(this).parent().show();
                                        $(this).append(returnAttributeHTML(childElementObject[j].elements[i], table, i));
                                    }
                                }
                            });
                        }

                    }
                     $('#ConfigureSave').text('@Html.Raw(Resources.Resources.Save  +" "+ Resources.Resources.Settings)');
                    $('#hdnConfigureType').val("1");
                });
            }
        }
		$('#CreateEmpresas').on('click', '.btnPopupBusinessRules', function () {
			var fieldId = $(this).data('field-id');
			var fieldName = $(this).data('field-name');
			var attribute = $(this).data('attribute');
			$('#FieldId').val(fieldId);
			$('#FieldName').val(fieldName);
			$('#Attribute').val(attribute);
                        EmpresasGetBusinessRule();
		});
		//Initialize HTML Editors
  var filebrowserBrowseUrl = '../../ckfinder/ckfinder.html';
  var filebrowserImageBrowseUrl = '../../ckfinder/ckfinder.html?type=Images';
  var filebrowserUploadUrl = '../../ckfinder/connector?command=QuickUpload&type=Files';
  var filebrowserImageUploadUrl = '../../ckfinder/connector?command=QuickUpload&type=Images';


		function Fill_Datos_Generales()
        {
            $.ajax({
                url: "@Url.Content("~/Frontal/Empresas/Get_Datos_Generales")?Id=" + $("#ReferenceFolio").val(),
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                                        $('#Folio').val(result.data.Folio);
                    $('#Fecha_de_Registro').val(result.data.Fecha_de_Registro);
                    $('#Hora_de_Registro').val(result.data.Hora_de_Registro);
                    $('#Usuario_que_Registra').val(result.data.Usuario_que_Registra);
                    $('#Nombre_de_la_Empresa').val(result.data.Nombre_de_la_Empresa);
                    $('#Tipo_de_Empresa').val(result.data.Tipo_de_Empresa);
                    $('#Email').val(result.data.Email);
                    $('#Telefono').val(result.data.Telefono);
                    $('#Calle').val(result.data.Calle);
                    $('#Numero_exterior').val(result.data.Numero_exterior);
                    $('#Numero_interior').val(result.data.Numero_interior);
                    $('#Colonia').val(result.data.Colonia);
                    $('#CP').val(result.data.CP);
                    $('#Ciudad').val(result.data.Ciudad);
                    $('#Estado').val(result.data.Estado);
                    $('#Pais').val(result.data.Pais);
                    $('#Estatus').val(result.data.Estatus);

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }

		function Save_Datos_Generales(newId) {
			var data = new FormData();
			data.append('Folio', newId);
			                data.append('Fecha_de_Registro', $('#Fecha_de_Registro').val());
                data.append('Hora_de_Registro', $('#Hora_de_Registro').val());
                data.append('Usuario_que_Registra', $('#Usuario_que_Registra').val());
                data.append('Nombre_de_la_Empresa', $('#Nombre_de_la_Empresa').val());
                data.append('Tipo_de_Empresa', $('#Tipo_de_Empresa').val());
                data.append('Email', $('#Email').val());
                data.append('Telefono', $('#Telefono').val());
                data.append('Calle', $('#Calle').val());
                data.append('Numero_exterior', $('#Numero_exterior').val());
                data.append('Numero_interior', $('#Numero_interior').val());
                data.append('Colonia', $('#Colonia').val());
                data.append('CP', $('#CP').val());
                data.append('Ciudad', $('#Ciudad').val());
                data.append('Estado', $('#Estado').val());
                data.append('Pais', $('#Pais').val());
                data.append('Estatus', $('#Estatus').val());

			$.ajax({
				url: '@Url.Content("~/Frontal/Empresas/Post_Datos_Generales")',
				type: 'POST',
				data: data,
				async: false,
				dataType: "json",
				contentType: false,
				processData: false,
				success: function (result) {
					if (result < 0) {
						showNotification("@Resources.Resources.ErrorSave", "Error al guardar Datos_Generales");
					} else {
						newId = result;

					}
				},
				error: function (result) {
					showNotification("@Resources.Resources.ErrorContactingServer", "Error al guardar Datos_Generales");
				},
				cache: false
			});
		}

		function Fill_Datos_de_Contacto()
        {
            $.ajax({
                url: "@Url.Content("~/Frontal/Empresas/Get_Datos_de_Contacto")?Id=" + $("#ReferenceFolio").val(),
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                                        $('#Folio').val(result.data.Folio);
                    Detalle_Contactos_EmpresaDataDataTable = result.Contactos;
                    showDetalle_Contactos_EmpresaGrid(result.Contactos);
                    $('#Detalle_Contactos_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                    $('#Detalle_Contactos_EmpresaGrid .gridDatePicker').attr("readonly", "");

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }

		function Save_Datos_de_Contacto(newId) {
			var data = new FormData();
			data.append('Folio', newId);

			$.ajax({
				url: '@Url.Content("~/Frontal/Empresas/Post_Datos_de_Contacto")',
				type: 'POST',
				data: data,
				async: false,
				dataType: "json",
				contentType: false,
				processData: false,
				success: function (result) {
					if (result < 0) {
						showNotification("@Resources.Resources.ErrorSave", "Error al guardar Datos_de_Contacto");
					} else {
						newId = result;
                    					    SendDetalle_Contactos_Empresa(null, newId);

					}
				},
				error: function (result) {
					showNotification("@Resources.Resources.ErrorContactingServer", "Error al guardar Datos_de_Contacto");
				},
				cache: false
			});
		}

		function Fill_Datos_Fiscales()
        {
            $.ajax({
                url: "@Url.Content("~/Frontal/Empresas/Get_Datos_Fiscales")?Id=" + $("#ReferenceFolio").val(),
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                                        $('#Folio').val(result.data.Folio);
                    $('#Regimen_Fiscal').val(result.data.Regimen_Fiscal);
                    $('#Nombre_o_Razon_Social').val(result.data.Nombre_o_Razon_Social);
                    $('#RFC').val(result.data.RFC);
                    $('#Calle_Fiscal').val(result.data.Calle_Fiscal);
                    $('#Numero_exterior_Fiscal').val(result.data.Numero_exterior_Fiscal);
                    $('#Numero_interior_Fiscal').val(result.data.Numero_interior_Fiscal);
                    $('#Colonia_Fiscal').val(result.data.Colonia_Fiscal);
                    $('#CP_Fiscal').val(result.data.CP_Fiscal);
                    $('#Ciudad_Fiscal').val(result.data.Ciudad_Fiscal);
                    $('#Estado_Fiscal').val(result.data.Estado_Fiscal);
                    $('#Pais_Fiscal').val(result.data.Pais_Fiscal);
                    $('#Telefono_Fiscal').val(result.data.Telefono_Fiscal);
                    $('#Fax').val(result.data.Fax);
                    $('#Nombres_del_Representante_Legal').val(result.data.Nombres_del_Representante_Legal);
                    $('#Apellido_Paterno_del_Representante_Legal').val(result.data.Apellido_Paterno_del_Representante_Legal);
                    $('#Apellido_Materno_del_Representante_Legal').val(result.data.Apellido_Materno_del_Representante_Legal);
                    $('#Nombre_Completo_del_Representante_Legal').val(result.data.Nombre_Completo_del_Representante_Legal);

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }

		function Save_Datos_Fiscales(newId) {
			var data = new FormData();
			data.append('Folio', newId);
			                data.append('Regimen_Fiscal', $('#Regimen_Fiscal').val());
                data.append('Nombre_o_Razon_Social', $('#Nombre_o_Razon_Social').val());
                data.append('RFC', $('#RFC').val());
                data.append('Calle_Fiscal', $('#Calle_Fiscal').val());
                data.append('Numero_exterior_Fiscal', $('#Numero_exterior_Fiscal').val());
                data.append('Numero_interior_Fiscal', $('#Numero_interior_Fiscal').val());
                data.append('Colonia_Fiscal', $('#Colonia_Fiscal').val());
                data.append('CP_Fiscal', $('#CP_Fiscal').val());
                data.append('Ciudad_Fiscal', $('#Ciudad_Fiscal').val());
                data.append('Estado_Fiscal', $('#Estado_Fiscal').val());
                data.append('Pais_Fiscal', $('#Pais_Fiscal').val());
                data.append('Telefono_Fiscal', $('#Telefono_Fiscal').val());
                data.append('Fax', $('#Fax').val());
                data.append('Nombres_del_Representante_Legal', $('#Nombres_del_Representante_Legal').val());
                data.append('Apellido_Paterno_del_Representante_Legal', $('#Apellido_Paterno_del_Representante_Legal').val());
                data.append('Apellido_Materno_del_Representante_Legal', $('#Apellido_Materno_del_Representante_Legal').val());
                data.append('Nombre_Completo_del_Representante_Legal', $('#Nombre_Completo_del_Representante_Legal').val());

			$.ajax({
				url: '@Url.Content("~/Frontal/Empresas/Post_Datos_Fiscales")',
				type: 'POST',
				data: data,
				async: false,
				dataType: "json",
				contentType: false,
				processData: false,
				success: function (result) {
					if (result < 0) {
						showNotification("@Resources.Resources.ErrorSave", "Error al guardar Datos_Fiscales");
					} else {
						newId = result;

					}
				},
				error: function (result) {
					showNotification("@Resources.Resources.ErrorContactingServer", "Error al guardar Datos_Fiscales");
				},
				cache: false
			});
		}

		function Fill_Suscripcion()
        {
            $.ajax({
                url: "@Url.Content("~/Frontal/Empresas/Get_Suscripcion")?Id=" + $("#ReferenceFolio").val(),
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                                        $('#Folio').val(result.data.Folio);
                    Detalle_Suscripciones_EmpresaDataDataTable = result.Suscripciones;
                    showDetalle_Suscripciones_EmpresaGrid(result.Suscripciones);
                    $('#Detalle_Suscripciones_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                    $('#Detalle_Suscripciones_EmpresaGrid .gridDatePicker').attr("readonly", "");
                    Detalle_Pagos_EmpresaDataDataTable = result.Pagos;
                    showDetalle_Pagos_EmpresaGrid(result.Pagos);
                    $('#Detalle_Pagos_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                    $('#Detalle_Pagos_EmpresaGrid .gridDatePicker').attr("readonly", "");

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }

		function Save_Suscripcion(newId) {
			var data = new FormData();
			data.append('Folio', newId);

			$.ajax({
				url: '@Url.Content("~/Frontal/Empresas/Post_Suscripcion")',
				type: 'POST',
				data: data,
				async: false,
				dataType: "json",
				contentType: false,
				processData: false,
				success: function (result) {
					if (result < 0) {
						showNotification("@Resources.Resources.ErrorSave", "Error al guardar Suscripcion");
					} else {
						newId = result;
                    					    SendDetalle_Suscripciones_Empresa(null, newId);
					    SendDetalle_Pagos_Empresa(null, newId);

					}
				},
				error: function (result) {
					showNotification("@Resources.Resources.ErrorContactingServer", "Error al guardar Suscripcion");
				},
				cache: false
			});
		}

		function Fill_Documentacion()
        {
            $.ajax({
                url: "@Url.Content("~/Frontal/Empresas/Get_Documentacion")?Id=" + $("#ReferenceFolio").val(),
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                                        $('#Folio').val(result.data.Folio);
                    $('#Cedula_Fiscal').val(result.data.Cedula_Fiscal);
                    Detalle_Contratos_EmpresaDataDataTable = result.Contratos;
                    showDetalle_Contratos_EmpresaGrid(result.Contratos);
                    $('#Detalle_Contratos_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                    $('#Detalle_Contratos_EmpresaGrid .gridDatePicker').attr("readonly", "");

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }

		function Save_Documentacion(newId) {
			var data = new FormData();
			data.append('Folio', newId);
			                data.append('Cedula_Fiscal', $('#hdnAttachedCedula_Fiscal').val());
                data.append('Cedula_FiscalFile', $('#Cedula_FiscalFile')[0].files[0]);
                data.append('Cedula_FiscalRemoveAttachment', $('#hdnRemoveCedula_Fiscal').val());

			$.ajax({
				url: '@Url.Content("~/Frontal/Empresas/Post_Documentacion")',
				type: 'POST',
				data: data,
				async: false,
				dataType: "json",
				contentType: false,
				processData: false,
				success: function (result) {
					if (result < 0) {
						showNotification("@Resources.Resources.ErrorSave", "Error al guardar Documentacion");
					} else {
						newId = result;
                    					    SendDetalle_Contratos_Empresa(null, newId);

					}
				},
				error: function (result) {
					showNotification("@Resources.Resources.ErrorContactingServer", "Error al guardar Documentacion");
				},
				cache: false
			});
		}

		function Fill_Beneficiarios()
        {
            $.ajax({
                url: "@Url.Content("~/Frontal/Empresas/Get_Beneficiarios")?Id=" + $("#ReferenceFolio").val(),
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                                        $('#Folio').val(result.data.Folio);
                    Detalle_Registro_Beneficiarios_Titulares_EmpresaDataDataTable = result.Beneficiarios_Titulares;
                    showDetalle_Registro_Beneficiarios_Titulares_EmpresaGrid(result.Beneficiarios_Titulares);
                    $('#Detalle_Registro_Beneficiarios_Titulares_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                    $('#Detalle_Registro_Beneficiarios_Titulares_EmpresaGrid .gridDatePicker').attr("readonly", "");
                    Detalle_Registro_Beneficiarios_EmpresaDataDataTable = result.Beneficiarios;
                    showDetalle_Registro_Beneficiarios_EmpresaGrid(result.Beneficiarios);
                    $('#Detalle_Registro_Beneficiarios_EmpresaGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
                    $('#Detalle_Registro_Beneficiarios_EmpresaGrid .gridDatePicker').attr("readonly", "");

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }

		function Save_Beneficiarios(newId) {
			var data = new FormData();
			data.append('Folio', newId);

			$.ajax({
				url: '@Url.Content("~/Frontal/Empresas/Post_Beneficiarios")',
				type: 'POST',
				data: data,
				async: false,
				dataType: "json",
				contentType: false,
				processData: false,
				success: function (result) {
					if (result < 0) {
						showNotification("@Resources.Resources.ErrorSave", "Error al guardar Beneficiarios");
					} else {
						newId = result;
                    					    SendDetalle_Registro_Beneficiarios_Titulares_Empresa(null, newId);
					    SendDetalle_Registro_Beneficiarios_Empresa(null, newId);

					}
				},
				error: function (result) {
					showNotification("@Resources.Resources.ErrorContactingServer", "Error al guardar Beneficiarios");
				},
				cache: false
			});
		}


        </script>
    }
    <input type="hidden" id="FieldId" name="FieldId" value="" />
    <input type="hidden" id="FieldName" name="FieldName" value="" />
    <input type="hidden" id="ObjectId" name="ObjectId" value="" />
    <input type="hidden" id="Attribute" name="Attribute" value="" />
    <input type="hidden" id="Screen" name="Screen" value="" />
    <input type="hidden" id="Empresas_cmbLabelSelect" name="Empresas_cmbLabelSelect" value="@Resources.Resources.CmbSelect" />

