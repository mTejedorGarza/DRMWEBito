@using System
@using System.Collections.Generic
@using System.Globalization
@using Spartane.Core.Domain.Spartane_File
@using Spartane.Web.Helpers
@model Spartane.Web.Areas.Frontal.Models.Business_Rule_CreationModel
@{
    Layout = null;
    Spartane_File attachedFileDocumentation = (Spartane_File)ViewBag.DocumentationSpartane_File;
    List<SelectListItem> varSpartan_User_User = null;
    if (ViewBag.Spartan_Users_User != null)
    { varSpartan_User_User = (List<SelectListItem>)ViewBag.Spartan_Users_User; }
    List<SelectListItem> varSpartan_BR_Status_Status = null;
    if (ViewBag.Spartan_BR_Statuss_Status != null)
    { varSpartan_BR_Status_Status = (List<SelectListItem>)ViewBag.Spartan_BR_Statuss_Status; }
    List<SelectListItem> varSpartan_BR_Complexity_Complexity = null;
    if (ViewBag.Spartan_BR_Complexitys_Complexity != null)
    { varSpartan_BR_Complexity_Complexity = (List<SelectListItem>)ViewBag.Spartan_BR_Complexitys_Complexity; }

}

<div class="modal-dialog large-popup">
    <div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title">
                <!--CAMBIOS MANUALES-->
                <!---<button class="close" type="button" data-toggle="modal" data-target="#BusinessRule-form" onclick="@(Model.Screen)GetBusinessRule('@Model.FieldId', '@Model.FieldName', '@Model.Attribute');$(this).parent().parent().parent().parent().parent().modal('hide'); "><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>-->
                <button class="close" type="button" onclick="$(this).parent().parent().parent().parent().parent().modal('hide');"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                <div id="modalWarning"></div>
                <script>
                    if ($('#FieldId').val() != '') {
                        $('#modalWarning').html('<div class="alert alert-warning" role="alert">Ésta regla se ejecutará cuando ocurra un cambio en el campo <strong>' + $('#FieldName').val() + '</strong></div>');
                    }
                    else {
                        $('#modalWarning').html('<div class="alert alert-warning" role="alert">Ésta regla se ejecutará en el Proceso <strong>' + $('#Screen').val() + '</strong></div>');
                    }
                </script>

                @if (Model.Key_Business_Rule_Creation > 0)
                {
                    <span class="text-right pull-right space-right">Business Rule ID: @Model.Key_Business_Rule_Creation</span>
                }
                @Resources.Business_Rule_CreationResources.Business_Rule_Creation
                @*<button onclick="GetBusinessRule()" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#BusinessRule-form">
                        <i class="fa fa-cogs fa-spin"></i>
                    </button>*@

            </h4>
        </div>
        <div class="modal-body scroll_content">
            <div class="row">
                <div class="loading style-2" style="display:none;"><div class="loading-wheel"></div></div>
                <div class="modal fade in" id="dvAttributeValue" style="background-color:rgba(0, 0, 0, 0.7);">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-body">
                                <div class="form-group">
                                    <label class="col-sm-3 control-label" id="lblAttributeType">Value</label>
                                    <div class="col-sm-7">
                                        <input type="text" title="Value" class="form-control" id="txtAttributeValue" />
                                    </div>
                                    <div class="col-sm-2">
                                        <a class="btn btn-primary" onclick="SaveValue()">Submit</a>
                                    </div>
                                    <input type="hidden" id="hdnAttributType" />
                                    <input type="hidden" id="hdnAttributElement" />
                                    <input type="hidden" id="hdnAttributNumber" />
                                    <input type="hidden" id="hdnElementType" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row wrapper border-bottom white-bg page-heading">
                    <div class="row">
                        <div class="col-lg-2">
                            @{
                                if (Convert.ToInt32(Spartane.Web.SessionHelper.Role) == (int)Spartane.Core.Enums.SpartanRoleEnum.Admin)
                                {
                                    @*<button onclick="Business_Rule_CreationDisplayBusinessRule()" type="button" class="btn btn-info btn-lg displayBusinessProperyButton">
                                            <i class="fa fa-cogs fa-spin"></i>
                                        </button>*@

                                    <div aria-hidden="true" class="modal fade in Business_Rule_CreationPropertyBusinessModal" id="Business_Rule_CreationPropertyBusinessModal-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h4 class="modal-title">
                                                        Property & Business Rules
                                                        <button data-dismiss="modal" class="close" type="button"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                                                    </h4>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="row">
                                                        <div class="col-sm-12">
                                                            <a class="btn btn-primary full-width" data-dismiss="modal" data-toggle="modal" data-target="#PropertyModal-form" onclick="GetPropertyBag()">Properties</a>
                                                        </div>
                                                        <div class="clearfix col-sm-12">&nbsp;</div>
                                                        <div class="col-sm-12">
                                                            <a class="btn btn-primary full-width" data-dismiss="modal" data-toggle="modal" data-target="#Business_Rule_CreationBusinessRule-form" onclick="Business_Rule_CreationGetBusinessRule()">Business Rule</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div aria-hidden="true" data-backdrop="static" class="modal fade in PropertyModal" id="PropertyModal-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                                    </div>
                                    <div aria-hidden="true" data-backdrop="static" class="modal fade in Business_Rule_CreationBusinessRuleModal" id="Business_Rule_CreationBusinessRule-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                                    </div>
                                    <div aria-hidden="true" data-backdrop="static" class="modal fade in Business_Rule_CreationAddBusinessRuleModal" id="Business_Rule_CreationAddBusinessRule-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                                    </div>


                                }
                            }
                            <div aria-hidden="true" class="modal fade in AddSpartan_BR_Conditions_DetailModal" id="AddSpartan_BR_Conditions_Detail-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                            </div>

                            <div aria-hidden="true" class="modal fade in AddSpartan_BR_Actions_True_DetailModal" id="AddSpartan_BR_Actions_True_Detail-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                            </div>

                            <div aria-hidden="true" class="modal fade in AddSpartan_BR_Actions_False_DetailModal" id="AddSpartan_BR_Actions_False_Detail-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                            </div>

                            <div aria-hidden="true" class="modal fade in AddSpartan_BR_Operation_DetailModal" id="AddSpartan_BR_Operation_Detail-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                            </div>

                            <div aria-hidden="true" class="modal fade in AddSpartan_BR_Process_Event_DetailModal" id="AddSpartan_BR_Process_Event_Detail-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                            </div>

                            <div aria-hidden="true" class="modal fade in AddSpartan_BR_Peer_ReviewModal" id="AddSpartan_BR_Peer_Review-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                            </div>

                            <div aria-hidden="true" class="modal fade in AddSpartan_BR_TestingModal" id="AddSpartan_BR_Testing-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                            </div>

                            <div aria-hidden="true" class="modal fade in AddSpartan_BR_Scope_DetailModal" id="AddSpartan_BR_Scope_Detail-form" style="display: none; background-color:rgba(0, 0, 0, 0.7);">
                            </div>

                        </div>
                    </div>
                    <div class="wrapper wrapper-content animated fadeInRight">
                        <div class="ibox float-e-margins">
                            <div class="ibox-content">
                                @using (Html.BeginForm("Post", "Business_Rule_Creation", FormMethod.Post, new { id = "CreateBusiness_Rule_Creation", @readonly = "true", @class = "form-horizontal", enctype = "multipart/form-data" }))
                                {
                                    <input type="hidden" id="hdnIsNewCreate" name="hdnIsNewCreate" value="@ViewBag.IsNew.ToString()" />
                                    <span id="popupNotification"></span>
                                    <div class="container-fluid Business_Rule_CreationCreateForm" id="viewmodeledit">
                                        <div class="alert alert-warning" id="controlsRequerid" style="display:none">
                                            <a href="#" class="close" onclick="$('#controlsRequerid').hide();">&times;</a>
                                            <span id="textRequired"></span>
                                        </div>
                                        <div class="tabs-container">
                                            <ul class="nav nav-tabs">
                                                <li class="active"><a data-toggle="tab" href="#tabBRDatos_Generales"> @Resources.Business_Rule_CreationResources.TabDatos_Generales</a></li>
                                                <li class=""><a data-toggle="tab" href="#tabPeer_Review"> @Resources.Business_Rule_CreationResources.TabPeer_Review</a></li>
                                                <li class=""><a data-toggle="tab" href="#tabTesting"> @Resources.Business_Rule_CreationResources.TabTesting</a></li>
                                                <li id="litabHistory" class=""><a data-toggle="tab" href="#tabHistory"> @Resources.Business_Rule_CreationResources.TabHistory</a></li>

                                            </ul>
                                            <div class="tab-content">
                                                <div id="tabBRDatos_Generales" class="tab-pane active">

                                                    <div class="panel-body">
                                                        <div class="col-md-12 no-left-padding form-group">
                                                            <div id="divScopes" class="col-lg-4 no-left-padding override-right-padding">
                                                                <label class="col-md-3 control-label no-left-padding override-right-padding">@Resources.Business_Rule_CreationResources.Scopes : </label>
                                                                <div class="col-md-9 no-left-padding">
                                                                    <select id="Scopes" class="form-control multiselectcombo"></select>
                                                                </div>

                                                            </div>

                                                            <div id="divOperations" style="" class="col-lg-4 no-left-padding override-right-padding">
                                                                <label class="col-md-4 control-label no-left-padding override-right-padding">@Resources.Business_Rule_CreationResources.Operations : </label>
                                                                <div class="col-sm-8 displayFull no-left-padding">
                                                                    <select id="Operations" class="form-control multiselectcombo" multiple="multiple"></select>
                                                                </div>

                                                            </div>
                                                            <div id="divEvents" style="" class="col-lg-4 no-left-padding override-right-padding">
                                                                <label class="col-md-4 control-label no-left-padding override-right-padding">@Resources.Business_Rule_CreationResources.Events : </label>
                                                                <div class="col-sm-8 displayFull no-left-padding">
                                                                    <select id="Events" class="form-control multiselectcombo" multiple="multiple"></select>
                                                                </div>
                                                            </div>

                                                        </div>

                                                        <div class="form-group" id="divKey_Business_Rule_Creation">
                                                            <label class="col-sm-2 control-label">@Resources.Business_Rule_CreationResources.Key_Business_Rule_Creation</label>
                                                            <div class="col-sm-8" data-field-id="Key_Business_Rule_Creation" data-attribute="188281" data-field-name="@Resources.Business_Rule_CreationResources.Key_Business_Rule_Creation">
                                                                <label class="form-control" for="Key_Business_Rule_Creation" id="lblKey_Business_Rule_Creation">
                                                                    @if (Model.Key_Business_Rule_Creation == 0)
                                                                    {
                                                                        <text>@Resources.Resources.ClaveDefault</text>
                                                                    }
                                                                    else
                                                                    {
                                                                        <text>@Model.Key_Business_Rule_Creation</text>
                                                                    }
                                                                </label>
                                                            </div>
                                                        </div>
                                                        <div class="form-group" id="divName">
                                                            <label class="col-sm-2 control-label">@Resources.Business_Rule_CreationResources.Name</label>
                                                            <div class="col-sm-8" data-field-id="Name" data-attribute="188288" data-field-name="@Resources.Business_Rule_CreationResources.Name">
                                                                <textarea id="Name" name="Name" class="form-control" rows="4" cols="50">@Model.Name</textarea>

                                                                <div id="ErrorName" style="color:red;"></div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group" id="divComplexity">
                                                            <label class="col-sm-2 control-label">@Resources.Business_Rule_CreationResources.Complexity</label>
                                                            <div class="col-sm-8" data-field-id="Complexity" data-attribute="188316" data-field-name="@Resources.Business_Rule_CreationResources.Complexity">
                                                                <select class="form-control" data-val="true" data-val-number="The field Complexity must be a number." data-val-required="The Complexity field is required." id="Complexity" name="Complexity">
                                                                    <option value=""></option>
                                                                    @if (varSpartan_BR_Complexity_Complexity != null)
                                                                    {
                                                                        foreach (var itemComplexity in varSpartan_BR_Complexity_Complexity)
                                                                        {
                                                                            if (itemComplexity.Value == Convert.ToString(Model.Complexity))
                                                                            {
                                                                                <option value="@itemComplexity.Value" selected>@itemComplexity.Text</option>
                                                                            }
                                                                            else
                                                                            {
                                                                                <option value="@itemComplexity.Value">@itemComplexity.Text</option>
                                                                            }
                                                                        }
                                                                    }
                                                                </select>
                                                                @*<span class="field-validation-valid" data-valmsg-for="Complexity" data-valmsg-replace="true"></span>*@
                                                            </div>
                                                        </div>
                                                        <div class="form-group" id="divStatus">
                                                            <label class="col-sm-2 control-label">@Resources.Business_Rule_CreationResources.Status</label>
                                                            <div class="col-sm-8" data-field-id="Status" data-attribute="188315" data-field-name="@Resources.Business_Rule_CreationResources.Status">
                                                                <select disabled="disabled" class="form-control" data-val="true" data-val-number="The field Status must be a number." data-val-required="The Status field is required." id="Status" name="Status">
                                                                    <option value=""></option>
                                                                    @if (varSpartan_BR_Status_Status != null)
                                                                    {
                                                                        foreach (var itemStatus in varSpartan_BR_Status_Status)
                                                                        {
                                                                            if (itemStatus.Value == Convert.ToString(Model.Status))
                                                                            {
                                                                                <option value="@itemStatus.Value" selected>@itemStatus.Text</option>
                                                                            }
                                                                            else
                                                                            {
                                                                                <option value="@itemStatus.Value">@itemStatus.Text</option>
                                                                            }
                                                                        }
                                                                    }
                                                                </select>
                                                                @*<span class="field-validation-valid" data-valmsg-for="Status" data-valmsg-replace="true"></span>*@
                                                            </div>
                                                        </div>

                                                        <div class="form-group" id="divUser">
                                                            <label class="col-sm-2 control-label">@Resources.Business_Rule_CreationResources.User</label>
                                                            <div class="col-sm-8" data-field-id="User" data-attribute="188282" data-field-name="@Resources.Business_Rule_CreationResources.User">
                                                                <select disabled="disabled" class="form-control" data-val="true" data-val-number="The field User must be a number." data-val-required="The User field is required." id="User" name="User">
                                                                    <option value=""></option>
                                                                    @if (varSpartan_User_User != null)
                                                                    {
                                                                        foreach (var itemUser in varSpartan_User_User)
                                                                        {
                                                                            if (itemUser.Value == Convert.ToString(Model.User))
                                                                            {
                                                                                <option value="@itemUser.Value" selected>@itemUser.Text</option>
                                                                            }
                                                                            else
                                                                            {
                                                                                <option value="@itemUser.Value">@itemUser.Text</option>
                                                                            }
                                                                        }
                                                                    }
                                                                </select>
                                                                @*<span class="field-validation-valid" data-valmsg-for="User" data-valmsg-replace="true"></span>*@
                                                            </div>
                                                        </div>
                                                        <div class="form-group" id="divCreation_Date">
                                                            <label class="col-sm-2 control-label">@Resources.Business_Rule_CreationResources.Creation_Date</label>
                                                            <div class="col-sm-8" data-field-id="Creation_Date" data-attribute="188283" data-field-name="@Resources.Business_Rule_CreationResources.Creation_Date">
                                                                <div class='input-group date' id='datetimepicker1'>
                                                                    <input disabled="disabled" class="form-control col-md-12" id="Creation_Date" name="Creation_Date" type="text" value="@Model.Creation_Date">
                                                                    <span class="input-group-addon">
                                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group" id="divCreation_Hour">
                                                            <label class="col-sm-2 control-label">@Resources.Business_Rule_CreationResources.Creation_Hour</label>
                                                            <div class="col-sm-8" data-field-id="Creation_Hour" data-attribute="188284" data-field-name="@Resources.Business_Rule_CreationResources.Creation_Hour">
                                                                <div class='input-group date' id='timePicker'>
                                                                    <input disabled="disabled" class="form-control col-md-12" id="Creation_Hour" name="Creation_Hour" type="text" data-autoclose="true" value="@Model.Creation_Hour">
                                                                    <span class="input-group-addon">
                                                                        <span class="glyphicon glyphicon-time"></span>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group" id="divLast_Updated_Date">
                                                            <label class="col-sm-2 control-label">@Resources.Business_Rule_CreationResources.Last_Updated_Date</label>
                                                            <div class="col-sm-8" data-field-id="Last_Updated_Date" data-attribute="188285" data-field-name="@Resources.Business_Rule_CreationResources.Last_Updated_Date">
                                                                <div class='input-group date' id='datetimepicker1'>
                                                                    <input disabled="disabled" class="form-control col-md-12" id="Last_Updated_Date" name="Last_Updated_Date" type="text" value="@Model.Last_Updated_Date">
                                                                    <span class="input-group-addon">
                                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group" id="divLast_Updated_Hour">
                                                            <label class="col-sm-2 control-label">@Resources.Business_Rule_CreationResources.Last_Updated_Hour</label>
                                                            <div class="col-sm-8" data-field-id="Last_Updated_Hour" data-attribute="188286" data-field-name="@Resources.Business_Rule_CreationResources.Last_Updated_Hour">
                                                                <div class='input-group date' id='timePicker'>
                                                                    <input disabled="disabled" class="form-control col-md-12" id="Last_Updated_Hour" name="Last_Updated_Hour" type="text" data-autoclose="true" value="@Model.Last_Updated_Hour">
                                                                    <span class="input-group-addon">
                                                                        <span class="glyphicon glyphicon-time"></span>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group" id="divTime_that_took">
                                                            <label class="col-sm-2 control-label">@Resources.Business_Rule_CreationResources.Time_that_took</label>
                                                            <div class="col-sm-8" data-field-id="Time_that_took" data-attribute="188287" data-field-name="@Resources.Business_Rule_CreationResources.Time_that_took">
                                                                <input disabled="disabled" class="form-control inputNumber" id="Time_that_took" name="Time_that_took" type="text" value="@Model.Time_that_took">
                                                                @*<span class="field-validation-valid" data-valmsg-for="Time_that_took" data-valmsg-replace="true"></span>*@
                                                            </div>
                                                        </div>
                                                        @if (attachedFileDocumentation != null && attachedFileDocumentation.File_Id > 0)
                                                        {
                                                            <div class="form-group" id="divAttachmentDocumentation">
                                                                <label class="col-sm-2 control-label">Previously Attached File</label>
                                                                <div class="col-sm-8" data-field-id="Documentation" data-attribute="188289" data-field-name="@Resources.Business_Rule_CreationResources.Documentation">
                                                                    <a href="@Url.Content("~/Frontal/Business_Rule_Creation/GetFile")?id=@attachedFileDocumentation.File_Id" target="_blank">@attachedFileDocumentation.Description</a>
                                                                    <img src="@Url.Content("~/Content/Images/RemoveAttachment.png")" onclick="RemoveAttachmentMainDocumentation('@attachedFileDocumentation.File_Id')" />
                                                                </div>
                                                                <input id="hdnRemoveDocumentation" name="RemoveDocumentation" value="0" type="hidden" />
                                                                <input class="form-control col-md-12" id="hdnAttachedDocumentation" type="hidden" name="Documentation" value="@Model.Documentation">
                                                            </div>
                                                        }
                                                        <div class="form-group" id="divDocumentation">
                                                            <label class="col-sm-2 control-label">@Resources.Business_Rule_CreationResources.Documentation</label>
                                                            <div class="col-sm-8" data-field-id="Documentation" data-attribute="188289" data-field-name="@Resources.Business_Rule_CreationResources.Documentation">
                                                                <input type="file" name="DocumentationFile" id="DocumentationFile" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <div id="divConditions">
                                                            <div class="ibox-title">
                                                                <h5>@Resources.Business_Rule_CreationResources.Conditions</h5>
                                                                <div class="ibox-tools">
                                                                </div>
                                                            </div>
                                                            <div class="ibox-content">
                                                                <div class="">
                                                                    <a onclick="@( ViewBag.Consult ? "" : "Spartan_BR_Conditions_DetailfnClickAddRow();")" href="javascript:void(0);" title="@( ViewBag.Consult ? "Usted no tiene permisos para realizar ésta acción" : Resources.Resources.AddNewRow)" class="Spartan_BR_Conditions_DetailAddRow btn @( ViewBag.Consult ? "btn-danger not-permission-btn" : "btn-primary")">
                                                                        <i class="glyphicon glyphicon-plus"></i>
                                                                    </a>
                                                                    @*<button onclick="Business_Rule_CreationGetBusinessRule('', 'Al Guardar o al Eliminar una Row', '188293')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#Business_Rule_CreationBusinessRule-form">
                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToCreateGrid">
                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                            </a>
                                                                        </button>*@
                                                                    @*<a onclick="@( ViewBag.Consult ? "" : "Spartan_BR_Conditions_DetailfnOpenAddRowPopUp();")" data-toggle="modal" title="@( ViewBag.Consult ? "Usted no tiene permisos para realizar ésta acción" : Resources.Resources.AddNewRow)" data-target="#AddSpartan_BR_Conditions_Detail-form" data-backdrop="static" data-keyboard="false" class="btn_mrpopup btn @( ViewBag.Consult ? "btn-danger not-permission-btn" : "btn-primary")">
                                                                            <i class="glyphicon glyphicon-new-window"></i>
                                                                        </a>*@
                                                                </div>
                                                                <br />
                                                                <div style='overflow-x: auto;'>
                                                                    <table class="table table-striped table-bordered table-hover childValidateTable" id="Spartan_BR_Conditions_DetailGrid" style="width:100%;">
                                                                        <thead>
                                                                            <tr>
                                                                                <th class="ActionHeader"><span>@Resources.Resources.Actions</span></th>

                                                                                <th class="Condition_OperatorHeader">
                                                                                    <span>
                                                                                        @*<button type="button" data-attribute="188317" data-field-id="Spartan_BR_Conditions_DetailCondition_Operator" data-field-name="@Resources.Spartan_BR_Conditions_DetailResources.Condition_Operator" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Conditions_DetailResources.Condition_Operator">
                                                                                                    <i class="fa fa-cogs fa-spin"></i>
                                                                                                </a>
                                                                                            </button>*@@Resources.Spartan_BR_Conditions_DetailResources.Condition_Operator
                                                                                        </span>
                                                                                    </th>
                                                                                    <th class="First_Operator_TypeHeader">
                                                                                        <span>
                                                                                            @*<button type="button" data-attribute="188291" data-field-id="Spartan_BR_Conditions_DetailFirst_Operator_Type" data-field-name="@Resources.Spartan_BR_Conditions_DetailResources.First_Operator_Type" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                    <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Conditions_DetailResources.First_Operator_Type">
                                                                                                        <i class="fa fa-cogs fa-spin"></i>
                                                                                                    </a>
                                                                                                </button>*@@Resources.Spartan_BR_Conditions_DetailResources.First_Operator_Type
                                                                                            </span>
                                                                                        </th>
                                                                                        <th class="First_Operator_ValueHeader">
                                                                                            <span>
                                                                                                @*<button type="button" data-attribute="188318" data-field-id="Spartan_BR_Conditions_DetailFirst_Operator_Value" data-field-name="@Resources.Spartan_BR_Conditions_DetailResources.First_Operator_Value" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Conditions_DetailResources.First_Operator_Value">
                                                                                                            <i class="fa fa-cogs fa-spin"></i>
                                                                                                        </a>
                                                                                                    </button>*@@Resources.Spartan_BR_Conditions_DetailResources.First_Operator_Value
                                                                                                </span>
                                                                                            </th>
                                                                                            <th class="ConditionHeader">
                                                                                                <span>
                                                                                                    @*<button type="button" data-attribute="188325" data-field-id="Spartan_BR_Conditions_DetailCondition" data-field-name="@Resources.Spartan_BR_Conditions_DetailResources.Condition" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Conditions_DetailResources.Condition">
                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                            </a>
                                                                                                        </button>*@@Resources.Spartan_BR_Conditions_DetailResources.Condition
                                                                                                    </span>
                                                                                                </th>
                                                                                                <th class="Second_Operator_TypeHeader">
                                                                                                    <span>
                                                                                                        @*<button type="button" data-attribute="188319" data-field-id="Spartan_BR_Conditions_DetailSecond_Operator_Type" data-field-name="@Resources.Spartan_BR_Conditions_DetailResources.Second_Operator_Type" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Conditions_DetailResources.Second_Operator_Type">
                                                                                                                    <i class="fa fa-cogs fa-spin"></i>
                                                                                                                </a>
                                                                                                            </button>*@
                                                                                                        @Resources.Spartan_BR_Conditions_DetailResources.Second_Operator_Type
                                                                                                    </span>
                                                                                                </th>
                                                                                                <th class="Second_Operator_ValueHeader">
                                                                                                    <span>
                                                                                                        @*<button type="button" data-attribute="188320" data-field-id="Spartan_BR_Conditions_DetailSecond_Operator_Value" data-field-name="@Resources.Spartan_BR_Conditions_DetailResources.Second_Operator_Value" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Conditions_DetailResources.Second_Operator_Value">
                                                                                                                    <i class="fa fa-cogs fa-spin"></i>
                                                                                                                </a>
                                                                                                            </button>*@@Resources.Spartan_BR_Conditions_DetailResources.Second_Operator_Value
                                                                                                        </span>
                                                                                                    </th>


                                                                                                </tr>
                                                                                            </thead>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div id="divActions_if_conditions_are_True">
                                                                                <div class="ibox-title">
                                                                                    <h5>@Resources.Business_Rule_CreationResources.Actions_if_conditions_are_True</h5>
                                                                                    <div class="ibox-tools">
                                                                                    </div>
                                                                                </div>
                                                                                <div class="ibox-content">
                                                                                    <div class="">
                                                                                        <a onclick="@( ViewBag.Consult ? "" : "Spartan_BR_Actions_True_DetailfnClickAddRow();")" href="javascript:void(0);" title="@( ViewBag.Consult ? "Usted no tiene permisos para realizar ésta acción" : Resources.Resources.AddNewRow)" class="Spartan_BR_Actions_True_DetailAddRow btn @(  ViewBag.Consult ? "btn-danger not-permission-btn" : "btn-primary")">
                                                                                            <i class="glyphicon glyphicon-plus"></i>
                                                                                        </a>
                                                                                        @*<button onclick="Business_Rule_CreationGetBusinessRule('', 'Al Guardar o al Eliminar una Row', '188296')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#Business_Rule_CreationBusinessRule-form">
                                                                                                <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToCreateGrid">
                                                                                                    <i class="fa fa-cogs fa-spin"></i>
                                                                                                </a>
                                                                                            </button>*@
                                                                                        @*<a onclick="@( ViewBag.Consult ? "" : "Spartan_BR_Actions_True_DetailfnOpenAddRowPopUp();")" data-toggle="modal" title="@( ViewBag.Consult ? "Usted no tiene permisos para realizar ésta acción" : Resources.Resources.AddNewRow)" data-target="#AddSpartan_BR_Actions_True_Detail-form" data-backdrop="static" data-keyboard="false" class="btn_mrpopup btn @( ViewBag.Consult ? "btn-danger not-permission-btn" : "btn-primary")">
                                                                                                <i class="glyphicon glyphicon-new-window"></i>
                                                                                            </a>*@
                                                                                    </div>
                                                                                    <br />
                                                                                    <div style='overflow-x: auto;'>
                                                                                        <table class="table table-striped table-bordered table-hover childValidateTable" id="Spartan_BR_Actions_True_DetailGrid">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th class="ActionHeader"><span>@Resources.Resources.Actions</span></th>
                                                                                                    <th class="Action_ClassificationHeader">
                                                                                                        <span>
                                                                                                            @*<button type="button" data-attribute="188332" data-field-id="Spartan_BR_Actions_True_DetailAction_Classification" data-field-name="@Resources.Spartan_BR_Actions_True_DetailResources.Action_Classification" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                    <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_True_DetailResources.Action_Classification">
                                                                                                                        <i class="fa fa-cogs fa-spin"></i>
                                                                                                                    </a>
                                                                                                                </button>*@@Resources.Spartan_BR_Actions_True_DetailResources.Action_Classification
                                                                                                            </span>
                                                                                                        </th>
                                                                                                        <th class="ActionHeader">
                                                                                                            <span>
                                                                                                                @*<button type="button" data-attribute="188333" data-field-id="Spartan_BR_Actions_True_DetailAction" data-field-name="@Resources.Spartan_BR_Actions_True_DetailResources.Action" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_True_DetailResources.Action">
                                                                                                                            <i class="fa fa-cogs fa-spin"></i>
                                                                                                                        </a>
                                                                                                                    </button>*@@Resources.Spartan_BR_Actions_True_DetailResources.Action
                                                                                                                </span>
                                                                                                            </th>
                                                                                                            <th class="Action_ResultHeader">
                                                                                                                <span>
                                                                                                                    @*<button type="button" data-attribute="188334" data-field-id="Spartan_BR_Actions_True_DetailAction_Result" data-field-name="@Resources.Spartan_BR_Actions_True_DetailResources.Action_Result" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_True_DetailResources.Action_Result">
                                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                                            </a>
                                                                                                                        </button>*@@Resources.Spartan_BR_Actions_True_DetailResources.Action_Result
                                                                                                                    </span>
                                                                                                                </th>
                                                                                                                <th class="Parameter_1Header">
                                                                                                                    <span>
                                                                                                                        @*<button type="button" data-attribute="188335" data-field-id="Spartan_BR_Actions_True_DetailParameter_1" data-field-name="@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_1" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_1">
                                                                                                                                    <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                </a>
                                                                                                                            </button>*@@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_1
                                                                                                                        </span>
                                                                                                                    </th>
                                                                                                                    <th class="Parameter_2Header">
                                                                                                                        <span>
                                                                                                                            @*<button type="button" data-attribute="188336" data-field-id="Spartan_BR_Actions_True_DetailParameter_2" data-field-name="@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_2" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                    <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_2">
                                                                                                                                        <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                    </a>
                                                                                                                                </button>*@@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_2
                                                                                                                            </span>
                                                                                                                        </th>
                                                                                                                        <th class="Parameter_3Header">
                                                                                                                            <span>
                                                                                                                                @*<button type="button" data-attribute="188337" data-field-id="Spartan_BR_Actions_True_DetailParameter_3" data-field-name="@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_3" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_3">
                                                                                                                                            <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                        </a>
                                                                                                                                    </button>*@@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_3
                                                                                                                                </span>
                                                                                                                            </th>
                                                                                                                            <th class="Parameter_4Header">
                                                                                                                                <span>
                                                                                                                                    @*<button type="button" data-attribute="188338" data-field-id="Spartan_BR_Actions_True_DetailParameter_4" data-field-name="@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_4" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_4">
                                                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                            </a>
                                                                                                                                        </button>*@@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_4
                                                                                                                                    </span>
                                                                                                                                </th>
                                                                                                                                <th class="Parameter_5Header">
                                                                                                                                    <span>
                                                                                                                                        <button type="button" data-attribute="188339" data-field-id="Spartan_BR_Actions_True_DetailParameter_5" data-field-name="@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_5" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_5">
                                                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                            </a>
                                                                                                                                        </button>@Resources.Spartan_BR_Actions_True_DetailResources.Parameter_5
                                                                                                                                    </span>
                                                                                                                                </th>

                                                                                                                            </tr>
                                                                                                                        </thead>
                                                                                                                    </table>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <div id="divActions_if_conditions_are_False">
                                                                                                            <div class="ibox-title">
                                                                                                                <h5>@Resources.Business_Rule_CreationResources.Actions_if_conditions_are_False</h5>
                                                                                                                <div class="ibox-tools">
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="ibox-content">
                                                                                                                <div class="">
                                                                                                                    <a onclick="@( ViewBag.Consult ? "" : "Spartan_BR_Actions_False_DetailfnClickAddRow();")" href="javascript:void(0);" title="@(  ViewBag.Consult ? "Usted no tiene permisos para realizar ésta acción" : Resources.Resources.AddNewRow)" class="Spartan_BR_Actions_False_DetailAddRow btn @( ViewBag.Consult ? "btn-danger not-permission-btn" : "btn-primary")">
                                                                                                                        <i class="glyphicon glyphicon-plus"></i>
                                                                                                                    </a>
                                                                                                                    @*<button onclick="Business_Rule_CreationGetBusinessRule('', 'Al Guardar o al Eliminar una Row', '188299')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#Business_Rule_CreationBusinessRule-form">
                                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToCreateGrid">
                                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                                            </a>
                                                                                                                        </button>*@
                                                                                                                    @*<a onclick="@( ViewBag.Consult ? "" : "Spartan_BR_Actions_False_DetailfnOpenAddRowPopUp();")" data-toggle="modal" title="@(ViewBag.Consult ? "Usted no tiene permisos para realizar ésta acción" : Resources.Resources.AddNewRow)" data-target="#AddSpartan_BR_Actions_False_Detail-form" data-backdrop="static" data-keyboard="false" class="btn_mrpopup btn @( ViewBag.Consult ? "btn-danger not-permission-btn" : "btn-primary")">
                                                                                                                            <i class="glyphicon glyphicon-new-window"></i>
                                                                                                                        </a>*@
                                                                                                                </div>
                                                                                                                <br />
                                                                                                                <div style='overflow-x: auto;'>
                                                                                                                    <table class="table table-striped table-bordered table-hover childValidateTable" id="Spartan_BR_Actions_False_DetailGrid">
                                                                                                                        <thead>
                                                                                                                            <tr>
                                                                                                                                <th class="ActionHeader"><span>@Resources.Resources.Actions</span></th>
                                                                                                                                <th class="Action_ClassificationHeader">
                                                                                                                                    <span>
                                                                                                                                        @*<button type="button" data-attribute="188340" data-field-id="Spartan_BR_Actions_False_DetailAction_Classification" data-field-name="@Resources.Spartan_BR_Actions_False_DetailResources.Action_Classification" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_False_DetailResources.Action_Classification">
                                                                                                                                                    <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                </a>
                                                                                                                                            </button>*@@Resources.Spartan_BR_Actions_False_DetailResources.Action_Classification
                                                                                                                                        </span>
                                                                                                                                    </th>
                                                                                                                                    <th class="ActionHeader">
                                                                                                                                        <span>
                                                                                                                                            @*<button type="button" data-attribute="188341" data-field-id="Spartan_BR_Actions_False_DetailAction" data-field-name="@Resources.Spartan_BR_Actions_False_DetailResources.Action" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                    <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_False_DetailResources.Action">
                                                                                                                                                        <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                    </a>
                                                                                                                                                </button>*@@Resources.Spartan_BR_Actions_False_DetailResources.Action
                                                                                                                                            </span>
                                                                                                                                        </th>
                                                                                                                                        <th class="Action_ResultHeader">
                                                                                                                                            <span>
                                                                                                                                                @*<button type="button" data-attribute="188342" data-field-id="Spartan_BR_Actions_False_DetailAction_Result" data-field-name="@Resources.Spartan_BR_Actions_False_DetailResources.Action_Result" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_False_DetailResources.Action_Result">
                                                                                                                                                            <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                        </a>
                                                                                                                                                    </button>*@@Resources.Spartan_BR_Actions_False_DetailResources.Action_Result
                                                                                                                                                </span>
                                                                                                                                            </th>
                                                                                                                                            <th class="Parameter_1Header">
                                                                                                                                                <span>
                                                                                                                                                    @*<button type="button" data-attribute="188343" data-field-id="Spartan_BR_Actions_False_DetailParameter_1" data-field-name="@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_1" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_1">
                                                                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                            </a>
                                                                                                                                                        </button>*@@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_1
                                                                                                                                                    </span>
                                                                                                                                                </th>
                                                                                                                                                <th class="Parameter_2Header">
                                                                                                                                                    <span>
                                                                                                                                                        @*<button type="button" data-attribute="188344" data-field-id="Spartan_BR_Actions_False_DetailParameter_2" data-field-name="@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_2" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_2">
                                                                                                                                                                    <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                </a>
                                                                                                                                                            </button>*@@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_2
                                                                                                                                                        </span>
                                                                                                                                                    </th>
                                                                                                                                                    <th class="Parameter_3Header">
                                                                                                                                                        <span>
                                                                                                                                                            @*<button type="button" data-attribute="188345" data-field-id="Spartan_BR_Actions_False_DetailParameter_3" data-field-name="@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_3" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                    <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_3">
                                                                                                                                                                        <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                    </a>
                                                                                                                                                                </button>*@@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_3
                                                                                                                                                            </span>
                                                                                                                                                        </th>
                                                                                                                                                        <th class="Parameter_4Header">
                                                                                                                                                            <span>
                                                                                                                                                                @*<button type="button" data-attribute="188346" data-field-id="Spartan_BR_Actions_False_DetailParameter_4" data-field-name="@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_4" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_4">
                                                                                                                                                                            <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                        </a>
                                                                                                                                                                    </button>*@@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_4
                                                                                                                                                                </span>
                                                                                                                                                            </th>
                                                                                                                                                            <th class="Parameter_5Header">
                                                                                                                                                                <span>
                                                                                                                                                                    @*<button type="button" data-attribute="188347" data-field-id="Spartan_BR_Actions_False_DetailParameter_5" data-field-name="@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_5" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_5">
                                                                                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                            </a>
                                                                                                                                                                        </button>*@@Resources.Spartan_BR_Actions_False_DetailResources.Parameter_5
                                                                                                                                                                    </span>
                                                                                                                                                                </th>

                                                                                                                                                            </tr>
                                                                                                                                                        </thead>
                                                                                                                                                    </table>
                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                        </div>
                                                                                                                                    </div>
                                                                                                                                </div>


                                                                                                                                <div id="tabPeer_Review" class="tab-pane">
                                                                                                                                    <div class="panel-body">
                                                                                                                                        <div id="divPeer_Reviews">
                                                                                                                                            <div class="ibox-title">
                                                                                                                                                <h5>@Resources.Business_Rule_CreationResources.Peer_Reviews</h5>
                                                                                                                                                <div class="ibox-tools">
                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                            <div class="ibox-content">
                                                                                                                                                <div class="">
                                                                                                                                                    <a onclick="@(  ViewBag.Consult ? "" : "Spartan_BR_Peer_ReviewfnClickAddRow();")" href="javascript:void(0);" title="@(  ViewBag.Consult ? "Usted no tiene permisos para realizar ésta acción" : Resources.Resources.AddNewRow)" class="Spartan_BR_Peer_ReviewAddRow btn @( ViewBag.Consult ? "btn-danger not-permission-btn" : "btn-primary")">
                                                                                                                                                        <i class="glyphicon glyphicon-plus"></i>
                                                                                                                                                    </a>
                                                                                                                                                    @*<button onclick="Business_Rule_CreationGetBusinessRule('', 'Al Guardar o al Eliminar una Row', '188306')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#Business_Rule_CreationBusinessRule-form">
                                                                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToCreateGrid">
                                                                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                            </a>
                                                                                                                                                        </button>*@
                                                                                                                                                    <!--Solucion Incidencia 3-->
                                                                                                                                                    @*<a onclick="@( ViewBag.Consult ? "" : "Spartan_BR_Peer_ReviewfnOpenAddRowPopUp();")" data-toggle="modal" title="@(  ViewBag.Consult ? "Usted no tiene permisos para realizar ésta acción" : Resources.Resources.AddNewRow)" data-target="#AddSpartan_BR_Peer_Review-form" data-backdrop="static" data-keyboard="false" class="btn_mrpopup btn @( ViewBag.Consult ? "btn-danger not-permission-btn" : "btn-primary")">
                                                                                                                                                            <i class="glyphicon glyphicon-new-window"></i>
                                                                                                                                                        </a>*@
                                                                                                                                                </div>
                                                                                                                                                <br />
                                                                                                                                                <div style='overflow-x: auto;'>
                                                                                                                                                    <table class="table table-striped table-bordered table-hover childValidateTable" id="Spartan_BR_Peer_ReviewGrid">
                                                                                                                                                        <thead>
                                                                                                                                                            <tr>
                                                                                                                                                                <th class="ActionHeader"><span>@Resources.Resources.Actions</span></th>
                                                                                                                                                                <th class="User_that_reviewedHeader">
                                                                                                                                                                    <span>
                                                                                                                                                                        @*<button type="button" data-attribute="188263" data-field-id="Spartan_BR_Peer_ReviewUser_that_reviewed" data-field-name="@Resources.Spartan_BR_Peer_ReviewResources.User_that_reviewed" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Peer_ReviewResources.User_that_reviewed">
                                                                                                                                                                                    <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                </a>
                                                                                                                                                                            </button>*@@Resources.Spartan_BR_Peer_ReviewResources.User_that_reviewed
                                                                                                                                                                        </span>
                                                                                                                                                                    </th>
                                                                                                                                                                    <th class="Acceptance_CriteriaHeader">
                                                                                                                                                                        <span>
                                                                                                                                                                            @*<button type="button" data-attribute="188264" data-field-id="Spartan_BR_Peer_ReviewAcceptance_Criteria" data-field-name="@Resources.Spartan_BR_Peer_ReviewResources.Acceptance_Criteria" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                    <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Peer_ReviewResources.Acceptance_Criteria">
                                                                                                                                                                                        <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                    </a>
                                                                                                                                                                                </button>*@@Resources.Spartan_BR_Peer_ReviewResources.Acceptance_Criteria
                                                                                                                                                                            </span>
                                                                                                                                                                        </th>
                                                                                                                                                                        <th class="It_workedHeader">
                                                                                                                                                                            <span>
                                                                                                                                                                                @*<button type="button" data-attribute="188265" data-field-id="Spartan_BR_Peer_ReviewIt_worked" data-field-name="@Resources.Spartan_BR_Peer_ReviewResources.It_worked" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Peer_ReviewResources.It_worked">
                                                                                                                                                                                            <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                        </a>
                                                                                                                                                                                    </button>*@@Resources.Spartan_BR_Peer_ReviewResources.It_worked
                                                                                                                                                                                </span>
                                                                                                                                                                            </th>
                                                                                                                                                                            <th class="Rejection_reasonHeader">
                                                                                                                                                                                <span>
                                                                                                                                                                                    @*<button type="button" data-attribute="188266" data-field-id="Spartan_BR_Peer_ReviewRejection_reason" data-field-name="@Resources.Spartan_BR_Peer_ReviewResources.Rejection_reason" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Peer_ReviewResources.Rejection_reason">
                                                                                                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                            </a>
                                                                                                                                                                                        </button>*@@Resources.Spartan_BR_Peer_ReviewResources.Rejection_reason
                                                                                                                                                                                    </span>
                                                                                                                                                                                </th>
                                                                                                                                                                                <th class="CommentsHeader">
                                                                                                                                                                                    <span>
                                                                                                                                                                                        @*<button type="button" data-attribute="188267" data-field-id="Spartan_BR_Peer_ReviewComments" data-field-name="@Resources.Spartan_BR_Peer_ReviewResources.Comments" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Peer_ReviewResources.Comments">
                                                                                                                                                                                                    <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                </a>
                                                                                                                                                                                            </button>*@@Resources.Spartan_BR_Peer_ReviewResources.Comments
                                                                                                                                                                                        </span>
                                                                                                                                                                                    </th>
                                                                                                                                                                                    <th class="EvidenceHeader">
                                                                                                                                                                                        <span>
                                                                                                                                                                                            @*<button type="button" data-attribute="188268" data-field-id="Spartan_BR_Peer_ReviewEvidence" data-field-name="@Resources.Spartan_BR_Peer_ReviewResources.Evidence" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                    <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_Peer_ReviewResources.Evidence">
                                                                                                                                                                                                        <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                    </a>
                                                                                                                                                                                                </button>*@@Resources.Spartan_BR_Peer_ReviewResources.Evidence
                                                                                                                                                                                            </span>
                                                                                                                                                                                        </th>

                                                                                                                                                                                    </tr>
                                                                                                                                                                                </thead>
                                                                                                                                                                            </table>
                                                                                                                                                                        </div>
                                                                                                                                                                    </div>
                                                                                                                                                                </div>
                                                                                                                                                            </div>
                                                                                                                                                        </div>


                                                                                                                                                        <div id="tabTesting" class="tab-pane">
                                                                                                                                                            <div class="panel-body">
                                                                                                                                                                <div id="divTesting">
                                                                                                                                                                    <div class="ibox-title">
                                                                                                                                                                        <h5>@Resources.Business_Rule_CreationResources.Testing</h5>
                                                                                                                                                                        <div class="ibox-tools">
                                                                                                                                                                        </div>
                                                                                                                                                                    </div>
                                                                                                                                                                    <div class="ibox-content">
                                                                                                                                                                        <div class="">
                                                                                                                                                                            <a onclick="@( ViewBag.Consult ? "" : "Spartan_BR_TestingfnClickAddRow();")" href="javascript:void(0);" title="@(  ViewBag.Consult ? "Usted no tiene permisos para realizar ésta acción" : Resources.Resources.AddNewRow)" class="Spartan_BR_TestingAddRow btn @( ViewBag.Consult ? "btn-danger not-permission-btn" : "btn-primary")">
                                                                                                                                                                                <i class="glyphicon glyphicon-plus"></i>
                                                                                                                                                                            </a>
                                                                                                                                                                            @*<button onclick="Business_Rule_CreationGetBusinessRule('', 'Al Guardar o al Eliminar una Row', '188307')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#Business_Rule_CreationBusinessRule-form">
                                                                                                                                                                                    <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToCreateGrid">
                                                                                                                                                                                        <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                    </a>
                                                                                                                                                                                </button>*@
                                                                                                                                                                            <!--Solucion Incidencia 3-->
                                                                                                                                                                            @*<a onclick="@( ViewBag.Consult ? "" : "Spartan_BR_TestingfnOpenAddRowPopUp();")" data-toggle="modal" title="@( ViewBag.Consult ? "Usted no tiene permisos para realizar ésta acción" : Resources.Resources.AddNewRow)" data-target="#AddSpartan_BR_Testing-form" data-backdrop="static" data-keyboard="false" class="btn_mrpopup btn @( ViewBag.Consult ? "btn-danger not-permission-btn" : "btn-primary")">
                                                                                                                                                                                    <i class="glyphicon glyphicon-new-window"></i>
                                                                                                                                                                                </a>*@
                                                                                                                                                                        </div>
                                                                                                                                                                        <br />
                                                                                                                                                                        <div style='overflow-x: auto;'>
                                                                                                                                                                            <table class="table table-striped table-bordered table-hover childValidateTable" id="Spartan_BR_TestingGrid">
                                                                                                                                                                                <thead>
                                                                                                                                                                                    <tr>
                                                                                                                                                                                        <th class="ActionHeader"><span>@Resources.Resources.Actions</span></th>
                                                                                                                                                                                        <th class="User_that_reviewedHeader">
                                                                                                                                                                                            <span>
                                                                                                                                                                                                @*<button type="button" data-attribute="188270" data-field-id="Spartan_BR_TestingUser_that_reviewed" data-field-name="@Resources.Spartan_BR_TestingResources.User_that_reviewed" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_TestingResources.User_that_reviewed">
                                                                                                                                                                                                            <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                        </a>
                                                                                                                                                                                                    </button>*@@Resources.Spartan_BR_TestingResources.User_that_reviewed
                                                                                                                                                                                                </span>
                                                                                                                                                                                            </th>
                                                                                                                                                                                            <th class="Acceptance_CriteraHeader">
                                                                                                                                                                                                <span>
                                                                                                                                                                                                    @*<button type="button" data-attribute="188271" data-field-id="Spartan_BR_TestingAcceptance_Critera" data-field-name="@Resources.Spartan_BR_TestingResources.Acceptance_Critera" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_TestingResources.Acceptance_Critera">
                                                                                                                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                            </a>
                                                                                                                                                                                                        </button>*@@Resources.Spartan_BR_TestingResources.Acceptance_Critera
                                                                                                                                                                                                    </span>
                                                                                                                                                                                                </th>
                                                                                                                                                                                                <th class="It_workedHeader">
                                                                                                                                                                                                    <span>
                                                                                                                                                                                                        @*<button type="button" data-attribute="188272" data-field-id="Spartan_BR_TestingIt_worked" data-field-name="@Resources.Spartan_BR_TestingResources.It_worked" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                                <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_TestingResources.It_worked">
                                                                                                                                                                                                                    <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                </a>
                                                                                                                                                                                                            </button>*@@Resources.Spartan_BR_TestingResources.It_worked
                                                                                                                                                                                                        </span>
                                                                                                                                                                                                    </th>
                                                                                                                                                                                                    <th class="Rejection_ReasonHeader">
                                                                                                                                                                                                        <span>
                                                                                                                                                                                                            @*<button type="button" data-attribute="188273" data-field-id="Spartan_BR_TestingRejection_Reason" data-field-name="@Resources.Spartan_BR_TestingResources.Rejection_Reason" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                                    <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_TestingResources.Rejection_Reason">
                                                                                                                                                                                                                        <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                    </a>
                                                                                                                                                                                                                </button>*@@Resources.Spartan_BR_TestingResources.Rejection_Reason
                                                                                                                                                                                                            </span>
                                                                                                                                                                                                        </th>
                                                                                                                                                                                                        <th class="CommentsHeader">
                                                                                                                                                                                                            <span>
                                                                                                                                                                                                                @*<button type="button" data-attribute="188274" data-field-id="Spartan_BR_TestingComments" data-field-name="@Resources.Spartan_BR_TestingResources.Comments" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_TestingResources.Comments">
                                                                                                                                                                                                                            <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                    </button>*@@Resources.Spartan_BR_TestingResources.Comments
                                                                                                                                                                                                                </span>
                                                                                                                                                                                                            </th>
                                                                                                                                                                                                            <th class="EvidenceHeader">
                                                                                                                                                                                                                <span>
                                                                                                                                                                                                                    @*<button type="button" data-attribute="188275" data-field-id="Spartan_BR_TestingEvidence" data-field-name="@Resources.Spartan_BR_TestingResources.Evidence" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_TestingResources.Evidence">
                                                                                                                                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                        </button>*@@Resources.Spartan_BR_TestingResources.Evidence
                                                                                                                                                                                                                    </span>
                                                                                                                                                                                                                </th>

                                                                                                                                                                                                            </tr>
                                                                                                                                                                                                        </thead>
                                                                                                                                                                                                    </table>
                                                                                                                                                                                                </div>
                                                                                                                                                                                            </div>
                                                                                                                                                                                        </div>
                                                                                                                                                                                    </div>
                                                                                                                                                                                </div>
                                                                                                                                                                                <div id="tabHistory" class="tab-pane">
                                                                                                                                                                                    <div class="panel-body">
                                                                                                                                                                                        <div id="divHistory">
                                                                                                                                                                                            <div class="ibox-title">
                                                                                                                                                                                                <h5>@Resources.Business_Rule_CreationResources.TabHistory</h5>
                                                                                                                                                                                                <div class="ibox-tools">
                                                                                                                                                                                                </div>
                                                                                                                                                                                            </div>
                                                                                                                                                                                            <div class="ibox-content">
                                                                                                                                                                                                <div class="">
                                                                                                                                                                                                    @*<a onclick="Spartan_BR_HistoryfnClickAddRow();" href="javascript:void(0);" title="@Resources.Resources.AddNewRow" class="Spartan_BR_HistoryAddRow btn btn-primary">
                                                                                                                                                                                                            <i class="glyphicon glyphicon-plus"></i>
                                                                                                                                                                                                        </a>*@
                                                                                                                                                                                                    @*<button onclick="Business_Rule_CreationGetBusinessRule('', 'Al Guardar o al Eliminar una Row', '188611')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#Business_Rule_CreationBusinessRule-form">
                                                                                                                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToCreateGrid">
                                                                                                                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                            </a>
                                                                                                                                                                                                        </button>*@
                                                                                                                                                                                                    @*<a onclick="Spartan_BR_HistoryfnOpenAddRowPopUp();" data-toggle="modal" title="@Resources.Resources.AddNewRow" data-target="#AddSpartan_BR_History-form" data-backdrop="static" data-keyboard="false" class="btn_mrpopup btn btn-primary">
                                                                                                                                                                                                            <i class="glyphicon glyphicon-new-window"></i>
                                                                                                                                                                                                        </a>*@
                                                                                                                                                                                                </div>
                                                                                                                                                                                                <br />
                                                                                                                                                                                                <div style='overflow-x: auto;'>
                                                                                                                                                                                                    <table class="table table-striped table-bordered table-hover childValidateTable" id="Spartan_BR_HistoryGrid">
                                                                                                                                                                                                        <thead>
                                                                                                                                                                                                            <tr>
                                                                                                                                                                                                                @*<th class="ActionHeader"><span>@Resources.Resources.Actions</span></th>*@
                                                                                                                                                                                                                <th class="User_loggedHeader">
                                                                                                                                                                                                                    <span>
                                                                                                                                                                                                                        @*<button type="button" data-attribute="188599" data-field-id="Spartan_BR_HistoryUser_logged" data-field-name="@Resources.Spartan_BR_HistoryResources.User_logged" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                                                <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_HistoryResources.User_logged">
                                                                                                                                                                                                                                    <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                                </a>
                                                                                                                                                                                                                            </button>*@@Resources.Spartan_BR_HistoryResources.User_logged
                                                                                                                                                                                                                        </span>
                                                                                                                                                                                                                    </th>
                                                                                                                                                                                                                    <th class="StatusHeader">
                                                                                                                                                                                                                        <span>
                                                                                                                                                                                                                            @*<button type="button" data-attribute="188600" data-field-id="Spartan_BR_HistoryStatus" data-field-name="@Resources.Spartan_BR_HistoryResources.Status" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                                                    <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_HistoryResources.Status">
                                                                                                                                                                                                                                        <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                                    </a>
                                                                                                                                                                                                                                </button>*@@Resources.Spartan_BR_HistoryResources.Status
                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                        </th>
                                                                                                                                                                                                                        <th class="Change_DateHeader">
                                                                                                                                                                                                                            <span>
                                                                                                                                                                                                                                @*<button type="button" data-attribute="188601" data-field-id="Spartan_BR_HistoryChange_Date" data-field-name="@Resources.Spartan_BR_HistoryResources.Change_Date" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_HistoryResources.Change_Date">
                                                                                                                                                                                                                                            <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                                    </button>*@@Resources.Spartan_BR_HistoryResources.Change_Date
                                                                                                                                                                                                                                </span>
                                                                                                                                                                                                                            </th>
                                                                                                                                                                                                                            <th class="Hour_DateHeader">
                                                                                                                                                                                                                                <span>
                                                                                                                                                                                                                                    @*<button type="button" data-attribute="188602" data-field-id="Spartan_BR_HistoryHour_Date" data-field-name="@Resources.Spartan_BR_HistoryResources.Hour_Date" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_HistoryResources.Hour_Date">
                                                                                                                                                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                                        </button>*@@Resources.Spartan_BR_HistoryResources.Hour_Date
                                                                                                                                                                                                                                    </span>
                                                                                                                                                                                                                                </th>
                                                                                                                                                                                                                                <th class="Time_elapsedHeader">
                                                                                                                                                                                                                                    <span>
                                                                                                                                                                                                                                        @*<button type="button" data-attribute="188603" data-field-id="Spartan_BR_HistoryTime_elapsed" data-field-name="@Resources.Spartan_BR_HistoryResources.Time_elapsed" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                                                                <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_HistoryResources.Time_elapsed">
                                                                                                                                                                                                                                                    <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                                                </a>
                                                                                                                                                                                                                                            </button>*@
                                                                                                                                                                                                                                        @Resources.Spartan_BR_HistoryResources.Time_elapsed
                                                                                                                                                                                                                                    </span>
                                                                                                                                                                                                                                </th>
                                                                                                                                                                                                                                <th class="Change_TypeHeader">
                                                                                                                                                                                                                                    <span>
                                                                                                                                                                                                                                        @*<button type="button" data-attribute="188606" data-field-id="Spartan_BR_HistoryChange_Type" data-field-name="@Resources.Spartan_BR_HistoryResources.Change_Type" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                                                                <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_HistoryResources.Change_Type">
                                                                                                                                                                                                                                                    <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                                                </a>
                                                                                                                                                                                                                                            </button>*@@Resources.Spartan_BR_HistoryResources.Change_Type
                                                                                                                                                                                                                                        </span>
                                                                                                                                                                                                                                    </th>
                                                                                                                                                                                                                                    <th class="ConditionsHeader">
                                                                                                                                                                                                                                        <span>
                                                                                                                                                                                                                                            @*<button type="button" data-attribute="188607" data-field-id="Spartan_BR_HistoryConditions" data-field-name="@Resources.Spartan_BR_HistoryResources.Conditions" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                                                                    <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_HistoryResources.Conditions">
                                                                                                                                                                                                                                                        <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                                                    </a>
                                                                                                                                                                                                                                                </button>*@@Resources.Spartan_BR_HistoryResources.Conditions
                                                                                                                                                                                                                                            </span>
                                                                                                                                                                                                                                        </th>
                                                                                                                                                                                                                                        <th class="Actions_TrueHeader">
                                                                                                                                                                                                                                            <span>
                                                                                                                                                                                                                                                @*<button type="button" data-attribute="188608" data-field-id="Spartan_BR_HistoryActions_True" data-field-name="@Resources.Spartan_BR_HistoryResources.Actions_True" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_HistoryResources.Actions_True">
                                                                                                                                                                                                                                                            <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                                                    </button>*@@Resources.Spartan_BR_HistoryResources.Actions_True
                                                                                                                                                                                                                                                </span>
                                                                                                                                                                                                                                            </th>
                                                                                                                                                                                                                                            <th class="Actions_FalseHeader">
                                                                                                                                                                                                                                                <span>
                                                                                                                                                                                                                                                    @*<button type="button" data-attribute="188609" data-field-id="Spartan_BR_HistoryActions_False" data-field-name="@Resources.Spartan_BR_HistoryResources.Actions_False" data-toggle="modal" data-target="#Business_Rule_CreationPropertyBusinessModal-form" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton btnPopupBusinessRules">
                                                                                                                                                                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleFor@Resources.Spartan_BR_HistoryResources.Actions_False">
                                                                                                                                                                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                                                        </button>*@@Resources.Spartan_BR_HistoryResources.Actions_False
                                                                                                                                                                                                                                                    </span>
                                                                                                                                                                                                                                                </th>
                                                                                                                                                                                                                                            </tr>
                                                                                                                                                                                                                                        </thead>
                                                                                                                                                                                                                                    </table>
                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                </div>
                                                                                                                                                                                                            </div>
                                                                                                                                                                                                            <br />
                                                                                                                                                                                                            <div class="form-actions fluid">
                                                                                                                                                                                                                <input type="hidden" value="@Model.Key_Business_Rule_Creation" id="ReferenceKey_Business_Rule_Creation" />
                                                                                                                                                                                                                <input type="hidden" value="@Model.Key_Business_Rule_Creation" name="Key_Business_Rule_Creation" id="Key_Business_Rule_CreationId" />
                                                                                                                                                                                                                <input type="hidden" value="@ViewBag.Operation" name="OperationCreate" id="OperationCreate" />
                                                                                                                                                                                                                @if (!ViewBag.Consult)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    <input type="button" value="@Resources.Resources.Guardar" id="Business_Rule_CreationGuardar" class="btn btn-w-m btn-primary btn_save" onclick="return checkClientValidate('Business_Rule_CreationCreateForm');" />
                                                                                                                                                                                                                    @*<button onclick="Business_Rule_CreationGetBusinessRule('', 'Al Guardar o al Cerrar la Pantalla', '2')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#Business_Rule_CreationBusinessRule-form">
                                                                                                                                                                                                                            <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleBeforeSave">
                                                                                                                                                                                                                                <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                            </a>
                                                                                                                                                                                                                        </button>
                                                                                                                                                                                                                        <button type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton">
                                                                                                                                                                                                                            <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                        </button>*@

                                                                                                                                                                                                                    <input type="button" value="@Resources.Resources.GuardarNuevo" id="Business_Rule_CreationGuardarYNuevo" onclick="return checkClientValidate('Business_Rule_CreationCreateForm');" data-bind="    click: saveAndNew" class="btn btn-w-m btn-success btn_saveandnew" />
                                                                                                                                                                                                                    <input type="button" value="@Resources.Resources.GuardarCopia" id="Business_Rule_CreationGuardarYCopia" onclick="return checkClientValidate('Business_Rule_CreationCreateForm');" data-bind="    click: saveAndNew" class="btn btn-w-m btn-success btn_saveandcopy" />
                                                                                                                                                                                                                    <a title="@Resources.Resources.Configure" id="ConfigureSave" name="ConfigureSave" onclick="SaveElementAttributes()" class="btn btn-success btn-configure">@Resources.Resources.Configure</a>

                                                                                                                                                                                                                }
                                                                                                                                                                                                                <input type="hidden" id="hdnConfigureType" />
                                                                                                                                                                                                                <input type="hidden" id="hdnBusiness_Rule_CreationBusinessRuleFieldId" />
                                                                                                                                                                                                                <input type="hidden" id="hdnBusiness_Rule_CreationBusinessRuleFieldName" />
                                                                                                                                                                                                                <input type="hidden" id="hdnBusiness_Rule_CreationBusinessRuleAttribute" />
                                                                                                                                                                                                                <input type="button" value="@Resources.Resources.Cancelar" id="Business_Rule_CreationCancelar" name="Business_Rule_CreationCancelar" class="btn btn-danger noConsult btn_cancelar" data-bind="    click: cancel" tabindex="16" />
                                                                                                                                                                                                                @*<button onclick="Business_Rule_CreationGetBusinessRule('', 'Al Cancelar', '3')" type="button" class="btn btn-info btn-lg displayBusinessProperyButton displayRuleButton" data-toggle="modal" data-target="#Business_Rule_CreationBusinessRule-form">
                                                                                                                                                                                                                        <a class="top" title="" data-placement="right" data-toggle="tooltip" href="#" data-original-title="@Resources.Resources.BusinessRuleToBegin">
                                                                                                                                                                                                                            <i class="fa fa-cogs fa-spin"></i>
                                                                                                                                                                                                                        </a>
                                                                                                                                                                                                                    </button>*@
                                                                                                                                                                                                            </div>
                                                                                                                                                                                                        </div>
                                                                                                                                                                                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                    <input id="hdnApplicationDirectory" type="hidden" value="@Url.Content("~/")" />
                </div>
            </div>
        </div>
    </div>
</div>
@section Styles {
    <link href="@Url.Content("~/Content/BootstrapDatePicker/bootstrap-datetimepicker.min.css")" rel="stylesheet" />
    @Styles.Render("~/Content/plugins/dataTables/dataTablesStyles")
    @Styles.Render("~/plugins/dateRangeStyles")
    @Styles.Render("~/plugins/dataPickerStyles")
    @Styles.Render("~/plugins/clockpickerStyles")
    @Styles.Render("~/plugins/awesomeCheckboxStyles")
    @Styles.Render("~/plugins/select2Styles")
    @Styles.Render("~/Content/plugins/chosen/chosenStyles")
    <style>
        .dataTables_scrollHeadInner {
            width: 100% !important;
        }

        .dataTables_filter {
            display: none;
        }

        .select2-results {
            background-color: #fff;
        }

        .select2-container .select2-dropdown {
            height: auto !important;
        }

        i {
            font-size: 25px !important;
            display: block;
            color: #676a6c;
            margin-left: 6px;
            margin-right: 6px;
        }

        .fullWidth {
            width: 100%;
        }
    </style>
}
<script type="text/javascript" src="~/Uploads/Scripts/Business_Rule_Creation.js?v=@DateTime.Now.ToString("ddMMyyyyhhmmss")"></script>
<script type="text/javascript" src="~/Scripts/Custom/Business_Rule_CreationGeneral.js?v=@DateTime.Now.ToString("ddMMyyyyhhmmss")"></script>
<script type="text/javascript" src="~/Uploads/Scripts/Rules/Business_Rule_CreationCreateRules.js?v=@DateTime.Now.ToString("ddMMyyyyhhmmss")"></script>
<script src="~/Scripts/plugins/chosen/chosen.jquery.js"></script>


<script type="text/javascript">
    $('#Time_that_took').val('0');
    var current = 0;
    clearInterval(refreshIntervalId);
    var refreshIntervalId = setInterval(function () {
        current = parseInt($('#Time_that_took').val());
        $('#Time_that_took').val(current + 1);
    }, 1000);

    function RemoveAttachmentMainDocumentation() {
        $("#hdnRemoveDocumentation").val("1");
        $("#divAttachmentDocumentation").hide();
    }
    var ScopesItems;
    function GetScopes() {
        var scopes = $('#Scopes');
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Scope_Detail_Spartan_BR_ScopeAll")",
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                ScopesItems = result;
                scopes.empty();
                $.each(result, function (index, item) {
                    scopes.append($('<option />').text(item.Description).val(item.ScopeId));
                });
                if ($('#FieldId').val() != "") {
                    $('#Scopes').val('1');
                    $('#Scopes').attr('disabled', 'disabled');
                }
                /*else {
					if ($('#Attribute').val() == "3,9") {

					}
					else {
						$('#Scopes').val('2');
						$('#Scopes').attr('disabled', 'disabled');
					}
                }*/
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    var OperationsItems;
    function GetOperations(ScopeId) {
        debugger;
        var operations = $('#Operations');
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Operation_Detail_Spartan_BR_OperationAll")?ScopeId=" + ScopeId,
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                debugger;
                OperationsItems = result.aaData;
                operations.empty();
                $.each(result.aaData, function (index, item) {
                    operations.append($('<option />').text(item.Description).val(item.OperationId));
                });
                debugger;
                if (ScopeId == 2) {
                    if ($('#Attribute').val() == '3') {
                        $('#Operations').val('4');
                        $('#Operations').attr('disabled', 'disabled');
                    }
                    else {
                        $("select#Operations option[value='4']").remove();
                    }
                }
                if (ScopeId == 3) {
                    if ($('#Attribute').val() == '3') {
                        $('#Operations').val('7');
                        $('#Operations').attr('disabled', 'disabled');
                    }
                    else {
                        $("select#Operations option[value='7']").remove();
                    }
                }
                /*if ($('#hdnAttribute').val() == "3") {
                    $('#Operations').val('4');
                    $('#Operations').attr('disabled', 'disabled');
                    //$('#divEvents').css('display', 'none');
                }*/
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var EventProcessItems;
    function GetEventProcess(scopeId) {
        var events = $('#Events');
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Process_Event_Detail_Spartan_BR_Process_EventAll")?Attribute=" + $('#Attribute').val() + "&ScopeId=" + scopeId,
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                EventProcessItems = result.aaData;
                events.empty();
                $.each(result.aaData, function (index, item) {
                    events.append($('<option />').text(item.Description).val(item.ProcessEventId));
                });
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    var ConditionsItems;
    function GetConditions(dropDown) {
        var conditions = $('#' + dropDown);
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetConditionsList")",
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                ConditionsItems = result.aaData;
                if (dropDown != null) {
                    conditions.empty();
                    conditions.append($('<option value="">@Resources.Resources.SelectValue</option>'))
                    $.each(result.aaData, function (index, item) {
                        conditions.append($('<option />').text(item.Description).val(item.ConditionId));
                    });
                }
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    var OperatorTypesItems;
    function GetOperatorTypes(dropDown) {
        var operatorTypes = $('#' + dropDown);
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetOperatorTypesList")",
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                Spartan_BR_Actions_True_Detail_Spartan_BR_Operator_TypeItems = result.aaData;
                if (dropDown != null) {
                    operatorTypes.empty();
                    operatorTypes.append($('<option value="">@Resources.Resources.SelectValue</option>'))
                    $.each(result.aaData, function (index, item) {
                        operatorTypes.append($('<option />').text(item.Description).val(item.OperatorTypeId));
                    });
                }
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    var ConditionOperatorItems;
    function GetConditionOperator(dropDown) {
        var conditionOperator = $('#' + dropDown);
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetConditionOperatorList")",
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                Spartan_BR_Actions_True_Detail_Spartan_BR_Condition_OperatorItems = result.aaData;
                if (dropDown != null) {
                    conditionOperator.empty();
                    conditionOperator.append($('<option value="">@Resources.Resources.SelectValue</option>'))
                    $.each(result.aaData, function (index, item) {
                        conditionOperator.append($('<option />').text(item.Description).val(item.ConditionOperatorId));
                    });
                }
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var OperatorTypeItems;
    function GetOperatorType(id, txt, ddl) {
        if (id.trim() != "") {
            $.ajax({
                url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetOperatorTypeById")?id=" + id + "&objectId=" + $('#ObjectId').val() + "&attributeId=" + $('#Attribute').val(),
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                    OperatorTypeItems = result.aaData;
                    if (txt != null) {
                        if (result.aaData == '') {
                            $('#' + txt).css('display', 'block');
                            $('#' + ddl).css('display', 'none');
                        }
                        else {

                            $('#' + txt).css('display', 'none');
                            $('#' + ddl).css('display', 'block');
                            $('#' + ddl).empty();
                            $('#' + ddl).append($('<option value="">@Resources.Resources.SelectValue</option>'));
                            $.each(result.aaData, function (val, des) {
                                $('#' + ddl).append($('<option />').text(des).val(val));
                            });
                        }
                    }
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }
    }

    var ActionClassificationItems;
    function GetActionClassification(dropDown) {
        var classification = $('#' + dropDown);
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetActionClassificationList")",
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                Spartan_BR_Actions_True_Detail_Spartan_BR_Action_ClassificationItems = result.aaData;
                if (dropDown != null) {
                    classification.empty();
                    classification.append($('<option value="">@Resources.Resources.SelectValue</option>'))
                    $.each(result.aaData, function (index, item) {
                        classification.append($('<option />').text(item.Description).val(item.ClassificationId));
                    });
                }
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var ActionResultItems;
    function GetActionResult(dropDown) {
        var actionresult = $('#' + dropDown);
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetActionResultList")",
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                Spartan_BR_Actions_True_Detail_Spartan_BR_Action_ResultItems = result.aaData;
                if (dropDown != null) {
                    actionresult.empty();
                    actionresult.append($('<option value="">@Resources.Resources.SelectValue</option>'))
                    $.each(result.aaData, function (index, item) {
                        actionresult.append($('<option />').text(item.Description).val(item.ActionResultId));
                    });
                }
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var ActionItems;
    function GetActionsByClassification(id, ddl) {
        if (id != "") {
            var operations = '';
            var events = '';
            var op = $('#Operations');
            if (op != null && op.val() != null && op.val().length != 0) {
                operations = op.toString();
            }
            var ev = $('#Events');
            if (ev != null && ev.val() != null && ev.val().length != 0) {
                events = ev.toString();
            }
            $.ajax({
                url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetActionListByClassification")?classificationId=" + id + "&operations=" + operations + "&events=" + events,
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                    Spartan_BR_Actions_True_Detail_Spartan_BR_ActionItems = result.aaData;
                    $('#' + ddl).empty();
                    $('#' + ddl).append($('<option value="">@Resources.Resources.SelectValue</option>'))
                    $.each(result.aaData, function (index, item) {
                        $('#' + ddl).append($('<option />').text(item.Description).val(item.ActionId));
                    });
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }
    }
    var ParametersByActionID;
    function GetParametersByActionId(id, idParameterGeneric) {
        var idParameterField = '';
        if (id != "") {
            $.ajax({
                url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetParametersByActionId")?actionId=" + id + "&objectId=" + $('#ObjectId').val() + "&attributeId=" + $('#Attribute').val(),
                type: 'GET',
                dataType: "json",
                async: false,
                success: function (result) {
                    ParametersByActionID = result;
                    if (idParameterGeneric != null) {
                        $.each(result, function (index, item) {
                            idParameterField = idParameterGeneric.replace('[NUMBER]', index + 1);
                            $('#lbl' + idParameterField).remove();
                            if (item.ControlType == 1) {
                                $('#txt' + idParameterField).css('display', 'block');
                                $('#txt' + idParameterField).addClass('inputClientRequired');
                                $('#ddl' + idParameterField).css('display', 'none');
                                $('#ddl' + idParameterField).removeClass('inputClientRequired');
                                $('#txt' + idParameterField).val(item.ControlDataTextbox);
                                $('<label id="lbl' + idParameterField + '">' + item.ControlName + '</label>').insertBefore($('#ddl' + idParameterField));
                            }
                            else {

                                $('<label id="lbl' + idParameterField + '">' + item.ControlName + '</label>').insertBefore($('#ddl' + idParameterField));
                                $('#txt' + idParameterField).css('display', 'none');
                                $('#txt' + idParameterField).removeClass('inputClientRequired');
                                $('#ddl' + idParameterField).css('display', 'block');
                                $('#ddl' + idParameterField).addClass('inputClientRequired');
                                $('#ddl' + idParameterField).empty();
                                $('#ddl' + idParameterField).append($('<option value="">@Resources.Resources.Select ' + item.ControlName + '</option>'))

                                $.each(item.ControlDataCombobox, function (val, des) {
                                    $('#ddl' + idParameterField).append($('<option />').text(des).val(val));
                                });
                            }
                        });
                    }
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                }
            });
        }
    }

    $(function () {

        $('#Creation_Date').datepicker({
            todayBtn: "linked",
            keyboardNavigation: false,
            forceParse: false,
            calendarWeeks: true,
            autoclose: true,
            format: "@ConfigurationProperty.DateFormatDatePicker"
        });
        $('#Creation_Hour').clockpicker();
        $('#Last_Updated_Date').datepicker({
            todayBtn: "linked",
            keyboardNavigation: false,
            forceParse: false,
            calendarWeeks: true,
            autoclose: true,
            format: "@ConfigurationProperty.DateFormatDatePicker"
        });
        $('#Last_Updated_Hour').clockpicker();

        GetSpartan_BR_Conditions_Detail_Spartan_BR_Condition_OperatorItem();
        GetSpartan_BR_Conditions_Detail_Spartan_BR_Operator_TypeItem();
        GetSpartan_BR_Conditions_Detail_Spartan_BR_ConditionItem();
        getSpartan_BR_Conditions_DetailData();

        GetSpartan_BR_Actions_True_Detail_Spartan_BR_Action_ClassificationItem();
        GetSpartan_BR_Actions_True_Detail_Spartan_BR_ActionItem();
        GetSpartan_BR_Actions_True_Detail_Spartan_BR_Action_ResultItem();
        getSpartan_BR_Actions_True_DetailData();

        GetSpartan_BR_Actions_False_Detail_Spartan_BR_Action_ClassificationItem();
        GetSpartan_BR_Actions_False_Detail_Spartan_BR_ActionItem();
        GetSpartan_BR_Actions_False_Detail_Spartan_BR_Action_ResultItem();
        getSpartan_BR_Actions_False_DetailData();

        //GetSpartan_BR_Operation_Detail_Spartan_BR_OperationItem();
        getSpartan_BR_Operation_DetailData();

        //GetSpartan_BR_Process_Event_Detail_Spartan_BR_Process_EventItem();
        getSpartan_BR_Process_Event_DetailData();

        GetSpartan_BR_Peer_Review_Spartan_UserItem();
        GetSpartan_BR_Peer_Review_Spartan_BR_Rejection_ReasonItem();
        getSpartan_BR_Peer_ReviewData();

        GetSpartan_BR_Testing_Spartan_UserItem();
        GetSpartan_BR_Testing_Spartan_BR_Rejection_ReasonItem();
        getSpartan_BR_TestingData();

        //GetSpartan_BR_Scope_Detail_Spartan_BR_ScopeItem();
        getSpartan_BR_Scope_DetailData();

        GetSpartan_BR_History_Spartan_UserItem();
        GetSpartan_BR_History_Spartan_BR_Type_HistoryItem();
        GetSpartan_BR_History_Spartan_BR_StatusItem();
        getSpartan_BR_HistoryData();

        var scopeId = '0';
        if ($('#FieldId').val() == '') {
            scopeId = '2';
        }
        GetScopes(scopeId);
        GetOperations(scopeId);
        GetEventProcess(scopeId);

        initiateUIControls();
        $('a').tooltip();
        EjecutarValidacionesAlComienzo();
        $('.loading').css('display', 'none');

    });

    var Spartan_BR_Conditions_DetailinsertRowCurrentIndex = -1;
    var Spartan_BR_Conditions_DetailDataDataTable;
    function getSpartan_BR_Conditions_DetailData() {
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Conditions_Detail")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceKey_Business_Rule_Creation").val() != "" ? "&RelationId=" + $("#ReferenceKey_Business_Rule_Creation").val() : ""),
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                Spartan_BR_Conditions_DetailDataDataTable = result.data;
                showSpartan_BR_Conditions_DetailGrid(result.data);
                $('#Spartan_BR_Conditions_DetailGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    function Spartan_BR_Conditions_DetailGetUpdateRowControls(data, nameOfTable, rowIndex) {

        var columnData = [];
        var ddlOperator = $(getDropdown('Condition_Operator', rowIndex, Spartan_BR_Conditions_DetailinsertRowCurrentIndex));
        var ddlOperatorType1 = $(getDropdown('First_Operator_Type', rowIndex, Spartan_BR_Conditions_DetailinsertRowCurrentIndex));
        var ddlOperatorValue1 = $(getDropdownAndTextbox('First_Operator_Value', rowIndex, Spartan_BR_Conditions_DetailinsertRowCurrentIndex));
        var ddlCondition = $(getDropdown('Condition', rowIndex, Spartan_BR_Conditions_DetailinsertRowCurrentIndex));
        var ddlOperatorType2 = $(getDropdown('Second_Operator_Type', rowIndex, Spartan_BR_Conditions_DetailinsertRowCurrentIndex));
        var ddlOperatorValue2 = $(getDropdownAndTextbox('Second_Operator_Value', rowIndex, Spartan_BR_Conditions_DetailinsertRowCurrentIndex));

        GetConditionOperator(ddlOperator[0].id);
        GetConditions(ddlCondition[0].id);
        GetOperatorTypes(ddlOperatorType1[0].id);
        GetOperatorTypes(ddlOperatorType2[0].id);
        columnData[0] = ddlOperator;
        columnData[1] = ddlOperatorType1;
        columnData[2] = ddlOperatorValue1;
        columnData[3] = ddlCondition;
        columnData[4] = ddlOperatorType2;
        columnData[5] = ddlOperatorValue2;
        return columnData;
    }



    function GetFileInfo(fileData, fileUploadData) {

        var $div = $("<div>");
        if (fileUploadData != null && fileUploadData.files.length > 0) {

            $div.append("<label>" + fileUploadData.files[0].name + "</label>");
            //<i class="fa fa-times-circle" id='removeFileAttachment'>
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;

        } else if (fileUploadData != null) {
            return $.parseHTML(GetFileUploader());
        } else {
            $div.append("<label>" + fileData.FileName + "</label>");
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;
        }
    }

    var removedSpartan_BR_Conditions_DetailData = [];
    function Spartan_BR_Conditions_DetailDeleteRow(rowIndex, row) {
        var rowIndexTable = Spartan_BR_Conditions_DetailTable.fnGetPosition($(row).parent().parent()[0]);
        var permission = {
            Delete: true
        };
        if (!permission.Delete || isConsultMode)
            return;
        if (confirm("@Resources.Resources.DeleteConfirm")) {
            if (EjecutarValidacionesAlEliminarMRSpartan_BR_Conditions_Detail('Spartan_BR_Conditions_Detail_', '_' + rowIndex)) {
                var prevData = Spartan_BR_Conditions_DetailTable.fnGetData(rowIndexTable);
                removedSpartan_BR_Conditions_DetailData.push(prevData);
                Spartan_BR_Conditions_DetailTable.fnDeleteRow(rowIndexTable);
                showSpartan_BR_Conditions_DetailGrid(Spartan_BR_Conditions_DetailTable.fnGetData());
            }
        }
    }

    function Spartan_BR_Conditions_DetailrowCreationGrid(row, data, index) {
        var permission = {
            Edit: true,
            Delete: true
        };
        setSpartan_BR_Conditions_DetailValidation();
        var Spartan_BR_Conditions_DetailRowElement = "Spartan_BR_Conditions_Detail_" + index.toString();
        $(row).addClass(Spartan_BR_Conditions_DetailRowElement);
        var nameOfTable = 'Spartan_BR_Conditions_Detail_';
        var rowIndex = '_' + index;
        Spartan_BR_Conditions_DetailinsertRowCurrentIndex = index;

        row.innerHTML = "";

        if (data.IsInsertRow) {

            if (row.childNodes.length != 0) {
                for (var i = 0; i < row.childNodes.length; i++) {
                    row.childNodes[i].remove();
                }
            }
            var controls = GetInsertSpartan_BR_Conditions_DetailRowControls(index);
            var actionColInsert = $('<td>');

            var abc = "if(dynamicFieldValidation('" + Spartan_BR_Conditions_DetailRowElement + "')){ Spartan_BR_Conditions_DetailInsertRow(" + index + "); }";
            var insertRowHTML = '<a data-original-title="Aceptar" data-placement="right" onclick="' + abc + '">';
            $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
            $('<i class="fa fa-times">').appendTo($("<a data-original-title='Cancelar' data-placement='right' onclick='Spartan_BR_Conditions_DetailCancelRow(" + index + ")'>").appendTo(actionColInsert));
            actionColInsert.appendTo(row);

            for (i = 0; i < controls.length; i++) {
                $(controls[i]).appendTo($('<td>').appendTo(row));
            }
            $('#Spartan_BR_Conditions_DetailGrid .inputMoney').inputmask("currency", { prefix: "", rightAlign: false });
            $(".dataTables_scrollBody").animate({ scrollTop: $('#Spartan_BR_Conditions_DetailGrid').height() }, 1000);

            $('a').tooltip();

            return;
        }

        var actionCol = $('<td class="center actionColumn text-nowrap sorting_1">');
        var edit = "<a class='editor_edit edit-MR' data-original-title='Editar' data-placement='right' onclick='Spartan_BR_Conditions_DetailEditRow(" + index + ", this)'>";

        //var editPopUp = "<a class='edit-popup-MR' data-toggle='modal' data-target='#AddSpartan_BR_Conditions_Detail-form' onclick='Spartan_BR_Conditions_DetailEditRowPopup(" + index + ", this)'>";

        var eliminar = "<a class='editor_remove eliminar-MR' data-original-title='Eliminar' data-placement='right' onclick='Spartan_BR_Conditions_DetailDeleteRow(" + index + ", this)'>";

        $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
        //$('<i class="fa fa-edit">').appendTo($(editPopUp).appendTo(actionCol));
        $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));
        if ($('.Action' + 'Header').css('display') != 'none')
            actionCol.appendTo(row);

        /*if ($('.Condition_Operator' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Condition_Operator' + rowIndex + '">').text(GetSpartan_BR_Conditions_Detail_Spartan_BR_Condition_OperatorName(data.Condition_Operator)).appendTo(row);
        if ($('.First_Operator_Type' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'First_Operator_Type' + rowIndex + '">').text(GetSpartan_BR_Conditions_Detail_Spartan_BR_Operator_TypeName(data.First_Operator_Type)).appendTo(row);
        if ($('.First_Operator_Value' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'First_Operator_Value' + rowIndex + '">').text(data.First_Operator_Value).appendTo(row);
        if ($('.Condition' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Condition' + rowIndex + '">').text(GetSpartan_BR_Conditions_Detail_Spartan_BR_ConditionName(data.Condition)).appendTo(row);
        if ($('.Second_Operator_Type' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Second_Operator_Type' + rowIndex + '">').text(GetSpartan_BR_Conditions_Detail_Spartan_BR_Operator_TypeName(data.Second_Operator_Type)).appendTo(row);
        if ($('.Second_Operator_Value' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Second_Operator_Value' + rowIndex + '">').text(data.Second_Operator_Value).appendTo(row);
        */

        GetOperatorTypes(null);
        GetConditionOperator(null);
        GetConditions(null);
        $('<td>').text(findConditionOperatorText(data.Condition_Operator)).appendTo(row);
        $('<td>').text(findOperatorTypeText(data.First_Operator_Type)).appendTo(row);
        GetOperatorType("" + data.First_Operator_Type + "", null, null);
        $('<td>').text(findOperatorValueText(data.First_Operator_Value)).appendTo(row);
        $('<td>').text(findConditionsText(data.Condition)).appendTo(row);
        $('<td>').text(findOperatorTypeText(data.Second_Operator_Type)).appendTo(row);
        GetOperatorType("" + data.Second_Operator_Type + "", null, null);
        $('<td>').text(findOperatorValueText(data.Second_Operator_Value)).appendTo(row);

        $('a').tooltip();
    }

    var Spartan_BR_Conditions_DetailTable;
    function showSpartan_BR_Conditions_DetailGrid(dataSet) {
        //removedSpartan_BR_Conditions_DetailData = [];
        Spartan_BR_Conditions_DetailTable = $('#Spartan_BR_Conditions_DetailGrid').dataTable({
            dom: '<"html5buttons"B>lTgitp',
            buttons: [
            ],
            "createdRow": Spartan_BR_Conditions_DetailrowCreationGrid,
            //"lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
            data: dataSet,
            "scrollY": "200px",
            "scrollCollapse": true,
            "paging": false,
            "columns": [
                { "data": null, 'visible': true, "orderable": false },
                { "data": "Condition_Operator", "orderable": false },
                { "data": "First_Operator_Type", "orderable": false },
                { "data": "First_Operator_Value", "orderable": false },
                { "data": "Condition", "orderable": false },
                { "data": "Second_Operator_Type", "orderable": false },
                { "data": "Second_Operator_Value", "orderable": false },

            ],
            "order": [[0, "asc"]],
            "language": {
                //"lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                //"zeroRecords": "@Resources.Resources.NothingFound",
                //"info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                "infoEmpty": "@Resources.Resources.NoRecords",
                "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                "sSearch": "@Resources.Resources.Search",
                //"paginate": {
                //    "previous": "@Resources.Resources.Previous",
                //    "next": "@Resources.Resources.Next"
                //}
            },
            "bDestroy": true,
            "fnDrawCallback": function (settings) {
                setSpartan_BR_Conditions_DetailValidation();
            }
        }).on('init.dt', function (e, data) {
            $('a').tooltip();
        }).on('draw.dt', function () {
            $('#Spartan_BR_Conditions_DetailGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
        });
    }

    var Spartan_BR_Conditions_Detail_Spartan_BR_Condition_OperatorItems;
    function GetSpartan_BR_Conditions_Detail_Spartan_BR_Condition_OperatorItem() {
        Spartan_BR_Conditions_Detail_Spartan_BR_Condition_OperatorItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Conditions_Detail_Spartan_BR_Condition_OperatorAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Conditions_Detail_Spartan_BR_Condition_OperatorItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var Spartan_BR_Conditions_Detail_Spartan_BR_Operator_TypeItems;
    function GetSpartan_BR_Conditions_Detail_Spartan_BR_Operator_TypeItem() {
        Spartan_BR_Conditions_Detail_Spartan_BR_Operator_TypeItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Conditions_Detail_Spartan_BR_Operator_TypeAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Conditions_Detail_Spartan_BR_Operator_TypeItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var Spartan_BR_Conditions_Detail_Spartan_BR_ConditionItems;
    function GetSpartan_BR_Conditions_Detail_Spartan_BR_ConditionItem() {
        Spartan_BR_Conditions_Detail_Spartan_BR_ConditionItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Conditions_Detail_Spartan_BR_ConditionAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Conditions_Detail_Spartan_BR_ConditionItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var Spartan_BR_Conditions_DetailData = [];
    var Spartan_BR_Conditions_DetaildeletedItem = [];
    var Spartan_BR_Conditions_DetailDataMain = [];
    var Spartan_BR_Conditions_DetailDataMainPages = [];
    var Spartan_BR_Conditions_DetailnewItemCount = 0;
    var Spartan_BR_Conditions_DetailmaxItemIndex = 0;
    var Spartan_BR_Conditions_DetailDataMainInitialized = false;

    function SendSpartan_BR_Conditions_Detail(callBack, Key_Business_Rule_CreationId) {
        Spartan_BR_Conditions_DetailData = GetSpartan_BR_Conditions_DetailFromDataTable();

        if (Spartan_BR_Conditions_DetailData.length > 0 || $("#ReferenceKey_Business_Rule_Creation").val() != Key_Business_Rule_CreationId) {
            if ($("#ReferenceKey_Business_Rule_Creation").val() != "0" && Key_Business_Rule_CreationId == null)
                Key_Business_Rule_CreationId = $("#ReferenceKey_Business_Rule_Creation").val();
            if ($("#ReferenceKey_Business_Rule_Creation").val() == '')
                $("#ReferenceKey_Business_Rule_Creation").val('0');
            $.ajax({
                url: '@Url.Content("~/Frontal/Business_Rule_Creation/PostSpartan_BR_Conditions_Detail?MasterId=")' + Key_Business_Rule_CreationId + "&referenceId=" + $("#ReferenceKey_Business_Rule_Creation").val(),
                type: 'POST',
                data: GetSpartan_BR_Conditions_Detail(),
                async: true,
                success: function (result) {

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                },
                cache: false,
                contentType: false,
                processData: false
            });
        } else {
            //showNotification("@Resources.Resources.SaveSuccess", "success");
            //callBack(Key_Business_Rule_CreationId);
        }
        return true;
    }

    function GetAddSpartan_BR_Conditions_DetailPopup(currentRowIndex, mode, id) {

        $.ajax({
            url: "@Url.Action("AddSpartan_BR_Conditions_Detail", "Spartan_BR_Conditions_Detail")",
            type: "GET",
            async: false,
            data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
            success: function (data) {
                $(".AddSpartan_BR_Conditions_DetailModal").html(data);
            },
            error: function () {

            }
        });

        @*$.get('@Url.Action("AddSpartan_BR_Conditions_Detail", "Spartan_BR_Conditions_Detail")', { rowIndex: currentRowIndex }, function (data) {
                $(".AddSpartan_BR_Conditions_DetailModal").html(data);
            });*@
    }

    function ShowMessagePendingRowSpartan_BR_Conditions_Detail() {
        //Traducción Pendiente
        showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Conditions"))', "warning");
    }
    var Spartan_BR_Actions_True_DetailinsertRowCurrentIndex = -1;
    var Spartan_BR_Actions_True_DetailDataDataTable;
    function getSpartan_BR_Actions_True_DetailData() {
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Actions_True_Detail")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceKey_Business_Rule_Creation").val() != "" ? "&RelationId=" + $("#ReferenceKey_Business_Rule_Creation").val() : ""),
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                Spartan_BR_Actions_True_DetailDataDataTable = result.data;
                showSpartan_BR_Actions_True_DetailGrid(result.data);
                $('#Spartan_BR_Actions_True_DetailGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    function Spartan_BR_Actions_True_DetailGetUpdateRowControls(data, nameOfTable, rowIndex) {

        var columnData = [];
        var ddlActionClassification = $(getDropdown('Action_Classification', rowIndex, Spartan_BR_Actions_True_DetailinsertRowCurrentIndex));
        var ddlAction = $(getDropdown('Action', rowIndex, Spartan_BR_Actions_True_DetailinsertRowCurrentIndex));
        var ddlActionResult = $(getDropdown('Action_Result', rowIndex, Spartan_BR_Actions_True_DetailinsertRowCurrentIndex));
        var inputParameter1 = $(getDropdownAndTextbox('Parameter_1', rowIndex, Spartan_BR_Actions_True_DetailinsertRowCurrentIndex));
        var inputParameter2 = $(getDropdownAndTextbox('Parameter_2', rowIndex, Spartan_BR_Actions_True_DetailinsertRowCurrentIndex));
        var inputParameter3 = $(getDropdownAndTextbox('Parameter_3', rowIndex, Spartan_BR_Actions_True_DetailinsertRowCurrentIndex));
        var inputParameter4 = $(getDropdownAndTextbox('Parameter_4', rowIndex, Spartan_BR_Actions_True_DetailinsertRowCurrentIndex));
        var inputParameter5 = $(getDropdownAndTextbox('Parameter_5', rowIndex, Spartan_BR_Actions_True_DetailinsertRowCurrentIndex));
        GetActionResult(ddlActionResult[0].id);
        GetActionClassification(ddlActionClassification[0].id);
        columnData[0] = ddlActionClassification;
        columnData[1] = ddlAction;
        columnData[2] = ddlActionResult;
        columnData[3] = inputParameter1;
        columnData[4] = inputParameter2;
        columnData[5] = inputParameter3;
        columnData[6] = inputParameter4;
        columnData[7] = inputParameter5;
        return columnData;
    }



    function GetFileInfo(fileData, fileUploadData) {

        var $div = $("<div>");
        if (fileUploadData != null && fileUploadData.files.length > 0) {

            $div.append("<label>" + fileUploadData.files[0].name + "</label>");
            //<i class="fa fa-times-circle" id='removeFileAttachment'>
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;

        } else if (fileUploadData != null) {
            return $.parseHTML(GetFileUploader());
        } else {
            $div.append("<label>" + fileData.FileName + "</label>");
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;
        }
    }

    var removedSpartan_BR_Actions_True_DetailData = [];
    function Spartan_BR_Actions_True_DetailDeleteRow(rowIndex, row) {
        var rowIndexTable = Spartan_BR_Actions_True_DetailTable.fnGetPosition($(row).parent().parent()[0]);
        var permission = {
            Delete: true
        };
        if (!permission.Delete || isConsultMode)
            return;
        if (confirm("@Resources.Resources.DeleteConfirm")) {
            if (EjecutarValidacionesAlEliminarMRSpartan_BR_Actions_True_Detail('Spartan_BR_Actions_True_Detail_', '_' + rowIndex)) {
                var prevData = Spartan_BR_Actions_True_DetailTable.fnGetData(rowIndexTable);
                removedSpartan_BR_Actions_True_DetailData.push(prevData);
                Spartan_BR_Actions_True_DetailTable.fnDeleteRow(rowIndexTable);
                showSpartan_BR_Actions_True_DetailGrid(Spartan_BR_Actions_True_DetailTable.fnGetData());
            }
        }
    }

    function Spartan_BR_Actions_True_DetailrowCreationGrid(row, data, index) {

        var permission = {
            Edit: true,
            Delete: true
        };
        setSpartan_BR_Actions_True_DetailValidation();
        var Spartan_BR_Actions_True_DetailRowElement = "Spartan_BR_Actions_True_Detail_" + index.toString();
        $(row).addClass(Spartan_BR_Actions_True_DetailRowElement);
        var nameOfTable = 'Spartan_BR_Actions_True_Detail_';
        var rowIndex = '_' + index;
        Spartan_BR_Actions_True_DetailinsertRowCurrentIndex = index;

        row.innerHTML = "";

        if (data.IsInsertRow) {

            if (row.childNodes.length != 0) {
                for (var i = 0; i < row.childNodes.length; i++) {
                    row.childNodes[i].remove();
                }
            }
            var controls = GetInsertSpartan_BR_Actions_True_DetailRowControls(index);
            var actionColInsert = $('<td>');

            var abc = "if(dynamicFieldValidation('" + Spartan_BR_Actions_True_DetailRowElement + "')){ Spartan_BR_Actions_True_DetailInsertRow(" + index + "); }";
            var insertRowHTML = '<a data-original-title="Aceptar" data-placement="right" onclick="' + abc + '">';
            $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
            $('<i class="fa fa-times">').appendTo($("<a data-original-title='Cancelar' data-placement='right' onclick='Spartan_BR_Actions_True_DetailCancelRow(" + index + ")'>").appendTo(actionColInsert));
            actionColInsert.appendTo(row);

            for (i = 0; i < controls.length; i++) {
                $(controls[i]).appendTo($('<td>').appendTo(row));
            }
            $('#Spartan_BR_Actions_True_DetailGrid .inputMoney').inputmask("currency", { prefix: "", rightAlign: false });
            $(".dataTables_scrollBody").animate({ scrollTop: $('#Spartan_BR_Actions_True_DetailGrid').height() }, 1000);

            $('a').tooltip();

            return true;
        }

        var actionCol = $('<td>');
        var edit = "<a class='edit-MR' data-original-title='Editar' data-placement='right' onclick='Spartan_BR_Actions_True_DetailEditRow(" + index + ", this)'>";

        //var editPopUp = "<a class='edit-popup-MR' data-toggle='modal' data-target='#AddSpartan_BR_Actions_True_Detail-form' onclick='Spartan_BR_Actions_True_DetailEditRowPopup(" + index + ", this)'>";

        var eliminar = "<a class='eliminar-MR' data-original-title='Eliminar' data-placement='right' onclick='Spartan_BR_Actions_True_DetailDeleteRow(" + index + ", this)'>";

        $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
        //$('<i class="fa fa-edit">').appendTo($(editPopUp).appendTo(actionCol));
        $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));
        if ($('.Action' + 'Header').css('display') != 'none')
            actionCol.appendTo(row);
        if ($('.Action_Classification' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Action_Classification' + rowIndex + '">').text(GetSpartan_BR_Actions_True_Detail_Spartan_BR_Action_ClassificationName(data.Action_Classification)).appendTo(row);
        if ($('.Action' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Action' + rowIndex + '">').text(GetSpartan_BR_Actions_True_Detail_Spartan_BR_ActionName(data.Action)).appendTo(row);
        if ($('.Action_Result' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Action_Result' + rowIndex + '">').text(GetSpartan_BR_Actions_True_Detail_Spartan_BR_Action_ResultName(data.Action_Result)).appendTo(row);
        if ($('.Parameter_1' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Parameter_1' + rowIndex + '">').text(data.Parameter_1).appendTo(row);
        if ($('.Parameter_2' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Parameter_2' + rowIndex + '">').text(data.Parameter_2).appendTo(row);
        if ($('.Parameter_3' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Parameter_3' + rowIndex + '">').text(data.Parameter_3).appendTo(row);
        if ($('.Parameter_4' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Parameter_4' + rowIndex + '">').text(data.Parameter_4).appendTo(row);
        if ($('.Parameter_5' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Parameter_5' + rowIndex + '">').text(data.Parameter_5).appendTo(row);

        $('a').tooltip();

    }



    var Spartan_BR_Actions_True_DetailTable;
    function showSpartan_BR_Actions_True_DetailGrid(dataSet) {
        //removedSpartan_BR_Actions_True_DetailData = [];
        Spartan_BR_Actions_True_DetailTable = $('#Spartan_BR_Actions_True_DetailGrid').dataTable({
            dom: '<"html5buttons"B>lTgitp',
            buttons: [
            ],
            "createdRow": Spartan_BR_Actions_True_DetailrowCreationGrid,
            //"lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
            data: dataSet,
            "scrollY": "200px",
            "scrollCollapse": true,
            "paging": false,
            "columns": [
                { "data": null, 'visible': true, "orderable": false },
                { "data": "Action_Classification", "orderable": false },
                { "data": "Action", "orderable": false },
                { "data": "Action_Result", "orderable": false },
                { "data": "Parameter_1", "orderable": false },
                { "data": "Parameter_2", "orderable": false },
                { "data": "Parameter_3", "orderable": false },
                { "data": "Parameter_4", "orderable": false },
                { "data": "Parameter_5", "orderable": false },

            ],
            "order": [[0, "asc"]],
            "language": {
                //"lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                "zeroRecords": "@Resources.Resources.NothingFound",
                //"info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                "infoEmpty": "@Resources.Resources.NoRecords",
                "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                "sSearch": "@Resources.Resources.Search",
                //"paginate": {
                //    "previous": "@Resources.Resources.Previous",
                //    "next": "@Resources.Resources.Next"
                //}
            },
            "bDestroy": true,
            "fnDrawCallback": function (settings) {
                setSpartan_BR_Actions_True_DetailValidation();
            }
        }).on('init.dt', function (e, data) {
            $('a').tooltip();
        }).on('draw.dt', function () {
            $('#Spartan_BR_Actions_True_DetailGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
        });
    }

    var Spartan_BR_Actions_True_Detail_Spartan_BR_Action_ClassificationItems;
    function GetSpartan_BR_Actions_True_Detail_Spartan_BR_Action_ClassificationItem() {
        Spartan_BR_Actions_True_Detail_Spartan_BR_Action_ClassificationItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Actions_True_Detail_Spartan_BR_Action_ClassificationAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Actions_True_Detail_Spartan_BR_Action_ClassificationItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    var Spartan_BR_Actions_True_Detail_Spartan_BR_ActionItems;
    function GetSpartan_BR_Actions_True_Detail_Spartan_BR_ActionItem(operations, events) {
        Spartan_BR_Actions_True_Detail_Spartan_BR_ActionItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Actions_True_Detail_Spartan_BR_ActionAll")?operations=" + operations + "&events=" + events;
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Actions_True_Detail_Spartan_BR_ActionItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    var Spartan_BR_Actions_True_Detail_Spartan_BR_Action_ResultItems;
    function GetSpartan_BR_Actions_True_Detail_Spartan_BR_Action_ResultItem() {
        Spartan_BR_Actions_True_Detail_Spartan_BR_Action_ResultItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Actions_True_Detail_Spartan_BR_Action_ResultAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Actions_True_Detail_Spartan_BR_Action_ResultItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var Spartan_BR_Actions_True_DetailData = [];
    var Spartan_BR_Actions_True_DetaildeletedItem = [];
    var Spartan_BR_Actions_True_DetailDataMain = [];
    var Spartan_BR_Actions_True_DetailDataMainPages = [];
    var Spartan_BR_Actions_True_DetailnewItemCount = 0;
    var Spartan_BR_Actions_True_DetailmaxItemIndex = 0;
    var Spartan_BR_Actions_True_DetailDataMainInitialized = false;

    function SendSpartan_BR_Actions_True_Detail(callBack, Key_Business_Rule_CreationId) {
        Spartan_BR_Actions_True_DetailData = GetSpartan_BR_Actions_True_DetailFromDataTable();

        if (Spartan_BR_Actions_True_DetailData.length > 0 || $("#ReferenceKey_Business_Rule_Creation").val() != Key_Business_Rule_CreationId) {
            if ($("#ReferenceKey_Business_Rule_Creation").val() != "0" && Key_Business_Rule_CreationId == null)
                Key_Business_Rule_CreationId = $("#ReferenceKey_Business_Rule_Creation").val();
            if ($("#ReferenceKey_Business_Rule_Creation").val() == '')
                $("#ReferenceKey_Business_Rule_Creation").val('0');
            $.ajax({
                url: '@Url.Content("~/Frontal/Business_Rule_Creation/PostSpartan_BR_Actions_True_Detail?MasterId=")' + Key_Business_Rule_CreationId + "&referenceId=" + $("#ReferenceKey_Business_Rule_Creation").val(),
                type: 'POST',
                data: GetSpartan_BR_Actions_True_Detail(),
                async: true,
                success: function (result) {

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                },
                cache: false,
                contentType: false,
                processData: false
            });
        } else {
            //showNotification("@Resources.Resources.SaveSuccess", "success");
            //callBack(Key_Business_Rule_CreationId);
        }
        return true;
    }

    function GetAddSpartan_BR_Actions_True_DetailPopup(currentRowIndex, mode, id) {

        $.ajax({
            url: "@Url.Action("AddSpartan_BR_Actions_True_Detail", "Spartan_BR_Actions_True_Detail")",
            type: "GET",
            async: false,
            data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
            success: function (data) {
                $(".AddSpartan_BR_Actions_True_DetailModal").html(data);
            },
            error: function () {

            }
        });

        @*$.get('@Url.Action("AddSpartan_BR_Actions_True_Detail", "Spartan_BR_Actions_True_Detail")', { rowIndex: currentRowIndex }, function (data) {
                $(".AddSpartan_BR_Actions_True_DetailModal").html(data);
            });*@
    }

    function ShowMessagePendingRowSpartan_BR_Actions_True_Detail() {
        //Traducción Pendiente
        showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Actions if conditions are True"))', "warning");
    }
    var Spartan_BR_Actions_False_DetailinsertRowCurrentIndex = -1;
    var Spartan_BR_Actions_False_DetailDataDataTable;
    function getSpartan_BR_Actions_False_DetailData() {
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Actions_False_Detail")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceKey_Business_Rule_Creation").val() != "" ? "&RelationId=" + $("#ReferenceKey_Business_Rule_Creation").val() : ""),
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                Spartan_BR_Actions_False_DetailDataDataTable = result.data;
                showSpartan_BR_Actions_False_DetailGrid(result.data);
                $('#Spartan_BR_Actions_False_DetailGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    function Spartan_BR_Actions_False_DetailGetUpdateRowControls(data, nameOfTable, rowIndex) {

        var columnData = [];
        var ddlActionClassification = $(getDropdown('Action_Classification', rowIndex, Spartan_BR_Actions_False_DetailinsertRowCurrentIndex));
        var ddlAction = $(getDropdown('Action', rowIndex, Spartan_BR_Actions_False_DetailinsertRowCurrentIndex));
        var ddlActionResult = $(getDropdown('Action_Result', rowIndex, Spartan_BR_Actions_False_DetailinsertRowCurrentIndex));
        var inputParameter1 = $(getDropdownAndTextbox('Parameter_1', rowIndex, Spartan_BR_Actions_False_DetailinsertRowCurrentIndex));
        var inputParameter2 = $(getDropdownAndTextbox('Parameter_2', rowIndex, Spartan_BR_Actions_False_DetailinsertRowCurrentIndex));
        var inputParameter3 = $(getDropdownAndTextbox('Parameter_3', rowIndex, Spartan_BR_Actions_False_DetailinsertRowCurrentIndex));
        var inputParameter4 = $(getDropdownAndTextbox('Parameter_4', rowIndex, Spartan_BR_Actions_False_DetailinsertRowCurrentIndex));
        var inputParameter5 = $(getDropdownAndTextbox('Parameter_5', rowIndex, Spartan_BR_Actions_False_DetailinsertRowCurrentIndex));
        GetActionResult(ddlActionResult[0].id);
        GetActionClassification(ddlActionClassification[0].id);
        columnData[0] = ddlActionClassification;
        columnData[1] = ddlAction;
        columnData[2] = ddlActionResult;
        columnData[3] = inputParameter1;
        columnData[4] = inputParameter2;
        columnData[5] = inputParameter3;
        columnData[6] = inputParameter4;
        columnData[7] = inputParameter5;
        return columnData;
    }



    function GetFileInfo(fileData, fileUploadData) {

        var $div = $("<div>");
        if (fileUploadData != null && fileUploadData.files.length > 0) {

            $div.append("<label>" + fileUploadData.files[0].name + "</label>");
            //<i class="fa fa-times-circle" id='removeFileAttachment'>
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;

        } else if (fileUploadData != null) {
            return $.parseHTML(GetFileUploader());
        } else {
            $div.append("<label>" + fileData.FileName + "</label>");
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;
        }
    }

    var removedSpartan_BR_Actions_False_DetailData = [];
    function Spartan_BR_Actions_False_DetailDeleteRow(rowIndex, row) {
        var rowIndexTable = Spartan_BR_Actions_False_DetailTable.fnGetPosition($(row).parent().parent()[0]);
        var permission = {
            Delete: true
        };
        if (!permission.Delete || isConsultMode)
            return;
        if (confirm("@Resources.Resources.DeleteConfirm")) {
            if (EjecutarValidacionesAlEliminarMRSpartan_BR_Actions_False_Detail('Spartan_BR_Actions_False_Detail_', '_' + rowIndex)) {
                var prevData = Spartan_BR_Actions_False_DetailTable.fnGetData(rowIndexTable);
                removedSpartan_BR_Actions_False_DetailData.push(prevData);
                Spartan_BR_Actions_False_DetailTable.fnDeleteRow(rowIndexTable);
                showSpartan_BR_Actions_False_DetailGrid(Spartan_BR_Actions_False_DetailTable.fnGetData());
            }
        }
    }

    function Spartan_BR_Actions_False_DetailrowCreationGrid(row, data, index) {
        var permission = {
            Edit: true,
            Delete: true
        };
        setSpartan_BR_Actions_False_DetailValidation();
        var Spartan_BR_Actions_False_DetailRowElement = "Spartan_BR_Actions_False_Detail_" + index.toString();
        $(row).addClass(Spartan_BR_Actions_False_DetailRowElement);
        var nameOfTable = 'Spartan_BR_Actions_False_Detail_';
        var rowIndex = '_' + index;
        Spartan_BR_Actions_False_DetailinsertRowCurrentIndex = index;

        row.innerHTML = "";

        if (data.IsInsertRow) {

            if (row.childNodes.length != 0) {
                for (var i = 0; i < row.childNodes.length; i++) {
                    row.childNodes[i].remove();
                }
            }
            var controls = GetInsertSpartan_BR_Actions_False_DetailRowControls(index);
            var actionColInsert = $('<td>');

            var abc = "if(dynamicFieldValidation('" + Spartan_BR_Actions_False_DetailRowElement + "')){ Spartan_BR_Actions_False_DetailInsertRow(" + index + "); }";
            var insertRowHTML = '<a data-original-title="Aceptar" data-placement="right" onclick="' + abc + '">';
            $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
            $('<i class="fa fa-times">').appendTo($("<a data-original-title='Cancelar' data-placement='right' onclick='Spartan_BR_Actions_False_DetailCancelRow(" + index + ")'>").appendTo(actionColInsert));
            actionColInsert.appendTo(row);

            for (i = 0; i < controls.length; i++) {
                $(controls[i]).appendTo($('<td>').appendTo(row));
            }
            $('#Spartan_BR_Actions_False_DetailGrid .inputMoney').inputmask("currency", { prefix: "", rightAlign: false });
            $(".dataTables_scrollBody").animate({ scrollTop: $('#Spartan_BR_Actions_False_DetailGrid').height() }, 1000);

            $('a').tooltip();

            return true;
        }

        var actionCol = $('<td>');
        var edit = "<a class='edit-MR' data-original-title='Editar' data-placement='right' onclick='Spartan_BR_Actions_False_DetailEditRow(" + index + ", this)'>";

        //var editPopUp = "<a class='edit-popup-MR' data-toggle='modal' data-target='#AddSpartan_BR_Actions_False_Detail-form' onclick='Spartan_BR_Actions_False_DetailEditRowPopup(" + index + ", this)'>";

        var eliminar = "<a class='eliminar-MR' data-original-title='Eliminar' data-placement='right' onclick='Spartan_BR_Actions_False_DetailDeleteRow(" + index + ", this)'>";

        $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
        //$('<i class="fa fa-edit">').appendTo($(editPopUp).appendTo(actionCol));
        $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));
        if ($('.Action' + 'Header').css('display') != 'none')
            actionCol.appendTo(row);
        if ($('.Action_Classification' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Action_Classification' + rowIndex + '">').text(GetSpartan_BR_Actions_False_Detail_Spartan_BR_Action_ClassificationName(data.Action_Classification)).appendTo(row);
        if ($('.Action' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Action' + rowIndex + '">').text(GetSpartan_BR_Actions_False_Detail_Spartan_BR_ActionName(data.Action)).appendTo(row);
        if ($('.Action_Result' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Action_Result' + rowIndex + '">').text(GetSpartan_BR_Actions_False_Detail_Spartan_BR_Action_ResultName(data.Action_Result)).appendTo(row);
        if ($('.Parameter_1' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Parameter_1' + rowIndex + '">').text(data.Parameter_1).appendTo(row);
        if ($('.Parameter_2' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Parameter_2' + rowIndex + '">').text(data.Parameter_2).appendTo(row);
        if ($('.Parameter_3' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Parameter_3' + rowIndex + '">').text(data.Parameter_3).appendTo(row);
        if ($('.Parameter_4' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Parameter_4' + rowIndex + '">').text(data.Parameter_4).appendTo(row);
        if ($('.Parameter_5' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Parameter_5' + rowIndex + '">').text(data.Parameter_5).appendTo(row);

        $('a').tooltip();

    }

    var Spartan_BR_Actions_False_DetailTable;
    function showSpartan_BR_Actions_False_DetailGrid(dataSet) {
        //removedSpartan_BR_Actions_False_DetailData = [];
        Spartan_BR_Actions_False_DetailTable = $('#Spartan_BR_Actions_False_DetailGrid').dataTable({
            dom: '<"html5buttons"B>lTgitp',
            buttons: [
            ],
            "createdRow": Spartan_BR_Actions_False_DetailrowCreationGrid,
            //"lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
            data: dataSet,
            "scrollY": "200px",
            "scrollCollapse": true,
            "paging": false,
            "columns": [
                { "data": null, 'visible': true, "orderable": false },
                { "data": "Action_Classification", "orderable": false },
                { "data": "Action", "orderable": false },
                { "data": "Action_Result", "orderable": false },
                { "data": "Parameter_1", "orderable": false },
                { "data": "Parameter_2", "orderable": false },
                { "data": "Parameter_3", "orderable": false },
                { "data": "Parameter_4", "orderable": false },
                { "data": "Parameter_5", "orderable": false },

            ],
            "order": [[0, "asc"]],
            "language": {
                //"lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                "zeroRecords": "@Resources.Resources.NothingFound",
                //"info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                "infoEmpty": "@Resources.Resources.NoRecords",
                "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                "sSearch": "@Resources.Resources.Search",
                //"paginate": {
                //    "previous": "@Resources.Resources.Previous",
                //    "next": "@Resources.Resources.Next"
                //}
            },
            "bDestroy": true,
            "fnDrawCallback": function (settings) {
                setSpartan_BR_Actions_False_DetailValidation();
            }
        }).on('init.dt', function (e, data) {
            $('a').tooltip();
        }).on('draw.dt', function () {
            $('#Spartan_BR_Actions_False_DetailGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
        });
    }

    var Spartan_BR_Actions_False_Detail_Spartan_BR_Action_ClassificationItems;
    function GetSpartan_BR_Actions_False_Detail_Spartan_BR_Action_ClassificationItem() {
        Spartan_BR_Actions_False_Detail_Spartan_BR_Action_ClassificationItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Actions_False_Detail_Spartan_BR_Action_ClassificationAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Actions_False_Detail_Spartan_BR_Action_ClassificationItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    var Spartan_BR_Actions_False_Detail_Spartan_BR_ActionItems;
    function GetSpartan_BR_Actions_False_Detail_Spartan_BR_ActionItem(operations, events) {
        Spartan_BR_Actions_False_Detail_Spartan_BR_ActionItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Actions_False_Detail_Spartan_BR_ActionAll")?operations=" + operations + " & events=" + events;
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Actions_False_Detail_Spartan_BR_ActionItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    var Spartan_BR_Actions_False_Detail_Spartan_BR_Action_ResultItems;
    function GetSpartan_BR_Actions_False_Detail_Spartan_BR_Action_ResultItem() {
        Spartan_BR_Actions_False_Detail_Spartan_BR_Action_ResultItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Actions_False_Detail_Spartan_BR_Action_ResultAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Actions_False_Detail_Spartan_BR_Action_ResultItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var Spartan_BR_Actions_False_DetailData = [];
    var Spartan_BR_Actions_False_DetaildeletedItem = [];
    var Spartan_BR_Actions_False_DetailDataMain = [];
    var Spartan_BR_Actions_False_DetailDataMainPages = [];
    var Spartan_BR_Actions_False_DetailnewItemCount = 0;
    var Spartan_BR_Actions_False_DetailmaxItemIndex = 0;
    var Spartan_BR_Actions_False_DetailDataMainInitialized = false;

    function SendSpartan_BR_Actions_False_Detail(callBack, Key_Business_Rule_CreationId) {
        Spartan_BR_Actions_False_DetailData = GetSpartan_BR_Actions_False_DetailFromDataTable();

        if (Spartan_BR_Actions_False_DetailData.length > 0 || $("#ReferenceKey_Business_Rule_Creation").val() != Key_Business_Rule_CreationId) {
            if ($("#ReferenceKey_Business_Rule_Creation").val() != "0" && Key_Business_Rule_CreationId == null)
                Key_Business_Rule_CreationId = $("#ReferenceKey_Business_Rule_Creation").val();
            if ($("#ReferenceKey_Business_Rule_Creation").val() == '')
                $("#ReferenceKey_Business_Rule_Creation").val('0');
            $.ajax({
                url: '@Url.Content("~/Frontal/Business_Rule_Creation/PostSpartan_BR_Actions_False_Detail?MasterId=")' + Key_Business_Rule_CreationId + "&referenceId=" + $("#ReferenceKey_Business_Rule_Creation").val(),
                type: 'POST',
                data: GetSpartan_BR_Actions_False_Detail(),
                async: true,
                success: function (result) {

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                },
                cache: false,
                contentType: false,
                processData: false
            });
        } else {
            //showNotification("@Resources.Resources.SaveSuccess", "success");
            //callBack(Key_Business_Rule_CreationId);
        }
        return true;
    }

    function GetAddSpartan_BR_Actions_False_DetailPopup(currentRowIndex, mode, id) {

        $.ajax({
            url: "@Url.Action("AddSpartan_BR_Actions_False_Detail", "Spartan_BR_Actions_False_Detail")",
            type: "GET",
            async: false,
            data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
            success: function (data) {
                $(".AddSpartan_BR_Actions_False_DetailModal").html(data);
            },
            error: function () {

            }
        });

        @*$.get('@Url.Action("AddSpartan_BR_Actions_False_Detail", "Spartan_BR_Actions_False_Detail")', { rowIndex: currentRowIndex }, function (data) {
                $(".AddSpartan_BR_Actions_False_DetailModal").html(data);
            });*@
    }

    function ShowMessagePendingRowSpartan_BR_Actions_False_Detail() {
        //Traducción Pendiente
        showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Actions if conditions are False"))', "warning");
    }
    var Spartan_BR_Operation_DetailinsertRowCurrentIndex = -1;
    var Spartan_BR_Operation_DetailDataDataTable;
    function getSpartan_BR_Operation_DetailData() {
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Operation_Detail")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceKey_Business_Rule_Creation").val() != "" ? "&RelationId=" + $("#ReferenceKey_Business_Rule_Creation").val() : ""),
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                Spartan_BR_Operation_DetailDataDataTable = result.data;
                //showSpartan_BR_Operation_DetailGrid(result.data);
                $('#Spartan_BR_Operation_DetailGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    function Spartan_BR_Operation_DetailGetUpdateRowControls(data, nameOfTable, rowIndex) {

        var columnData = [];
        var counter = 0;
        var inputData = "<input type='text' class='fullWidth form-control' />";
        if ($('.Operation' + 'Header').css('display') != 'none') columnData[counter++] = $($(GetSpartan_BR_Operation_Detail_Spartan_BR_OperationDropDown()).val(data.Operation)).addClass('Operation inputNumber').attr('id', nameOfTable + 'Operation' + rowIndex).attr('data-field', 'Operation');

        return columnData;
    }



    function GetFileInfo(fileData, fileUploadData) {

        var $div = $("<div>");
        if (fileUploadData != null && fileUploadData.files.length > 0) {

            $div.append("<label>" + fileUploadData.files[0].name + "</label>");
            //<i class="fa fa-times-circle" id='removeFileAttachment'>
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;

        } else if (fileUploadData != null) {
            return $.parseHTML(GetFileUploader());
        } else {
            $div.append("<label>" + fileData.FileName + "</label>");
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;
        }
    }

    var removedSpartan_BR_Operation_DetailData = [];
    function Spartan_BR_Operation_DetailDeleteRow(rowIndex, row) {
        var rowIndexTable = Spartan_BR_Operation_DetailTable.fnGetPosition($(row).parent().parent()[0]);
        var permission = {
            Delete: true
        };
        if (!permission.Delete || isConsultMode)
            return;
        if (confirm("@Resources.Resources.DeleteConfirm")) {
            if (EjecutarValidacionesAlEliminarMRSpartan_BR_Operation_Detail('Spartan_BR_Operation_Detail_', '_' + rowIndex)) {
                var prevData = Spartan_BR_Operation_DetailTable.fnGetData(rowIndexTable);
                removedSpartan_BR_Operation_DetailData.push(prevData);
                Spartan_BR_Operation_DetailTable.fnDeleteRow(rowIndexTable);
                showSpartan_BR_Operation_DetailGrid(Spartan_BR_Operation_DetailTable.fnGetData());
            }
        }
    }

    function Spartan_BR_Operation_DetailrowCreationGrid(row, data, index) {
        var permission = {
            Edit: true,
            Delete: true
        };
        setSpartan_BR_Operation_DetailValidation();
        var Spartan_BR_Operation_DetailRowElement = "Spartan_BR_Operation_Detail_" + index.toString();
        $(row).addClass(Spartan_BR_Operation_DetailRowElement);
        var nameOfTable = 'Spartan_BR_Operation_Detail_';
        var rowIndex = '_' + index;
        Spartan_BR_Operation_DetailinsertRowCurrentIndex = index;

        row.innerHTML = "";

        if (data.IsInsertRow) {

            if (row.childNodes.length != 0) {
                for (var i = 0; i < row.childNodes.length; i++) {
                    row.childNodes[i].remove();
                }
            }
            var controls = GetInsertSpartan_BR_Operation_DetailRowControls(index);
            var actionColInsert = $('<td>');

            var abc = "if(dynamicFieldValidation('" + Spartan_BR_Operation_DetailRowElement + "')){ Spartan_BR_Operation_DetailInsertRow(" + index + "); }";
            var insertRowHTML = '<a data-original-title="Aceptar" data-placement="right" onclick="' + abc + '">';
            $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
            $('<i class="fa fa-times">').appendTo($("<a data-original-title='Cancelar' data-placement='right' onclick='Spartan_BR_Operation_DetailCancelRow(" + index + ")'>").appendTo(actionColInsert));
            actionColInsert.appendTo(row);

            for (i = 0; i < controls.length; i++) {
                var idHeader = $(controls[i]).data('field') + 'Header';
                if ($(controls[i]).length > 1) {
                    idHeader = $($(controls[i])[1]).data('field') + 'Header';
                }
                if ($('#Spartan_BR_Operation_DetailGrid .' + idHeader).css('display') != 'none') {
                    $(controls[i]).appendTo($('<td>').appendTo(row));
                }
            }
            $('#Spartan_BR_Operation_DetailGrid .inputMoney').inputmask("currency", { prefix: "", rightAlign: false });

            $('a').tooltip();

            return;
        }

        var actionCol = $('<td>');
        var edit = "<a class='edit-MR' data-original-title='Editar' data-placement='right' onclick='Spartan_BR_Operation_DetailEditRow(" + index + ", this)'>";

        var editPopUp = "<a class='edit-popup-MR' data-original-title='Editar' data-placement='right' data-toggle='modal' data-target='#AddSpartan_BR_Operation_Detail-form' onclick='Spartan_BR_Operation_DetailEditRowPopup(" + index + ", this)'>";

        var eliminar = "<a class='eliminar-MR' data-original-title='Eliminar' data-placement='right' onclick='Spartan_BR_Operation_DetailDeleteRow(" + index + ", this)'>";

        $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
        $('<i class="fa fa-edit">').appendTo($(editPopUp).appendTo(actionCol));
        $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));
        if ($('.Action' + 'Header').css('display') != 'none')
            actionCol.appendTo(row);
        if ($('.Operation' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Operation' + rowIndex + '">').text(GetSpartan_BR_Operation_Detail_Spartan_BR_OperationName(data.Operation)).appendTo(row);

        $('a').tooltip();

    }


    var Spartan_BR_Operation_DetailTable;
    function showSpartan_BR_Operation_DetailGrid(dataSet) {
        //removedSpartan_BR_Operation_DetailData = [];
        Spartan_BR_Operation_DetailTable = $('#Spartan_BR_Operation_DetailGrid').dataTable({
            dom: '<"html5buttons"B>lTgitp',
            buttons: [
            ],
            "createdRow": Spartan_BR_Operation_DetailrowCreationGrid,
            "lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
            data: dataSet,
            "columns": [
                { "data": null, 'visible': true, "orderable": false },
                { "data": "Operation", "orderable": false },

            ],
            "order": [[0, "asc"]],
            "language": {
                "lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                "zeroRecords": "@Resources.Resources.NothingFound",
                "info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                "infoEmpty": "@Resources.Resources.NoRecords",
                "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                "sSearch": "@Resources.Resources.Search",
                "paginate": {
                    "previous": "@Resources.Resources.Previous",
                    "next": "@Resources.Resources.Next"
                }
            },
            "bDestroy": true,
            "fnDrawCallback": function (settings) {
                setSpartan_BR_Operation_DetailValidation();
            }
        }).on('init.dt', function (e, data) {
            $('a').tooltip();
        }).on('draw.dt', function () {
            $('#Spartan_BR_Operation_DetailGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
        });
    }

    var Spartan_BR_Operation_Detail_Spartan_BR_OperationItems;
    function GetSpartan_BR_Operation_Detail_Spartan_BR_OperationItem() {
        Spartan_BR_Operation_Detail_Spartan_BR_OperationItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Operation_Detail_Spartan_BR_OperationAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Operation_Detail_Spartan_BR_OperationItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var Spartan_BR_Operation_DetailData = [];
    var Spartan_BR_Operation_DetaildeletedItem = [];
    var Spartan_BR_Operation_DetailDataMain = [];
    var Spartan_BR_Operation_DetailDataMainPages = [];
    var Spartan_BR_Operation_DetailnewItemCount = 0;
    var Spartan_BR_Operation_DetailmaxItemIndex = 0;
    var Spartan_BR_Operation_DetailDataMainInitialized = false;

    function SendSpartan_BR_Operation_Detail(callBack, Key_Business_Rule_CreationId) {
        Spartan_BR_Operation_DetailData = GetSpartan_BR_Operation_DetailFromDataTable();

        if (Spartan_BR_Operation_DetailData.length > 0 || $("#ReferenceKey_Business_Rule_Creation").val() != Key_Business_Rule_CreationId) {
            if ($("#ReferenceKey_Business_Rule_Creation").val() != "0" && Key_Business_Rule_CreationId == null)
                Key_Business_Rule_CreationId = $("#ReferenceKey_Business_Rule_Creation").val();
            if ($("#ReferenceKey_Business_Rule_Creation").val() == '')
                $("#ReferenceKey_Business_Rule_Creation").val('0');
            $.ajax({
                url: '@Url.Content("~/Frontal/Business_Rule_Creation/PostSpartan_BR_Operation_Detail?MasterId=")' + Key_Business_Rule_CreationId + "&referenceId=" + $("#ReferenceKey_Business_Rule_Creation").val(),
                type: 'POST',
                data: GetSpartan_BR_Operation_Detail(),
                async: true,
                success: function (result) {

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                },
                cache: false,
                contentType: false,
                processData: false
            });
        } else {
            //showNotification("@Resources.Resources.SaveSuccess", "success");
            //callBack(Key_Business_Rule_CreationId);
        }
        return true;
    }

    function GetAddSpartan_BR_Operation_DetailPopup(currentRowIndex, mode, id) {

        $.ajax({
            url: "@Url.Action("AddSpartan_BR_Operation_Detail", "Spartan_BR_Operation_Detail")",
            type: "GET",
            async: false,
            data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
            success: function (data) {
                $(".AddSpartan_BR_Operation_DetailModal").html(data);
            },
            error: function () {

            }
        });

        @*$.get('@Url.Action("AddSpartan_BR_Operation_Detail", "Spartan_BR_Operation_Detail")', { rowIndex: currentRowIndex }, function (data) {
                $(".AddSpartan_BR_Operation_DetailModal").html(data);
            });*@
    }

    function ShowMessagePendingRowSpartan_BR_Operation_Detail() {
        //Traducción Pendiente
        showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Operations"))', "warning");
    }
    var Spartan_BR_Process_Event_DetailinsertRowCurrentIndex = -1;
    var Spartan_BR_Process_Event_DetailDataDataTable;
    function getSpartan_BR_Process_Event_DetailData() {
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Process_Event_Detail")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceKey_Business_Rule_Creation").val() != "" ? "&RelationId=" + $("#ReferenceKey_Business_Rule_Creation").val() : ""),
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                Spartan_BR_Process_Event_DetailDataDataTable = result.data;
                //showSpartan_BR_Process_Event_DetailGrid(result.data);
                $('#Spartan_BR_Process_Event_DetailGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    function Spartan_BR_Process_Event_DetailGetUpdateRowControls(data, nameOfTable, rowIndex) {

        var columnData = [];
        var counter = 0;
        var inputData = "<input type='text' class='fullWidth form-control' />";
        if ($('.Process_Event' + 'Header').css('display') != 'none') columnData[counter++] = $($(GetSpartan_BR_Process_Event_Detail_Spartan_BR_Process_EventDropDown()).val(data.Process_Event)).addClass('Process_Event inputNumber').attr('id', nameOfTable + 'Process_Event' + rowIndex).attr('data-field', 'Process_Event');

        return columnData;
    }



    function GetFileInfo(fileData, fileUploadData) {

        var $div = $("<div>");
        if (fileUploadData != null && fileUploadData.files.length > 0) {

            $div.append("<label>" + fileUploadData.files[0].name + "</label>");
            //<i class="fa fa-times-circle" id='removeFileAttachment'>
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;

        } else if (fileUploadData != null) {
            return $.parseHTML(GetFileUploader());
        } else {
            $div.append("<label>" + fileData.FileName + "</label>");
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;
        }
    }

    var removedSpartan_BR_Process_Event_DetailData = [];
    function Spartan_BR_Process_Event_DetailDeleteRow(rowIndex, row) {
        var rowIndexTable = Spartan_BR_Process_Event_DetailTable.fnGetPosition($(row).parent().parent()[0]);
        var permission = {
            Delete: true
        };
        if (!permission.Delete || isConsultMode)
            return;
        if (confirm("@Resources.Resources.DeleteConfirm")) {
            if (EjecutarValidacionesAlEliminarMRSpartan_BR_Process_Event_Detail('Spartan_BR_Process_Event_Detail_', '_' + rowIndex)) {
                var prevData = Spartan_BR_Process_Event_DetailTable.fnGetData(rowIndexTable);
                removedSpartan_BR_Process_Event_DetailData.push(prevData);
                Spartan_BR_Process_Event_DetailTable.fnDeleteRow(rowIndexTable);
                showSpartan_BR_Process_Event_DetailGrid(Spartan_BR_Process_Event_DetailTable.fnGetData());
            }
        }
    }

    function Spartan_BR_Process_Event_DetailrowCreationGrid(row, data, index) {
        var permission = {
            Edit: true,
            Delete: true
        };
        setSpartan_BR_Process_Event_DetailValidation();
        var Spartan_BR_Process_Event_DetailRowElement = "Spartan_BR_Process_Event_Detail_" + index.toString();
        $(row).addClass(Spartan_BR_Process_Event_DetailRowElement);
        var nameOfTable = 'Spartan_BR_Process_Event_Detail_';
        var rowIndex = '_' + index;
        Spartan_BR_Process_Event_DetailinsertRowCurrentIndex = index;

        row.innerHTML = "";

        if (data.IsInsertRow) {

            if (row.childNodes.length != 0) {
                for (var i = 0; i < row.childNodes.length; i++) {
                    row.childNodes[i].remove();
                }
            }
            var controls = GetInsertSpartan_BR_Process_Event_DetailRowControls(index);
            var actionColInsert = $('<td>');

            var abc = "if(dynamicFieldValidation('" + Spartan_BR_Process_Event_DetailRowElement + "')){ Spartan_BR_Process_Event_DetailInsertRow(" + index + "); }";
            var insertRowHTML = '<a data-original-title="Aceptar" data-placement="right" onclick="' + abc + '">';
            $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
            $('<i class="fa fa-times">').appendTo($("<a data-original-title='Cancelar' data-placement='right' onclick='Spartan_BR_Process_Event_DetailCancelRow(" + index + ")'>").appendTo(actionColInsert));
            actionColInsert.appendTo(row);

            for (i = 0; i < controls.length; i++) {
                var idHeader = $(controls[i]).data('field') + 'Header';
                if ($(controls[i]).length > 1) {
                    idHeader = $($(controls[i])[1]).data('field') + 'Header';
                }
                if ($('#Spartan_BR_Process_Event_DetailGrid .' + idHeader).css('display') != 'none') {
                    $(controls[i]).appendTo($('<td>').appendTo(row));
                }
            }
            $('#Spartan_BR_Process_Event_DetailGrid .inputMoney').inputmask("currency", { prefix: "", rightAlign: false });

            $('a').tooltip();

            return;
        }

        var actionCol = $('<td>');
        var edit = "<a class='edit-MR' data-original-title='Editar' data-placement='right' onclick='Spartan_BR_Process_Event_DetailEditRow(" + index + ", this)'>";

        var editPopUp = "<a class='edit-popup-MR' data-original-title='Editar' data-placement='right' data-toggle='modal' data-target='#AddSpartan_BR_Process_Event_Detail-form' onclick='Spartan_BR_Process_Event_DetailEditRowPopup(" + index + ", this)'>";

        var eliminar = "<a class='eliminar-MR' data-original-title='Eliminar' data-placement='right' onclick='Spartan_BR_Process_Event_DetailDeleteRow(" + index + ", this)'>";

        $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
        $('<i class="fa fa-edit">').appendTo($(editPopUp).appendTo(actionCol));
        $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));
        if ($('.Action' + 'Header').css('display') != 'none')
            actionCol.appendTo(row);
        if ($('.Process_Event' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Process_Event' + rowIndex + '">').text(GetSpartan_BR_Process_Event_Detail_Spartan_BR_Process_EventName(data.Process_Event)).appendTo(row);

        $('a').tooltip();

    }

    var Spartan_BR_Process_Event_DetailTable;
    function showSpartan_BR_Process_Event_DetailGrid(dataSet) {
        //removedSpartan_BR_Process_Event_DetailData = [];
        Spartan_BR_Process_Event_DetailTable = $('#Spartan_BR_Process_Event_DetailGrid').dataTable({
            dom: '<"html5buttons"B>lTgitp',
            buttons: [
            ],
            "createdRow": Spartan_BR_Process_Event_DetailrowCreationGrid,
            "lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
            data: dataSet,
            "columns": [
                { "data": null, 'visible': true, "orderable": false },
                { "data": "Process_Event", "orderable": false },

            ],
            "order": [[0, "asc"]],
            "language": {
                "lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                "zeroRecords": "@Resources.Resources.NothingFound",
                "info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                "infoEmpty": "@Resources.Resources.NoRecords",
                "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                "sSearch": "@Resources.Resources.Search",
                "paginate": {
                    "previous": "@Resources.Resources.Previous",
                    "next": "@Resources.Resources.Next"
                }
            },
            "bDestroy": true,
            "fnDrawCallback": function (settings) {
                setSpartan_BR_Process_Event_DetailValidation();
            }
        }).on('init.dt', function (e, data) {
            $('a').tooltip();
        }).on('draw.dt', function () {
            $('#Spartan_BR_Process_Event_DetailGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
        });
    }

    var Spartan_BR_Process_Event_Detail_Spartan_BR_Process_EventItems;
    function GetSpartan_BR_Process_Event_Detail_Spartan_BR_Process_EventItem() {
        Spartan_BR_Process_Event_Detail_Spartan_BR_Process_EventItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Process_Event_Detail_Spartan_BR_Process_EventAll")?Attribute=" + $('#Attribute').val();
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Process_Event_Detail_Spartan_BR_Process_EventItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var Spartan_BR_Process_Event_DetailData = [];
    var Spartan_BR_Process_Event_DetaildeletedItem = [];
    var Spartan_BR_Process_Event_DetailDataMain = [];
    var Spartan_BR_Process_Event_DetailDataMainPages = [];
    var Spartan_BR_Process_Event_DetailnewItemCount = 0;
    var Spartan_BR_Process_Event_DetailmaxItemIndex = 0;
    var Spartan_BR_Process_Event_DetailDataMainInitialized = false;

    function SendSpartan_BR_Process_Event_Detail(callBack, Key_Business_Rule_CreationId) {
        Spartan_BR_Process_Event_DetailData = GetSpartan_BR_Process_Event_DetailFromDataTable();

        if (Spartan_BR_Process_Event_DetailData.length > 0 || $("#ReferenceKey_Business_Rule_Creation").val() != Key_Business_Rule_CreationId) {
            if ($("#ReferenceKey_Business_Rule_Creation").val() != "0" && Key_Business_Rule_CreationId == null)
                Key_Business_Rule_CreationId = $("#ReferenceKey_Business_Rule_Creation").val();
            if ($("#ReferenceKey_Business_Rule_Creation").val() == '')
                $("#ReferenceKey_Business_Rule_Creation").val('0');
            $.ajax({
                url: '@Url.Content("~/Frontal/Business_Rule_Creation/PostSpartan_BR_Process_Event_Detail?MasterId=")' + Key_Business_Rule_CreationId + "&referenceId=" + $("#ReferenceKey_Business_Rule_Creation").val(),
                type: 'POST',
                data: GetSpartan_BR_Process_Event_Detail(),
                async: true,
                success: function (result) {

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                },
                cache: false,
                contentType: false,
                processData: false
            });
        } else {
            //showNotification("@Resources.Resources.SaveSuccess", "success");
            //callBack(Key_Business_Rule_CreationId);
        }
        return true;
    }

    function GetAddSpartan_BR_Process_Event_DetailPopup(currentRowIndex, mode, id) {

        $.ajax({
            url: "@Url.Action("AddSpartan_BR_Process_Event_Detail", "Spartan_BR_Process_Event_Detail")",
            type: "GET",
            async: false,
            data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
            success: function (data) {
                $(".AddSpartan_BR_Process_Event_DetailModal").html(data);
            },
            error: function () {

            }
        });

        @*$.get('@Url.Action("AddSpartan_BR_Process_Event_Detail", "Spartan_BR_Process_Event_Detail")', { rowIndex: currentRowIndex }, function (data) {
                $(".AddSpartan_BR_Process_Event_DetailModal").html(data);
            });*@
    }

    function ShowMessagePendingRowSpartan_BR_Process_Event_Detail() {
        //Traducción Pendiente
        showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Events"))', "warning");
    }
    var Spartan_BR_Peer_ReviewinsertRowCurrentIndex = -1;
    var Spartan_BR_Peer_ReviewDataDataTable;
    function getSpartan_BR_Peer_ReviewData() {
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Peer_Review")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceKey_Business_Rule_Creation").val() != "" ? "&RelationId=" + $("#ReferenceKey_Business_Rule_Creation").val() : ""),
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                Spartan_BR_Peer_ReviewDataDataTable = result.data;
                showSpartan_BR_Peer_ReviewGrid(result.data);
                $('#Spartan_BR_Peer_ReviewGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    function Spartan_BR_Peer_ReviewGetUpdateRowControls(data, nameOfTable, rowIndex) {

        var columnData = [];
        var counter = 0;
        var inputData = "<input type='text' class='fullWidth form-control' />";
        if ($('.User_that_reviewed' + 'Header').css('display') != 'none') columnData[counter++] = $($(GetSpartan_BR_Peer_Review_Spartan_UserDropDown()).val(data.User_that_reviewed)).addClass('User_that_reviewed inputNumber').attr('id', nameOfTable + 'User_that_reviewed' + rowIndex).attr('data-field', 'User_that_reviewed');
        if ($('.Acceptance_Criteria' + 'Header').css('display') != 'none') columnData[counter++] = $($($.parseHTML(inputData)).val(data.Acceptance_Criteria)).addClass('Acceptance_Criteria').attr('id', nameOfTable + 'Acceptance_Criteria' + rowIndex).attr('data-field', 'Acceptance_Criteria');
        if ($('.It_worked' + 'Header').css('display') != 'none') columnData[counter++] = $($($.parseHTML(GetGridCheckBox())).prop('checked', (data.It_worked == "true" || data.It_worked == true) ? 'checked' : '' ? 'checked' : '')).addClass('It_worked').attr('id', nameOfTable + 'It_worked' + rowIndex).attr('data-field', 'It_worked');
        if ($('.Rejection_reason' + 'Header').css('display') != 'none') columnData[counter++] = $($(GetSpartan_BR_Peer_Review_Spartan_BR_Rejection_ReasonDropDown()).val(data.Rejection_reason)).addClass('Rejection_reason inputNumber').attr('id', nameOfTable + 'Rejection_reason' + rowIndex).attr('data-field', 'Rejection_reason');
        if ($('.Comments' + 'Header').css('display') != 'none') columnData[counter++] = $($($.parseHTML(inputData)).val(data.Comments)).addClass('Comments').attr('id', nameOfTable + 'Comments' + rowIndex).attr('data-field', 'Comments');
        //Solucion Incidencia 4
        columnData[counter++] = (data.EvidenceFileInfo.FileId == null || (data.EvidenceFileInfo.FileId <= 0 && data.EvidenceFileInfo.FileName == '')) ? $($.parseHTML(GetFileUploader())).attr('id', nameOfTable + 'Evidence' + rowIndex) : $(GetFileInfo(data.EvidenceFileInfo, data.EvidenceDetail)).attr('id', nameOfTable + 'Evidence' + rowIndex).attr('data-field', 'Evidence');

        return columnData;
    }



    function GetFileInfo(fileData, fileUploadData) {

        var $div = $("<div>");
        if (fileUploadData != null && fileUploadData.files.length > 0) {

            $div.append("<label>" + fileUploadData.files[0].name + "</label>");
            //<i class="fa fa-times-circle" id='removeFileAttachment'>
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;

        } else if (fileUploadData != null) {
            return $.parseHTML(GetFileUploader());
        } else {
            $div.append("<label>" + fileData.FileName + "</label>");
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;
        }
    }

    var removedSpartan_BR_Peer_ReviewData = [];
    function Spartan_BR_Peer_ReviewDeleteRow(rowIndex, row) {
        var rowIndexTable = Spartan_BR_Peer_ReviewTable.fnGetPosition($(row).parent().parent()[0]);
        var permission = {
            Delete: true
        };
        if (!permission.Delete || isConsultMode)
            return;
        if (confirm("@Resources.Resources.DeleteConfirm")) {
            if (EjecutarValidacionesAlEliminarMRSpartan_BR_Peer_Review('Spartan_BR_Peer_Review_', '_' + rowIndex)) {
                var prevData = Spartan_BR_Peer_ReviewTable.fnGetData(rowIndexTable);
                removedSpartan_BR_Peer_ReviewData.push(prevData);
                Spartan_BR_Peer_ReviewTable.fnDeleteRow(rowIndexTable);
                showSpartan_BR_Peer_ReviewGrid(Spartan_BR_Peer_ReviewTable.fnGetData());
            }
        }
    }

    function Spartan_BR_Peer_ReviewrowCreationGrid(row, data, index) {
        var permission = {
            Edit: true,
            Delete: true
        };
        setSpartan_BR_Peer_ReviewValidation();
        var Spartan_BR_Peer_ReviewRowElement = "Spartan_BR_Peer_Review_" + index.toString();
        $(row).addClass(Spartan_BR_Peer_ReviewRowElement);
        var nameOfTable = 'Spartan_BR_Peer_Review_';
        var rowIndex = '_' + index;
        Spartan_BR_Peer_ReviewinsertRowCurrentIndex = index;

        row.innerHTML = "";

        if (data.IsInsertRow) {

            if (row.childNodes.length != 0) {
                for (var i = 0; i < row.childNodes.length; i++) {
                    row.childNodes[i].remove();
                }
            }
            var controls = GetInsertSpartan_BR_Peer_ReviewRowControls(index);
            var actionColInsert = $('<td>');

            var abc = "if(dynamicFieldValidation('" + Spartan_BR_Peer_ReviewRowElement + "')){ Spartan_BR_Peer_ReviewInsertRow(" + index + "); }";
            var insertRowHTML = '<a data-original-title="Aceptar" data-placement="right" onclick="' + abc + '">';
            $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
            $('<i class="fa fa-times">').appendTo($("<a data-original-title='Cancelar' data-placement='right' onclick='Spartan_BR_Peer_ReviewCancelRow(" + index + ")'>").appendTo(actionColInsert));
            actionColInsert.appendTo(row);

            for (i = 0; i < controls.length; i++) {
                var idHeader = $(controls[i]).data('field') + 'Header';
                if ($(controls[i]).length > 1) {
                    idHeader = $($(controls[i])[1]).data('field') + 'Header';
                }
                if ($('#Spartan_BR_Peer_ReviewGrid .' + idHeader).css('display') != 'none') {
                    $(controls[i]).appendTo($('<td>').appendTo(row));
                }
            }
            $('#Spartan_BR_Peer_ReviewGrid .inputMoney').inputmask("currency", { prefix: "", rightAlign: false });

            $('a').tooltip();

            return;
        }

        var actionCol = $('<td>');
        var edit = "<a class='edit-MR' data-original-title='Editar' onclick='Spartan_BR_Peer_ReviewEditRow(" + index + ", this)'>";

        var editPopUp = "<a class='edit-popup-MR' data-original-title='Editar' data-placement='right' data-toggle='modal' data-target='#AddSpartan_BR_Peer_Review-form' onclick='Spartan_BR_Peer_ReviewEditRowPopup(" + index + ", this)'>";

        var eliminar = "<a class='eliminar-MR' data-original-title='Eliminar' data-placement='right' onclick='Spartan_BR_Peer_ReviewDeleteRow(" + index + ", this)'>";

        $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
        //Solucion Incidencia 3
        $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));
        if ($('.Action' + 'Header').css('display') != 'none')
            actionCol.appendTo(row);
        if ($('.User_that_reviewed' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'User_that_reviewed' + rowIndex + '">').text(GetSpartan_BR_Peer_Review_Spartan_UserName(data.User_that_reviewed)).appendTo(row);
        if ($('.Acceptance_Criteria' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Acceptance_Criteria' + rowIndex + '">').text(data.Acceptance_Criteria).appendTo(row);
        if ($('.It_worked' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'It_worked' + rowIndex + '">').text(data.It_worked).appendTo(row);
        if ($('.Rejection_reason' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Rejection_reason' + rowIndex + '">').text(GetSpartan_BR_Peer_Review_Spartan_BR_Rejection_ReasonName(data.Rejection_reason)).appendTo(row);
        if ($('.Comments' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Comments' + rowIndex + '">').text(data.Comments).appendTo(row);
        if ($('.Evidence' + 'Header').css('display') != 'none') {
            var EvidencefileTd = $('<td>');
            if (data.EvidenceDetail != null && data.EvidenceDetail.files != null) {
                if (data.EvidenceDetail.files.length > 0)
                    $("<a >" + data.EvidenceDetail.files[0].name + "</a>").appendTo(EvidencefileTd);
            }
            else if (data.EvidenceFileInfo != null && data.EvidenceFileInfo.FileId > 0) {
                $("<a href='" + '@Url.Content("~/Frontal/Spartan_BR_Peer_Review/GetFile?id=")' + data.EvidenceFileInfo.FileId + "' target='_blank'>" + data.EvidenceFileInfo.FileName + "</a>").appendTo(EvidencefileTd);
            } else {
                $("<a >" + data.EvidenceFileInfo.FileName + "</a>").appendTo(EvidencefileTd);
            }
            EvidencefileTd.appendTo(row);
        }
        $('a').tooltip();

    }


    var Spartan_BR_Peer_ReviewTable;
    function showSpartan_BR_Peer_ReviewGrid(dataSet) {
        //removedSpartan_BR_Peer_ReviewData = [];
        Spartan_BR_Peer_ReviewTable = $('#Spartan_BR_Peer_ReviewGrid').dataTable({
            dom: '<"html5buttons"B>lTgitp',
            buttons: [
            ],
            "createdRow": Spartan_BR_Peer_ReviewrowCreationGrid,
            "lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
            data: dataSet,
            "columns": [
                { "data": null, 'visible': true, "orderable": false },
                { "data": "User_that_reviewed", "orderable": false },
                { "data": "Acceptance_Criteria", "orderable": false },
                { "data": "It_worked", "orderable": false },
                { "data": "Rejection_reason", "orderable": false },
                { "data": "Comments", "orderable": false },
                { "data": "EvidenceFileInfo", "orderable": false },

            ],
            "order": [[0, "asc"]],
            "language": {
                "lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                "zeroRecords": "@Resources.Resources.NothingFound",
                "info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                "infoEmpty": "@Resources.Resources.NoRecords",
                "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                "sSearch": "@Resources.Resources.Search",
                "paginate": {
                    "previous": "@Resources.Resources.Previous",
                    "next": "@Resources.Resources.Next"
                }
            },
            "bDestroy": true,
            "fnDrawCallback": function (settings) {
                setSpartan_BR_Peer_ReviewValidation();
            }
        }).on('init.dt', function (e, data) {
            $('a').tooltip();
        }).on('draw.dt', function () {
            $('#Spartan_BR_Peer_ReviewGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
        });
    }

    var Spartan_BR_Peer_Review_Spartan_UserItems;
    function GetSpartan_BR_Peer_Review_Spartan_UserItem() {
        Spartan_BR_Peer_Review_Spartan_UserItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Peer_Review_Spartan_UserAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Peer_Review_Spartan_UserItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    var Spartan_BR_Peer_Review_Spartan_BR_Rejection_ReasonItems;
    function GetSpartan_BR_Peer_Review_Spartan_BR_Rejection_ReasonItem() {
        Spartan_BR_Peer_Review_Spartan_BR_Rejection_ReasonItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Peer_Review_Spartan_BR_Rejection_ReasonAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Peer_Review_Spartan_BR_Rejection_ReasonItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var Spartan_BR_Peer_ReviewData = [];
    var Spartan_BR_Peer_ReviewdeletedItem = [];
    var Spartan_BR_Peer_ReviewDataMain = [];
    var Spartan_BR_Peer_ReviewDataMainPages = [];
    var Spartan_BR_Peer_ReviewnewItemCount = 0;
    var Spartan_BR_Peer_ReviewmaxItemIndex = 0;
    var Spartan_BR_Peer_ReviewDataMainInitialized = false;

    function SendSpartan_BR_Peer_Review(callBack, Key_Business_Rule_CreationId) {
        Spartan_BR_Peer_ReviewData = GetSpartan_BR_Peer_ReviewFromDataTable();

        if (Spartan_BR_Peer_ReviewData.length > 0 || $("#ReferenceKey_Business_Rule_Creation").val() != Key_Business_Rule_CreationId) {
            if ($("#ReferenceKey_Business_Rule_Creation").val() != "0" && Key_Business_Rule_CreationId == null)
                Key_Business_Rule_CreationId = $("#ReferenceKey_Business_Rule_Creation").val();
            if ($("#ReferenceKey_Business_Rule_Creation").val() == '')
                $("#ReferenceKey_Business_Rule_Creation").val('0');
            $.ajax({
                url: '@Url.Content("~/Frontal/Business_Rule_Creation/PostSpartan_BR_Peer_Review?MasterId=")' + Key_Business_Rule_CreationId + "&referenceId=" + $("#ReferenceKey_Business_Rule_Creation").val(),
                type: 'POST',
                data: GetSpartan_BR_Peer_Review(),
                async: true,
                success: function (result) {

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                },
                cache: false,
                contentType: false,
                processData: false
            });
        } else {
            //showNotification("@Resources.Resources.SaveSuccess", "success");
            //callBack(Key_Business_Rule_CreationId);
        }
        return true;
    }

    function GetAddSpartan_BR_Peer_ReviewPopup(currentRowIndex, mode, id) {

        $.ajax({
            url: "@Url.Action("AddSpartan_BR_Peer_Review", "Spartan_BR_Peer_Review")",
            type: "GET",
            async: false,
            data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
            success: function (data) {
                $(".AddSpartan_BR_Peer_ReviewModal").html(data);
            },
            error: function () {

            }
        });

        @*$.get('@Url.Action("AddSpartan_BR_Peer_Review", "Spartan_BR_Peer_Review")', { rowIndex: currentRowIndex }, function (data) {
                $(".AddSpartan_BR_Peer_ReviewModal").html(data);
            });*@
    }

    function ShowMessagePendingRowSpartan_BR_Peer_Review() {
        //Traducción Pendiente
        showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Peer Reviews"))', "warning");
    }
    var Spartan_BR_TestinginsertRowCurrentIndex = -1;
    var Spartan_BR_TestingDataDataTable;
    function getSpartan_BR_TestingData() {
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Testing")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceKey_Business_Rule_Creation").val() != "" ? "&RelationId=" + $("#ReferenceKey_Business_Rule_Creation").val() : ""),
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                Spartan_BR_TestingDataDataTable = result.data;
                showSpartan_BR_TestingGrid(result.data);
                $('#Spartan_BR_TestingGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    function Spartan_BR_TestingGetUpdateRowControls(data, nameOfTable, rowIndex) {

        var columnData = [];
        var counter = 0;
        var inputData = "<input type='text' class='fullWidth form-control' />";
        if ($('.User_that_reviewed' + 'Header').css('display') != 'none') columnData[counter++] = $($(GetSpartan_BR_Testing_Spartan_UserDropDown()).val(data.User_that_reviewed)).addClass('User_that_reviewed inputNumber').attr('id', nameOfTable + 'User_that_reviewed' + rowIndex).attr('data-field', 'User_that_reviewed');
        if ($('.Acceptance_Critera' + 'Header').css('display') != 'none') columnData[counter++] = $($($.parseHTML(inputData)).val(data.Acceptance_Critera)).addClass('Acceptance_Critera').attr('id', nameOfTable + 'Acceptance_Critera' + rowIndex).attr('data-field', 'Acceptance_Critera');
        if ($('.It_worked' + 'Header').css('display') != 'none') columnData[counter++] = $($($.parseHTML(GetGridCheckBox())).prop('checked', (data.It_worked == "true" || data.It_worked == true) ? 'checked' : '' ? 'checked' : '')).addClass('It_worked').attr('id', nameOfTable + 'It_worked' + rowIndex).attr('data-field', 'It_worked');
        if ($('.Rejection_Reason' + 'Header').css('display') != 'none') columnData[counter++] = $($(GetSpartan_BR_Testing_Spartan_BR_Rejection_ReasonDropDown()).val(data.Rejection_Reason)).addClass('Rejection_Reason inputNumber').attr('id', nameOfTable + 'Rejection_Reason' + rowIndex).attr('data-field', 'Rejection_Reason');
        if ($('.Comments' + 'Header').css('display') != 'none') columnData[counter++] = $($($.parseHTML(inputData)).val(data.Comments)).addClass('Comments').attr('id', nameOfTable + 'Comments' + rowIndex).attr('data-field', 'Comments');
        //Solucion Incidencia 4
        columnData[counter++] = (data.EvidenceFileInfo.FileId == null || (data.EvidenceFileInfo.FileId <= 0 && data.EvidenceFileInfo.FileName == '')) ? $($.parseHTML(GetFileUploader())).attr('id', nameOfTable + 'Evidence' + rowIndex) : $(GetFileInfo(data.EvidenceFileInfo, data.EvidenceDetail)).attr('id', nameOfTable + 'Evidence' + rowIndex).attr('data-field', 'Evidence');

        return columnData;
    }



    function GetFileInfo(fileData, fileUploadData) {

        var $div = $("<div>");
        if (fileUploadData != null && fileUploadData.files.length > 0) {

            $div.append("<label>" + fileUploadData.files[0].name + "</label>");
            //<i class="fa fa-times-circle" id='removeFileAttachment'>
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;

        } else if (fileUploadData != null) {
            return $.parseHTML(GetFileUploader());
        } else {
            $div.append("<label>" + fileData.FileName + "</label>");
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;
        }
    }

    var removedSpartan_BR_TestingData = [];
    function Spartan_BR_TestingDeleteRow(rowIndex, row) {
        var rowIndexTable = Spartan_BR_TestingTable.fnGetPosition($(row).parent().parent()[0]);
        var permission = {
            Delete: true
        };
        if (!permission.Delete || isConsultMode)
            return;
        if (confirm("@Resources.Resources.DeleteConfirm")) {
            if (EjecutarValidacionesAlEliminarMRSpartan_BR_Testing('Spartan_BR_Testing_', '_' + rowIndex)) {
                var prevData = Spartan_BR_TestingTable.fnGetData(rowIndexTable);
                removedSpartan_BR_TestingData.push(prevData);
                Spartan_BR_TestingTable.fnDeleteRow(rowIndexTable);
                showSpartan_BR_TestingGrid(Spartan_BR_TestingTable.fnGetData());
            }
        }
    }

    function Spartan_BR_TestingrowCreationGrid(row, data, index) {
        var permission = {
            Edit: true,
            Delete: true
        };
        setSpartan_BR_TestingValidation();
        var Spartan_BR_TestingRowElement = "Spartan_BR_Testing_" + index.toString();
        $(row).addClass(Spartan_BR_TestingRowElement);
        var nameOfTable = 'Spartan_BR_Testing_';
        var rowIndex = '_' + index;
        Spartan_BR_TestinginsertRowCurrentIndex = index;

        row.innerHTML = "";

        if (data.IsInsertRow) {

            if (row.childNodes.length != 0) {
                for (var i = 0; i < row.childNodes.length; i++) {
                    row.childNodes[i].remove();
                }
            }
            var controls = GetInsertSpartan_BR_TestingRowControls(index);
            var actionColInsert = $('<td>');

            var abc = "if(dynamicFieldValidation('" + Spartan_BR_TestingRowElement + "')){ Spartan_BR_TestingInsertRow(" + index + "); }";
            var insertRowHTML = '<a data-original-title="Aceptar" data-placement="right" onclick="' + abc + '">';
            $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
            $('<i class="fa fa-times">').appendTo($("<a data-original-title='Cancelar' data-placement='right' onclick='Spartan_BR_TestingCancelRow(" + index + ")'>").appendTo(actionColInsert));
            actionColInsert.appendTo(row);

            for (i = 0; i < controls.length; i++) {
                var idHeader = $(controls[i]).data('field') + 'Header';
                if ($(controls[i]).length > 1) {
                    idHeader = $($(controls[i])[1]).data('field') + 'Header';
                }
                if ($('#Spartan_BR_TestingGrid .' + idHeader).css('display') != 'none') {
                    $(controls[i]).appendTo($('<td>').appendTo(row));
                }
            }
            $('#Spartan_BR_TestingGrid .inputMoney').inputmask("currency", { prefix: "", rightAlign: false });

            $('a').tooltip();

            return;
        }

        var actionCol = $('<td>');
        var edit = "<a class='edit-MR' data-original-title='Editar' data-placement='right' onclick='Spartan_BR_TestingEditRow(" + index + ", this)'>";

        var editPopUp = "<a class='edit-popup-MR' data-original-title='Editar' data-placement='right' data-toggle='modal' data-target='#AddSpartan_BR_Testing-form' onclick='Spartan_BR_TestingEditRowPopup(" + index + ", this)'>";

        var eliminar = "<a class='eliminar-MR' data-original-title='Eliminar' data-placement='right' onclick='Spartan_BR_TestingDeleteRow(" + index + ", this)'>";

        $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
        //Solucion Incidencia 3
        $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));
        if ($('.Action' + 'Header').css('display') != 'none')
            actionCol.appendTo(row);
        if ($('.User_that_reviewed' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'User_that_reviewed' + rowIndex + '">').text(GetSpartan_BR_Testing_Spartan_UserName(data.User_that_reviewed)).appendTo(row);
        if ($('.Acceptance_Critera' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Acceptance_Critera' + rowIndex + '">').text(data.Acceptance_Critera).appendTo(row);
        if ($('.It_worked' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'It_worked' + rowIndex + '">').text(data.It_worked).appendTo(row);
        if ($('.Rejection_Reason' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Rejection_Reason' + rowIndex + '">').text(GetSpartan_BR_Testing_Spartan_BR_Rejection_ReasonName(data.Rejection_Reason)).appendTo(row);
        if ($('.Comments' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Comments' + rowIndex + '">').text(data.Comments).appendTo(row);
        if ($('.Evidence' + 'Header').css('display') != 'none') {
            var EvidencefileTd = $('<td>');
            if (data.EvidenceDetail != null && data.EvidenceDetail.files != null) {
                if (data.EvidenceDetail.files.length > 0)
                    $("<a >" + data.EvidenceDetail.files[0].name + "</a>").appendTo(EvidencefileTd);
            }
            else if (data.EvidenceFileInfo != null && data.EvidenceFileInfo.FileId > 0) {
                $("<a href='" + '@Url.Content("~/Frontal/Spartan_BR_Testing/GetFile?id=")' + data.EvidenceFileInfo.FileId + "' target='_blank'>" + data.EvidenceFileInfo.FileName + "</a>").appendTo(EvidencefileTd);
            } else {
                $("<a >" + data.EvidenceFileInfo.FileName + "</a>").appendTo(EvidencefileTd);
            }
            EvidencefileTd.appendTo(row);
        }
        $('a').tooltip();

    }


    var Spartan_BR_TestingTable;
    function showSpartan_BR_TestingGrid(dataSet) {
        //removedSpartan_BR_TestingData = [];
        Spartan_BR_TestingTable = $('#Spartan_BR_TestingGrid').dataTable({
            dom: '<"html5buttons"B>lTgitp',
            buttons: [
            ],
            "createdRow": Spartan_BR_TestingrowCreationGrid,
            "lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
            data: dataSet,
            "columns": [
                { "data": null, 'visible': true, "orderable": false },
                { "data": "User_that_reviewed", "orderable": false },
                { "data": "Acceptance_Critera", "orderable": false },
                { "data": "It_worked", "orderable": false },
                { "data": "Rejection_Reason", "orderable": false },
                { "data": "Comments", "orderable": false },
                { "data": "EvidenceFileInfo", "orderable": false },

            ],
            "order": [[0, "asc"]],
            "language": {
                "lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                "zeroRecords": "@Resources.Resources.NothingFound",
                "info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                "infoEmpty": "@Resources.Resources.NoRecords",
                "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                "sSearch": "@Resources.Resources.Search",
                "paginate": {
                    "previous": "@Resources.Resources.Previous",
                    "next": "@Resources.Resources.Next"
                }
            },
            "bDestroy": true,
            "fnDrawCallback": function (settings) {
                setSpartan_BR_TestingValidation();
            }
        }).on('init.dt', function (e, data) {
            $('a').tooltip();
        }).on('draw.dt', function () {
            $('#Spartan_BR_TestingGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
        });
    }

    var Spartan_BR_Testing_Spartan_UserItems;
    function GetSpartan_BR_Testing_Spartan_UserItem() {
        Spartan_BR_Testing_Spartan_UserItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Testing_Spartan_UserAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Testing_Spartan_UserItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    var Spartan_BR_Testing_Spartan_BR_Rejection_ReasonItems;
    function GetSpartan_BR_Testing_Spartan_BR_Rejection_ReasonItem() {
        Spartan_BR_Testing_Spartan_BR_Rejection_ReasonItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Testing_Spartan_BR_Rejection_ReasonAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Testing_Spartan_BR_Rejection_ReasonItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var Spartan_BR_TestingData = [];
    var Spartan_BR_TestingdeletedItem = [];
    var Spartan_BR_TestingDataMain = [];
    var Spartan_BR_TestingDataMainPages = [];
    var Spartan_BR_TestingnewItemCount = 0;
    var Spartan_BR_TestingmaxItemIndex = 0;
    var Spartan_BR_TestingDataMainInitialized = false;

    function SendSpartan_BR_Testing(callBack, Key_Business_Rule_CreationId) {
        Spartan_BR_TestingData = GetSpartan_BR_TestingFromDataTable();

        if (Spartan_BR_TestingData.length > 0 || $("#ReferenceKey_Business_Rule_Creation").val() != Key_Business_Rule_CreationId) {
            if ($("#ReferenceKey_Business_Rule_Creation").val() != "0" && Key_Business_Rule_CreationId == null)
                Key_Business_Rule_CreationId = $("#ReferenceKey_Business_Rule_Creation").val();
            if ($("#ReferenceKey_Business_Rule_Creation").val() == '')
                $("#ReferenceKey_Business_Rule_Creation").val('0');
            $.ajax({
                url: '@Url.Content("~/Frontal/Business_Rule_Creation/PostSpartan_BR_Testing?MasterId=")' + Key_Business_Rule_CreationId + "&referenceId=" + $("#ReferenceKey_Business_Rule_Creation").val(),
                type: 'POST',
                data: GetSpartan_BR_Testing(),
                async: true,
                success: function (result) {

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                },
                cache: false,
                contentType: false,
                processData: false
            });
        } else {
            //showNotification("@Resources.Resources.SaveSuccess", "success");
            //callBack(Key_Business_Rule_CreationId);
        }
        return true;
    }

    function GetAddSpartan_BR_TestingPopup(currentRowIndex, mode, id) {

        $.ajax({
            url: "@Url.Action("AddSpartan_BR_Testing", "Spartan_BR_Testing")",
            type: "GET",
            async: false,
            data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
            success: function (data) {
                $(".AddSpartan_BR_TestingModal").html(data);
            },
            error: function () {

            }
        });

        @*$.get('@Url.Action("AddSpartan_BR_Testing", "Spartan_BR_Testing")', { rowIndex: currentRowIndex }, function (data) {
                $(".AddSpartan_BR_TestingModal").html(data);
            });*@
    }

    function ShowMessagePendingRowSpartan_BR_Testing() {
        //Traducción Pendiente
        showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Testing"))', "warning");
    }
    var Spartan_BR_Scope_DetailinsertRowCurrentIndex = -1;
    var Spartan_BR_Scope_DetailDataDataTable;
    function getSpartan_BR_Scope_DetailData() {
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Scope_Detail")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceKey_Business_Rule_Creation").val() != "" ? "&RelationId=" + $("#ReferenceKey_Business_Rule_Creation").val() : ""),
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                Spartan_BR_Scope_DetailDataDataTable = result.data;

                //showSpartan_BR_Scope_DetailGrid(result.data);
                $('#Spartan_BR_Scope_DetailGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    function Spartan_BR_Scope_DetailGetUpdateRowControls(data, nameOfTable, rowIndex) {

        var columnData = [];
        var counter = 0;
        var inputData = "<input type='text' class='fullWidth form-control' />";
        if ($('.Scope' + 'Header').css('display') != 'none') columnData[counter++] = $($(GetSpartan_BR_Scope_Detail_Spartan_BR_ScopeDropDown()).val(data.Scope)).addClass('Scope inputNumber').attr('id', nameOfTable + 'Scope' + rowIndex).attr('data-field', 'Scope');

        return columnData;
    }



    function GetFileInfo(fileData, fileUploadData) {

        var $div = $("<div>");
        if (fileUploadData != null && fileUploadData.files.length > 0) {

            $div.append("<label>" + fileUploadData.files[0].name + "</label>");
            //<i class="fa fa-times-circle" id='removeFileAttachment'>
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;

        } else if (fileUploadData != null) {
            return $.parseHTML(GetFileUploader());
        } else {
            $div.append("<label>" + fileData.FileName + "</label>");
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;
        }
    }

    var removedSpartan_BR_Scope_DetailData = [];
    function Spartan_BR_Scope_DetailDeleteRow(rowIndex, row) {
        var rowIndexTable = Spartan_BR_Scope_DetailTable.fnGetPosition($(row).parent().parent()[0]);
        var permission = {
            Delete: true
        };
        if (!permission.Delete || isConsultMode)
            return;
        if (confirm("@Resources.Resources.DeleteConfirm")) {
            if (EjecutarValidacionesAlEliminarMRSpartan_BR_Scope_Detail('Spartan_BR_Scope_Detail_', '_' + rowIndex)) {
                var prevData = Spartan_BR_Scope_DetailTable.fnGetData(rowIndexTable);
                removedSpartan_BR_Scope_DetailData.push(prevData);
                Spartan_BR_Scope_DetailTable.fnDeleteRow(rowIndexTable);
                showSpartan_BR_Scope_DetailGrid(Spartan_BR_Scope_DetailTable.fnGetData());
            }
        }
    }

    function Spartan_BR_Scope_DetailrowCreationGrid(row, data, index) {
        var permission = {
            Edit: true,
            Delete: true
        };
        setSpartan_BR_Scope_DetailValidation();
        var Spartan_BR_Scope_DetailRowElement = "Spartan_BR_Scope_Detail_" + index.toString();
        $(row).addClass(Spartan_BR_Scope_DetailRowElement);
        var nameOfTable = 'Spartan_BR_Scope_Detail_';
        var rowIndex = '_' + index;
        Spartan_BR_Scope_DetailinsertRowCurrentIndex = index;

        row.innerHTML = "";

        if (data.IsInsertRow) {

            if (row.childNodes.length != 0) {
                for (var i = 0; i < row.childNodes.length; i++) {
                    row.childNodes[i].remove();
                }
            }
            var controls = GetInsertSpartan_BR_Scope_DetailRowControls(index);
            var actionColInsert = $('<td>');

            var abc = "if(dynamicFieldValidation('" + Spartan_BR_Scope_DetailRowElement + "')){ Spartan_BR_Scope_DetailInsertRow(" + index + "); }";
            var insertRowHTML = '<a data-original-title="Aceptar" data-placement="right" onclick="' + abc + '">';
            $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
            $('<i class="fa fa-times">').appendTo($("<a data-original-title='Cancelar' data-placement='right' onclick='Spartan_BR_Scope_DetailCancelRow(" + index + ")'>").appendTo(actionColInsert));
            actionColInsert.appendTo(row);

            for (i = 0; i < controls.length; i++) {
                var idHeader = $(controls[i]).data('field') + 'Header';
                if ($(controls[i]).length > 1) {
                    idHeader = $($(controls[i])[1]).data('field') + 'Header';
                }
                if ($('#Spartan_BR_Scope_DetailGrid .' + idHeader).css('display') != 'none') {
                    $(controls[i]).appendTo($('<td>').appendTo(row));
                }
            }
            $('#Spartan_BR_Scope_DetailGrid .inputMoney').inputmask("currency", { prefix: "", rightAlign: false });

            $('a').tooltip();

            return;
        }

        var actionCol = $('<td>');
        var edit = "<a class='edit-MR' data-original-title='Editar' data-placement='right' onclick='Spartan_BR_Scope_DetailEditRow(" + index + ", this)'>";

        var editPopUp = "<a class='edit-popup-MR' data-original-title='Editar' data-placement='right' data-toggle='modal' data-target='#AddSpartan_BR_Scope_Detail-form' onclick='Spartan_BR_Scope_DetailEditRowPopup(" + index + ", this)'>";

        var eliminar = "<a class='eliminar-MR' data-original-title='Eliminar' data-placement='right' onclick='Spartan_BR_Scope_DetailDeleteRow(" + index + ", this)'>";

        $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
        $('<i class="fa fa-edit">').appendTo($(editPopUp).appendTo(actionCol));
        $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));
        if ($('.Action' + 'Header').css('display') != 'none')
            actionCol.appendTo(row);
        if ($('.Scope' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Scope' + rowIndex + '">').text(GetSpartan_BR_Scope_Detail_Spartan_BR_ScopeName(data.Scope)).appendTo(row);

        $('a').tooltip();

    }


    var Spartan_BR_Scope_DetailTable;
    function showSpartan_BR_Scope_DetailGrid(dataSet) {
        //removedSpartan_BR_Scope_DetailData = [];
        Spartan_BR_Scope_DetailTable = $('#Spartan_BR_Scope_DetailGrid').dataTable({
            dom: '<"html5buttons"B>lTgitp',
            buttons: [
            ],
            "createdRow": Spartan_BR_Scope_DetailrowCreationGrid,
            "lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
            data: dataSet,
            "columns": [
                { "data": null, 'visible': true, "orderable": false },
                { "data": "Scope", "orderable": false },

            ],
            "order": [[0, "asc"]],
            "language": {
                "lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                "zeroRecords": "@Resources.Resources.NothingFound",
                "info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                "infoEmpty": "@Resources.Resources.NoRecords",
                "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                "sSearch": "@Resources.Resources.Search",
                "paginate": {
                    "previous": "@Resources.Resources.Previous",
                    "next": "@Resources.Resources.Next"
                }
            },
            "bDestroy": true,
            "fnDrawCallback": function (settings) {
                setSpartan_BR_Scope_DetailValidation();
            }
        }).on('init.dt', function (e, data) {
            $('a').tooltip();
        }).on('draw.dt', function () {
            $('#Spartan_BR_Scope_DetailGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
        });
    }

    var Spartan_BR_Scope_Detail_Spartan_BR_ScopeItems;
    function GetSpartan_BR_Scope_Detail_Spartan_BR_ScopeItem() {
        Spartan_BR_Scope_Detail_Spartan_BR_ScopeItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_Scope_Detail_Spartan_BR_ScopeAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_Scope_Detail_Spartan_BR_ScopeItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var Spartan_BR_Scope_DetailData = [];
    var Spartan_BR_Scope_DetaildeletedItem = [];
    var Spartan_BR_Scope_DetailDataMain = [];
    var Spartan_BR_Scope_DetailDataMainPages = [];
    var Spartan_BR_Scope_DetailnewItemCount = 0;
    var Spartan_BR_Scope_DetailmaxItemIndex = 0;
    var Spartan_BR_Scope_DetailDataMainInitialized = false;

    function SendSpartan_BR_Scope_Detail(callBack, Key_Business_Rule_CreationId) {
        Spartan_BR_Scope_DetailData = GetSpartan_BR_Scope_DetailFromDataTable();

        if (Spartan_BR_Scope_DetailData.length > 0 || $("#ReferenceKey_Business_Rule_Creation").val() != Key_Business_Rule_CreationId) {
            if ($("#ReferenceKey_Business_Rule_Creation").val() != "0" && Key_Business_Rule_CreationId == null)
                Key_Business_Rule_CreationId = $("#ReferenceKey_Business_Rule_Creation").val();
            if ($("#ReferenceKey_Business_Rule_Creation").val() == '')
                $("#ReferenceKey_Business_Rule_Creation").val('0');
            $.ajax({
                url: '@Url.Content("~/Frontal/Business_Rule_Creation/PostSpartan_BR_Scope_Detail?MasterId=")' + Key_Business_Rule_CreationId + "&referenceId=" + $("#ReferenceKey_Business_Rule_Creation").val(),
                type: 'POST',
                data: GetSpartan_BR_Scope_Detail(),
                async: true,
                success: function (result) {

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                },
                cache: false,
                contentType: false,
                processData: false
            });
        } else {
            //showNotification("@Resources.Resources.SaveSuccess", "success");
            //callBack(Key_Business_Rule_CreationId);
        }
        return true;
    }

    function GetAddSpartan_BR_Scope_DetailPopup(currentRowIndex, mode, id) {

        $.ajax({
            url: "@Url.Action("AddSpartan_BR_Scope_Detail", "Spartan_BR_Scope_Detail")",
            type: "GET",
            async: false,
            data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
            success: function (data) {
                $(".AddSpartan_BR_Scope_DetailModal").html(data);
            },
            error: function () {

            }
        });

        @*$.get('@Url.Action("AddSpartan_BR_Scope_Detail", "Spartan_BR_Scope_Detail")', { rowIndex: currentRowIndex }, function (data) {
                $(".AddSpartan_BR_Scope_DetailModal").html(data);
            });*@
    }

    function ShowMessagePendingRowSpartan_BR_Scope_Detail() {
        //Traducción Pendiente
        showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Scopes"))', "warning");
    }

    function ShowMessagePendingRowSpartan_BR_Scope_Detail() {
        //Traducción Pendiente
        showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "Scopes"))', "warning");
    }
    var Spartan_BR_HistoryinsertRowCurrentIndex = -1;
    var Spartan_BR_HistoryDataDataTable;
    function getSpartan_BR_HistoryData() {
        $.ajax({
            url: "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_History")" + "?draw=1&start=1&length=2147483647" + ($("#ReferenceKey_Business_Rule_Creation").val() != "" ? "&RelationId=" + $("#ReferenceKey_Business_Rule_Creation").val() : ""),
            type: 'GET',
            dataType: "json",
            async: false,
            success: function (result) {
                Spartan_BR_HistoryDataDataTable = result.data;
                showSpartan_BR_HistoryGrid(result.data);
                $('#Spartan_BR_HistoryGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    function Spartan_BR_HistoryGetUpdateRowControls(data, nameOfTable, rowIndex) {

        var columnData = [];
        var counter = 0;
        var inputData = "<input type='text' class='fullWidth form-control' />";
        if ($('.User_logged' + 'Header').css('display') != 'none') columnData[counter++] = $($(GetSpartan_BR_History_Spartan_UserDropDown()).val(data.User_logged)).addClass('User_logged inputNumber').attr('id', nameOfTable + 'User_logged' + rowIndex).attr('data-field', 'User_logged');
        if ($('.Status' + 'Header').css('display') != 'none') columnData[counter++] = $($(GetSpartan_BR_History_Spartan_BR_StatusDropDown()).val(data.Status)).addClass('Status inputNumber').attr('id', nameOfTable + 'Status' + rowIndex).attr('data-field', 'Status');
        if ($('.Change_Date' + 'Header').css('display') != 'none') columnData[counter++] = $($($.parseHTML(GetGridDatePicker())).val(data.Change_Date)).addClass('Change_Date').attr('id', nameOfTable + 'Change_Date' + rowIndex).attr('data-field', 'Change_Date');
        if ($('.Hour_Date' + 'Header').css('display') != 'none') columnData[counter++] = $($($.parseHTML(GetGridTimePicker())).val(data.Hour_Date)).addClass('Hour_Date').attr('id', nameOfTable + 'Hour_Date' + rowIndex).attr('data-field', 'Hour_Date');
        if ($('.Time_elapsed' + 'Header').css('display') != 'none') columnData[counter++] = $($($.parseHTML(inputData)).val(data.Time_elapsed)).addClass('Time_elapsed inputNumber').attr('id', nameOfTable + 'Time_elapsed' + rowIndex).attr('data-field', 'Time_elapsed');
        if ($('.Change_Type' + 'Header').css('display') != 'none') columnData[counter++] = $($(GetSpartan_BR_History_Spartan_BR_Type_HistoryDropDown()).val(data.Change_Type)).addClass('Change_Type inputNumber').attr('id', nameOfTable + 'Change_Type' + rowIndex).attr('data-field', 'Change_Type');
        if ($('.Conditions' + 'Header').css('display') != 'none') columnData[counter++] = $($($.parseHTML(inputData)).val(data.Conditions)).addClass('Conditions').attr('id', nameOfTable + 'Conditions' + rowIndex).attr('data-field', 'Conditions');
        if ($('.Actions_True' + 'Header').css('display') != 'none') columnData[counter++] = $($($.parseHTML(inputData)).val(data.Actions_True)).addClass('Actions_True').attr('id', nameOfTable + 'Actions_True' + rowIndex).attr('data-field', 'Actions_True');
        if ($('.Actions_False' + 'Header').css('display') != 'none') columnData[counter++] = $($($.parseHTML(inputData)).val(data.Actions_False)).addClass('Actions_False').attr('id', nameOfTable + 'Actions_False' + rowIndex).attr('data-field', 'Actions_False');

        return columnData;
    }



    function GetFileInfo(fileData, fileUploadData) {

        var $div = $("<div>");
        if (fileUploadData != null && fileUploadData.files.length > 0) {

            $div.append("<label>" + fileUploadData.files[0].name + "</label>");
            //<i class="fa fa-times-circle" id='removeFileAttachment'>
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;

        } else if (fileUploadData != null) {
            return $.parseHTML(GetFileUploader());
        } else {
            $div.append("<label>" + fileData.FileName + "</label>");
            $div.append($("<i class='fa fa-times-circle' id='removeFileAttachment'>").click(function () {
                if (confirm("@Resources.Resources.DeleteConfirm")) {
                    var parent = $(this).parent().parent();
                    parent.empty();
                    parent.append("<input type='file'>");
                }
            }));
            return $div;
        }
    }

    var removedSpartan_BR_HistoryData = [];
    function Spartan_BR_HistoryDeleteRow(rowIndex, row) {
        var rowIndexTable = Spartan_BR_HistoryTable.fnGetPosition($(row).parent().parent()[0]);
        var permission = {
            Delete: true
        };
        if (!permission.Delete || isConsultMode)
            return;
        if (confirm("@Resources.Resources.DeleteConfirm")) {
            if (EjecutarValidacionesAlEliminarMRSpartan_BR_History('Spartan_BR_History_', '_' + rowIndex)) {
                var prevData = Spartan_BR_HistoryTable.fnGetData(rowIndexTable);
                removedSpartan_BR_HistoryData.push(prevData);
                Spartan_BR_HistoryTable.fnDeleteRow(rowIndexTable);
                showSpartan_BR_HistoryGrid(Spartan_BR_HistoryTable.fnGetData());
            }
        }
    }

    function Spartan_BR_HistoryrowCreationGrid(row, data, index) {
        var permission = {
            Edit: true,
            Delete: true
        };
        var Spartan_BR_HistoryRowElement = "Spartan_BR_History_" + index.toString();
        $(row).addClass(Spartan_BR_HistoryRowElement);
        var nameOfTable = 'Spartan_BR_History_';
        var rowIndex = '_' + index;
        Spartan_BR_HistoryinsertRowCurrentIndex = index;

        row.innerHTML = "";

        if (data.IsInsertRow) {

            if (row.childNodes.length != 0) {
                for (var i = 0; i < row.childNodes.length; i++) {
                    row.childNodes[i].remove();
                }
            }
            var controls = GetInsertSpartan_BR_HistoryRowControls(index);
            var actionColInsert = $('<td>');

            /*var abc = "if(dynamicFieldValidation('" + Spartan_BR_HistoryRowElement + "')){ Spartan_BR_HistoryInsertRow(" + index + "); }";
            var insertRowHTML = '<a  onclick="' + abc + '">';
            $('<i class="fa fa-check">').appendTo($(insertRowHTML).appendTo(actionColInsert));
            $('<i class="fa fa-times">').appendTo($("<a  onclick='Spartan_BR_HistoryCancelRow(" + index + ")'>").appendTo(actionColInsert));
            actionColInsert.appendTo(row);*/

            for (i = 0; i < controls.length; i++) {
                var idHeader = $(controls[i]).data('field') + 'Header';
                if ($(controls[i]).length > 1) {
                    idHeader = $($(controls[i])[1]).data('field') + 'Header';
                }
                if ($('#Spartan_BR_HistoryGrid .' + idHeader).css('display') != 'none') {
                    $(controls[i]).appendTo($('<td>').appendTo(row));
                }
            }
            $('#Spartan_BR_HistoryGrid .inputMoney').inputmask("currency", { prefix: "", rightAlign: false });
            return;
        }

        /*var actionCol = $('<td>');
        var edit = "<a title='Edit' class='edit-MR' onclick='Spartan_BR_HistoryEditRow(" + index + ", this)'>";
        if (!permission.Edit || isConsultMode)
            edit = "<a title='Edit' class='not-permission edit-MR' data-placement='top' data-toggle='tooltip' href='#' data-original-title='Usted no tiene permisos para realizar esta acción'>";
        var editPopUp = "<a title='Edit' class='edit-popup-MR' data-toggle='modal' data-target='#AddSpartan_BR_History-form' onclick='Spartan_BR_HistoryEditRowPopup(" + index + ", this)'>";
        if (!permission.Edit || isConsultMode)
            editPopUp = "<a title='Edit' class='not-permission edit-popup-MR' data-placement='top' data-toggle='tooltip' href='#' data-original-title='Usted no tiene permisos para realizar esta acción'>";
        var eliminar = "<a title='Delete' class='eliminar-MR' onclick='Spartan_BR_HistoryDeleteRow(" + index + ", this)'>";
        if (!permission.Delete || isConsultMode)
            eliminar = "<a title='Delete' class='not-permission eliminar-MR' data-placement='top' data-toggle='tooltip' href='#' data-original-title='Usted no tiene permisos para realizar esta acción'>";
        $('<i class="fa fa-pencil">').appendTo($(edit).appendTo(actionCol));
        $('<i class="fa fa-edit">').appendTo($(editPopUp).appendTo(actionCol));
        $('<i class="fa fa-trash-o">').appendTo($(eliminar).appendTo(actionCol));

        if ($('.Action' + 'Header').css('display') != 'none')
            actionCol.appendTo(row);*/
        if ($('.User_logged' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'User_logged' + rowIndex + '">').text(GetSpartan_BR_History_Spartan_UserName(data.User_logged)).appendTo(row);
        if ($('.Status' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Status' + rowIndex + '">').text(GetSpartan_BR_History_Spartan_BR_StatusName(data.Status)).appendTo(row);
        if ($('.Change_Date' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Change_Date' + rowIndex + '">').text(data.Change_Date).appendTo(row);
        if ($('.Hour_Date' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Hour_Date' + rowIndex + '">').text(data.Hour_Date).appendTo(row);
        if ($('.Time_elapsed' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Time_elapsed' + rowIndex + '">').text(data.Time_elapsed).appendTo(row);
        if ($('.Change_Type' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Change_Type' + rowIndex + '">').text(GetSpartan_BR_History_Spartan_BR_Type_HistoryName(data.Change_Type)).appendTo(row);
        if ($('.Conditions' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Conditions' + rowIndex + '">').text(data.Conditions).appendTo(row);
        if ($('.Actions_True' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Actions_True' + rowIndex + '">').text(data.Actions_True).appendTo(row);
        if ($('.Actions_False' + 'Header').css('display') != 'none')
            $('<td id="' + nameOfTable + 'Actions_False' + rowIndex + '">').text(data.Actions_False).appendTo(row);

    }

    var Spartan_BR_HistoryTable;
    function showSpartan_BR_HistoryGrid(dataSet) {
        //removedSpartan_BR_HistoryData = [];
        Spartan_BR_HistoryTable = $('#Spartan_BR_HistoryGrid').dataTable({
            dom: '<"html5buttons"B>lTgitp',
            buttons: [
            ],
            "createdRow": Spartan_BR_HistoryrowCreationGrid,
            "lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
            data: dataSet,
            "columns": [
                //{ "data": null, 'visible': true, "orderable": false },
                { "data": "User_logged", "orderable": true },
                { "data": "Status", "orderable": true },
                { "data": "Change_Date", "orderable": true },
                { "data": "Hour_Date", "orderable": true },
                { "data": "Time_elapsed", "orderable": true },
                { "data": "Change_Type", "orderable": true },
                { "data": "Conditions", "orderable": true },
                { "data": "Actions_True", "orderable": true },
                { "data": "Actions_False", "orderable": true },

            ],
            "order": [[0, "asc"]],
            "language": {
                "lengthMenu": "@Resources.Resources.Display" + " _MENU_ " + "@Resources.Resources.RecordsPerPage",
                "zeroRecords": "@Resources.Resources.NothingFound",
                "info": "@Resources.Resources.ShowingPages" + " _PAGE_ " + "@Resources.Resources.of" + " _PAGES_",
                "infoEmpty": "@Resources.Resources.NoRecords",
                "infoFiltered": "(" + "@Resources.Resources.FilteredFrom" + " _MAX_ " + "@Resources.Resources.TotalRecords" + ")",
                "sSearch": "@Resources.Resources.Search",
                "paginate": {
                    "previous": "@Resources.Resources.Previous",
                    "next": "@Resources.Resources.Next"
                }
            },
            "bDestroy": true,
            "fnDrawCallback": function (settings) {
                //setSpartan_BR_HistoryValidation();
            }
        }).on('init.dt', function (e, data) {
            $('a').tooltip();
        }).on('draw.dt', function () {
            $('#Spartan_BR_HistoryGrid .inputMoney').inputmask("currency", { prefix: "$", rightAlign: false });
        });
    }

    var Spartan_BR_History_Spartan_UserItems;
    function GetSpartan_BR_History_Spartan_UserItem() {
        Spartan_BR_History_Spartan_UserItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_History_Spartan_UserAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_History_Spartan_UserItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    var Spartan_BR_History_Spartan_BR_StatusItems;
    function GetSpartan_BR_History_Spartan_BR_StatusItem() {
        Spartan_BR_History_Spartan_BR_StatusItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_History_Spartan_BR_StatusAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_History_Spartan_BR_StatusItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }
    var Spartan_BR_History_Spartan_BR_Type_HistoryItems;
    function GetSpartan_BR_History_Spartan_BR_Type_HistoryItem() {
        Spartan_BR_History_Spartan_BR_Type_HistoryItems = null;
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/GetSpartan_BR_History_Spartan_BR_Type_HistoryAll")";
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                Spartan_BR_History_Spartan_BR_Type_HistoryItems = result;
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    }

    var Spartan_BR_HistoryData = [];
    var Spartan_BR_HistorydeletedItem = [];
    var Spartan_BR_HistoryDataMain = [];
    var Spartan_BR_HistoryDataMainPages = [];
    var Spartan_BR_HistorynewItemCount = 0;
    var Spartan_BR_HistorymaxItemIndex = 0;
    var Spartan_BR_HistoryDataMainInitialized = false;

    function SendSpartan_BR_History(callBack, Key_Business_Rule_CreationId) {
        Spartan_BR_HistoryData = GetSpartan_BR_HistoryFromDataTable();

        if (Spartan_BR_HistoryData.length > 0 || $("#ReferenceKey_Business_Rule_Creation").val() != Key_Business_Rule_CreationId) {
            if ($("#ReferenceKey_Business_Rule_Creation").val() != "0" && Key_Business_Rule_CreationId == null)
                Key_Business_Rule_CreationId = $("#ReferenceKey_Business_Rule_Creation").val();
            if ($("#ReferenceKey_Business_Rule_Creation").val() == '')
                $("#ReferenceKey_Business_Rule_Creation").val('0');
            $.ajax({
                url: '@Url.Content("~/Frontal/Business_Rule_Creation/PostSpartan_BR_History?MasterId=")' + Key_Business_Rule_CreationId + "&referenceId=" + $("#ReferenceKey_Business_Rule_Creation").val(),
                type: 'POST',
                data: GetSpartan_BR_History(),
                async: true,
                success: function (result) {

                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                },
                cache: false,
                contentType: false,
                processData: false
            });
        } else {
            //showNotification("@Resources.Resources.SaveSuccess", "success");
            //callBack(Key_Business_Rule_CreationId);
        }
        return true;
    }

    function GetAddSpartan_BR_HistoryPopup(currentRowIndex, mode, id) {

        $.ajax({
            url: "@Url.Action("AddSpartan_BR_History", "Spartan_BR_History")",
            type: "GET",
            async: false,
            data: { rowIndex: currentRowIndex, functionMode: mode, id: id },
            success: function (data) {
                $(".AddSpartan_BR_HistoryModal").html(data);
            },
            error: function () {

            }
        });


    }

    function ShowMessagePendingRowSpartan_BR_History() {
        //Traducción Pendiente
        showNotification('@Html.Raw(string.Format(Resources.Resources.PendingRow, "History"))', "warning");
    }

    function initiateUIControls() {
        $('.gridDatePicker').datepicker({
            todayBtn: "linked",
            keyboardNavigation: false,
            forceParse: false,
            calendarWeeks: true,
            autoclose: true,
            format: "@ConfigurationProperty.DateFormatDatePicker"
        });
        //Time Picker
        $('.gridTimePicker').clockpicker();
        $('.inputMoney').inputmask("currency", { greedy: false, prefix: "", rightAlign: false });









    }

</script>
<script type="text/javascript">

    function SendBusiness_Rule_CreationData(callBack) {


        var arr = [];
        $("form#CreateBusiness_Rule_Creation").find(':input').each(function (index) {
            if ($(this).prop('disabled') == true || $(this).prop('disabled') == "disabled") {
                arr.push($(this).attr('id'));
                $(this).prop('disabled', false);
            }
        });

        var formData = new FormData($("form#CreateBusiness_Rule_Creation")[0]);
        $.each(arr, function (key, value) {
            $('#' + value).prop('disabled', true);
        });

        var isNewCreate = $('#hdnIsNewCreate').val();

        if (checkClientValidate('Business_Rule_CreationCreateForm')) {
            $.ajax({
                url: '@Url.Content("~/Frontal/Business_Rule_Creation/Post?IsNew=")' + isNewCreate + "&ObjectId=" + $('#ObjectId').val() + "&Attribute=" + $('#Attribute').val(),
                type: 'POST',
                data: formData,
                async: true,
                success: function (result) {
                    if (result < 0) {
                        showNotification("@Resources.Resources.ErrorSave", "error");
                    } else {
                        SendSpartan_BR_Conditions_Detail(callBack, result);
                        SendSpartan_BR_Actions_True_Detail(callBack, result);
                        SendSpartan_BR_Actions_False_Detail(callBack, result);
                        SendSpartan_BR_Operation_Detail(callBack, result);
                        SendSpartan_BR_Process_Event_Detail(callBack, result);
                        SendSpartan_BR_Peer_Review(callBack, result);
                        SendSpartan_BR_Testing(callBack, result);
                        SendSpartan_BR_Scope_Detail(callBack, result);

                        showNotification("@Resources.Resources.SaveSuccess", "success");
                        callBack(result);
                    }
                },
                error: function (result) {
                    showNotification("@Resources.Resources.ErrorContactingServer", "error");
                },
                cache: false,
                contentType: false,
                processData: false
            });
        }
        return false;
    };
    @*function GetPropertyBag() {
        $.get('@Url.Action("Business_Rule_CreationPropertyBag", "Business_Rule_Creation")', function (data) {
            $(".PropertyModal").html(data);
        });
    }
    function Business_Rule_CreationGetBusinessRule(FieldId, FieldName, Attribute) {
        if (FieldId != null && FieldName != null) {
            $('#hdnBusiness_Rule_CreationBusinessRuleFieldId').val(FieldId);
            $('#hdnBusiness_Rule_CreationBusinessRuleFieldName').val(FieldName);
            $('#hdnBusiness_Rule_CreationBusinessRuleAttribute').val(Attribute);
        }
        $.get('@Url.Action("BusinessRule", "BussinessRule")', { FieldId: $('#hdnBusiness_Rule_CreationBusinessRuleFieldId').val(), FieldName: $('#hdnBusiness_Rule_CreationBusinessRuleFieldName').val(), ObjectId: '35351', Attribute: $('#hdnBusiness_Rule_CreationBusinessRuleAttribute').val(), Screen: 'Business_Rule_Creation' }, function (data) {
            $(".Business_Rule_CreationBusinessRuleModal").html(data);
        });
    }
    function Business_Rule_CreationGetAddBusinessRule(RuleId, FieldId, FieldName, Attribute) {
        if (FieldId != null && FieldName != null) {
            $('#hdnBusiness_Rule_CreationBusinessRuleFieldId').val(FieldId);
            $('#hdnBusiness_Rule_CreationBusinessRuleFieldName').val(FieldName);
            $('#hdnBusiness_Rule_CreationBusinessRuleAttribute').val(Attribute);
        }
        $.get('@Url.Action("AddBusinessRule", "BussinessRule")', { BusinessRuleId: RuleId, FieldId: $('#hdnBusiness_Rule_CreationBusinessRuleFieldId').val(), FieldName: $('#hdnBusiness_Rule_CreationBusinessRuleFieldName').val(), ObjectId: '35351', Attribute: $('#hdnBusiness_Rule_CreationBusinessRuleAttribute').val(), Screen: 'Business_Rule_Creation' }, function (data) {
            $(".Business_Rule_CreationAddBusinessRuleModal").html(data);
            $(".datatable").DataTable();
        });
    }*@
    function RemoveBusinessRule(RuleId) {
        $.get('@Url.Action("RemoveBusinessRule", "BussinessRule")', { BusinessRuleId: RuleId, FieldId: $('#hdnBusiness_Rule_CreationBusinessRuleFieldId').val(), FieldName: $('#hdnBusiness_Rule_CreationBusinessRuleFieldName').val(), ObjectId: '35351', Attribute: $('#hdnBusiness_Rule_CreationBusinessRuleAttribute').val(), Screen: 'Business_Rule_Creation' }, function (data) {
            $(".Business_Rule_CreationBusinessRuleModal").html(data);
        });
    }

    var permission = {
        Consult: true,
        New: true,
        Edit: true,
        Delete: true,
        Export: true,
        Print: true,
        Configure: true,
    };


    //MR-var statusItems;
    //MR-var stateItems;
    //MR-var cityItems = [];
    var isConsultMode = "@ViewBag.Consult" == "True";
    Consult(isConsultMode);
    function Consult(val) {
        if (val) {
            $(':input').attr('readonly', 'readonly');
            $(':input').attr('disabled', 'true');
            $('.noConsult').removeAttr('readonly');
            $('.noConsult').removeAttr('disabled');
        }
    }

    function Business_Rule_CreationBackToGrid() {
        $('.AddBusinessRuleModal').modal('toggle');
        $('#tblBusiness_Rule_Creation').DataTable({ destroy: true });
        $('.btnPopupBusinessRules').css('display', 'none');
        $('.displayRuleButton').css('display', 'none');

        CreateTable();
    }

    function ReadScriptSettings(callback) {
        $.post("@Url.Content("~/Frontal/Business_Rule_Creation/ReadScriptSettings")", function (data) {
            mainElementObject = JSON.parse(data.MainElement);
            if (data.ChildElement != null) {
                childElementObject = JSON.parse(data.ChildElement);
            }
            callback();
        });
    }

    function SaveSettingsWithoutReload() {
        $.post("@Url.Content("~/Frontal/Business_Rule_Creation/WriteScriptSettings")", { CustomModuleAttributeList: mainElementObject, ChildModuleAttributeList: childElementObject }, function (data) {
            //$('#hdnConfigureType').val("0");
        }, "json");
    }

    function SaveElementAttributes() {
        if ($('#hdnConfigureType').val() == "1") {
            $.post("@Url.Content("~/Frontal/Business_Rule_Creation/WriteScriptSettings")", { CustomModuleAttributeList: mainElementObject, ChildModuleAttributeList: childElementObject }, function (data) {
                $('#hdnConfigureType').val("0");
                location.reload(true);
            }, "json");
        } else {
            $.post("@Url.Content("~/Frontal/Business_Rule_Creation/ReadScriptSettings")", function (data) {
                mainElementObject = JSON.parse(data.MainElement);
                childElementObject = JSON.parse(data.ChildElement);

                for (var i = 0; i < mainElementObject.length; i++) {
                    var mainElementAttributes = '<div class="col-sm-2">';
                    mainElementAttributes += '<div class="displayAttributes requiredAttribute"><a class="requiredClick" title="' + (mainElementObject[i].IsRequired == true ? "Required" : "Not Required") + '" onclick="setRequired(' + i.toString() + ', this, 1)"><img src="' + (mainElementObject[i].IsRequired == true ? "@Url.Content("~/Images/Required.png")" : "@Url.Content("~/Images/Not-Required.png")") + '" alt="" /></a></div>';
                    mainElementAttributes += '<div class="displayAttributes visibleAttribute"><a class="visibleClick" title="' + (mainElementObject[i].IsVisible == true ? "Visible" : "In Visible") + '" onclick="setVisible(' + i.toString() + ', this, 1)"><img src="' + (mainElementObject[i].IsVisible == true ? "@Url.Content("~/Images/Visible.png")" : "@Url.Content("~/Images/InVisible.png")") + '" alt="" /></a></div>';
                    mainElementAttributes += '<div class="displayAttributes readOnlyAttribute"><a class="readOnlyClick" title="' + (mainElementObject[i].IsReadOnly == true ? "Disabled" : "Enabled") + '" onclick="setReadOnly(' + i.toString() + ', this, 1)"><img src="' + (mainElementObject[i].IsReadOnly == true ? "@Url.Content("~/Images/Disabled.png")" : "@Url.Content("~/Images/Enabled.png")") + '" alt="" /></a></div>';
                    mainElementAttributes += '<div class="displayAttributes defaultValueAttribute"><a id="hlDefaultValue_' + i.toString() + '" class="defaultValueClick" title="' + (mainElementObject[i].DefaultValue) + '" onclick="setDefaultValue(' + i.toString() + ', this, 1)"><img src="' + (mainElementObject[i].DefaultValue != '' && mainElementObject[i].DefaultValue != null ? "@Url.Content("~/Images/default-value.png")" : "@Url.Content("~/Images/Not-Default-Value.png")") + '" alt="" /></a></div>';
                    mainElementAttributes += '<div class="displayAttributes helpTextAttribute"><a id="hlHelpText_' + i.toString() + '" class="helpTextClick" title="' + (mainElementObject[i].HelpText) + '" onclick="setHelpText(' + i.toString() + ', this, 1)"><img src="' + (mainElementObject[i].HelpText != '' && mainElementObject[i].HelpText != null ? "@Url.Content("~/Images/green-help.png")" : "@Url.Content("~/Images/red-help.jpg")") + '" alt="" /></a></div>';
                    mainElementAttributes += '</div>';
                    $('#' + mainElementObject[i].inputId).parent().closest('.form-group').show();

                    $('#' + mainElementObject[i].inputId).closest('.col-sm-8').after(mainElementAttributes);
                }
                if (childElementObject != null) {
                    for (var j = 0; j < childElementObject.length; j++) {
                        var table = childElementObject[j].table.trim();
                        var grid = '#' + table + 'Grid';
                        $(grid).find("thead").find("tr").find("th").each(function () {
                            for (var i = 0; i < childElementObject[j].elements.length; i++) {
                                if ($(this).hasClass(childElementObject[j].elements[i].inputId + 'Header')) {
                                    $(this).show();
                                    $(this).parent().show();
                                    $(this).append(returnAttributeHTML(childElementObject[j].elements[i], table, i));
                                }
                            }
                        });
                    }

                }
                $('#ConfigureSave').text('Save Settings');
                $('#hdnConfigureType').val("1");
            });
        }
    }
    $('#CreateBusiness_Rule_Creation').on('click', '.btnPopupBusinessRules', function () {
        var fieldId = $(this).data('field-id');
        var fieldName = $(this).data('field-name');
        var attribute = $(this).data('attribute');
        $('#hdnBusiness_Rule_CreationBusinessRuleFieldId').val(fieldId);
        $('#hdnBusiness_Rule_CreationBusinessRuleFieldName').val(fieldName);
        $('#hdnBusiness_Rule_CreationBusinessRuleAttribute').val(attribute);
    });
    //Initialize HTML Editors
    var filebrowserBrowseUrl = '../../ckfinder/ckfinder.html';
    var filebrowserImageBrowseUrl = '../../ckfinder/ckfinder.html?type=Images';
    var filebrowserUploadUrl = '../../ckfinder/connector?command=QuickUpload&type=Files';
    var filebrowserImageUploadUrl = '../../ckfinder/connector?command=QuickUpload&type=Images';
    @*function GetBusinessRule() {
        $.get('@Url.Action("Spartan_BR_ActionBusinessRule", "Spartan_BR_Action")', function (data) {
            $(".BusinessRuleModal").html(data);
        });
    }
    function GetAddBusinessRule(RuleId) {
        $.get('@Url.Action("AddBusinessRule", "Spartan_BR_Action")', { BusinessRuleId: RuleId }, function (data) {
            $(".AddBusinessRuleModal").html(data);
            $(".datatable").DataTable();
        });
    }*@



    $(document).ready(function () {
        if ($('#hdnIsNewCreate').val() == 'True') {
            $('#litabHistory').css('display', 'none');
        }
        $('.dataTables_scrollHeadInner').css('width', '100%');
        $('.dataTables_scrollHeadInner > table').css('width', '100%');
        $('.dataTables_scrollHeadInner > table').css('margin-bottom', '0px');
        if ($('#FieldId').val() != '') {
            $('#Scopes').val('1');
            $('#divScopes').css('display', 'none');
            $('#divOperations').css("display", "none");
            $('#divEvents').css("display", "none");
        }
        else {
            $('#Scopes').val('2');
            $("select#Scopes option[value='1']").remove();
            //$('#Scopes').attr('disabled', 'disabled');
            if ($('#Attribute').val() == '0') {
                $('#Events').val('1');
            }
        }
        @if (Model.Key_Business_Rule_Creation != 0)
                                {
                                    <text>
        $('#Scopes').val(Spartan_BR_Scope_DetailDataDataTable[0].Scope);
        $('#Scopes').trigger('change');
        if (Spartan_BR_Operation_DetailDataDataTable.length > 0) {
            var operations = [];
            debugger;
            for (var i = 0; i < Spartan_BR_Operation_DetailDataDataTable.length; i++) {
                operations.push(Spartan_BR_Operation_DetailDataDataTable[i].Operation);
            }
            $('#Operations').val(operations);
        }
        if (Spartan_BR_Process_Event_DetailDataDataTable.length > 0) {
            var events = [];
            for (var j = 0; j < Spartan_BR_Process_Event_DetailDataDataTable.length; j++) {
                events.push(Spartan_BR_Process_Event_DetailDataDataTable[j].Process_Event);
            }
            $('#Events').val(events);
        }

        </text>
		}
		else
		{
			<text>$('#Scopes').trigger('change');</text>
		}
    });
    $('#Name').blur(function () {
        var ajaxUrl = "@Url.Content("~/Frontal/Business_Rule_Creation/ValidateName")?name=" + $('#Name').val();
        $.ajax({
            url: ajaxUrl,
            type: 'GET',
            dataType: "json",
            async: false,
            global: false,
            success: function (result) {
                if (result == false) {
                    $('#ErrorName').html('@Resources.Business_Rule_CreationResources.ErrorName');
                    //SOLUCION INCIDENCIA 1
                    $('#Name').css('border', '1px solid Red');
                }
                else {
                    $('#ErrorName').html('');
                    //SOLUCION INCIDENCIA 1
                    $('#Name').css('border', '1px solid #e5e6e7');
                }
            },
            error: function (result) {
                showNotification("@Resources.Resources.ErrorContactingServer", "error");
            }
        });
    });
</script>
